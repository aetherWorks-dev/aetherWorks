: 0 : 0
    0 (0 : - / STEPLAD1 / - )
    64 : FLOOR7_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    80 : FLOOR7_1 240 : CEIL3_4 208 0 0
(1504,416) to (1512,416) : 1 : 0 : 0
    0 (0 : - / - / REDWALL1 )
    32 : FLOOR7_1 240 : CEIL3_4 208 0 0
(1512,416) to (1520,416) : 1 : 0 : 0
    0 (40 : - / - / REDWALL1 )
    48 : FLOOR7_1 240 : CEIL3_4 208 0 0
(1520,416) to (1528,416) : 1 : 0 : 0
    0 (48 : - / - / REDWALL1 )
    64 : FLOOR7_1 240 : CEIL3_4 208 0 0
(1528,416) to (1536,416) : 1 : 0 : 0
    0 (56 : - / - / REDWALL1 )
    80 : FLOOR7_1 240 : CEIL3_4 208 0 0
(1504,352) to (1408,352) : 1 : 0 : 0
    0 (32 : - / - / BROWN1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1408,352) to (1408,640) : 1 : 0 : 0
    0 (0 : - / - / BROWN1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1408,640) to (1984,640) : 1 : 0 : 0
    0 (0 : - / - / BROWN1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1984,640) to (1984,344) : 1 : 0 : 0
    0 (0 : - / - / BROWN1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1472,416) to (1504,416) : 1 : 0 : 0
    0 (0 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1536,448) to (1472,448) : 1 : 0 : 0
    0 (0 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1472,448) to (1472,416) : 1 : 0 : 0
    0 (64 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1920,416) to (1920,480) : 1 : 0 : 0
    0 (64 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1920,480) to (1856,480) : 1 : 0 : 0
    0 (0 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1856,480) to (1856,416) : 1 : 0 : 0
    0 (64 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1600,480) to (1600,416) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    16 : FLOOR4_1 112 : FLAT8 160 0 0
(1600,416) to (1600,392) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 112 : FLAT8 160 0 0
(1664,392) to (1664,416) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 112 : FLAT8 160 0 0
(1664,416) to (1664,480) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    16 : FLOOR4_1 112 : FLAT8 160 0 0
(1728,480) to (1728,416) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    16 : FLOOR4_1 112 : FLAT8 160 0 0
(1728,416) to (1728,392) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 112 : FLAT8 160 0 0
(1792,392) to (1792,416) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 112 : FLAT8 160 0 0
(1792,416) to (1792,480) : 4 : 0 : 0
    0 (0 : BROWN1 / - / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    16 : FLOOR4_1 112 : FLAT8 160 0 0
(1728,416) to (1664,416) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1792,416) to (1728,416) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 112 : FLAT8 160 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 112 : FLAT8 160 0 0
(1664,416) to (1600,416) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 112 : FLAT8 160 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 112 : FLAT8 160 0 0
(1856,416) to (1920,416) : 1 : 0 : 0
    0 (0 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1856,344) to (1856,416) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1600,416) to (1536,416) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1536,416) to (1536,448) : 1 : 0 : 0
    0 (64 : - / - / REDWALL1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1856,416) to (1792,416) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1568,256) to (1536,256) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1664,256) to (1632,256) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1632,256) to (1632,248) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    104 : FLAT18 176 : FLAT9 208 0 0
(1632,248) to (1568,248) : 4 : 0 : 0
    0 (0 : DOOR3 / - / - )
    104 : FLAT18 176 : FLAT9 208 0 0
    0 (0 : - / - / - )
    104 : FLAT18 104 : FLAT23 208 0 9
(1568,248) to (1568,256) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    104 : FLAT18 176 : FLAT9 208 0 0
(1632,248) to (1632,240) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    104 : FLAT18 104 : FLAT23 208 0 9
(1632,240) to (1632,232) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    104 : FLAT1 176 : CEIL3_5 208 0 0
(1632,232) to (1648,232) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
(1648,232) to (1648,80) : 17 : 0 : 0
    0 (0 : - / - / BROWN96 )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
(1648,80) to (1552,80) : 17 : 0 : 0
    0 (0 : - / - / BROWN96 )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
(1552,80) to (1552,232) : 17 : 0 : 0
    0 (0 : - / - / BROWN96 )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
(1552,232) to (1568,232) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
(1568,232) to (1568,240) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    104 : FLAT1 176 : CEIL3_5 208 0 0
(1568,240) to (1632,240) : 4 : 0 : 0
    0 (0 : DOOR3 / - / - )
    104 : FLAT1 176 : CEIL3_5 208 0 0
    0 (0 : - / - / - )
    104 : FLAT18 104 : FLAT23 208 0 9
(1632,152) to (1568,152) : 4 : 102 : 12
    0 (0 : - / SW1DIRT / - )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
    0 (0 : - / - / - )
    160 : FLOOR0_2 192 : FLAT8 208 0 12
(1632,144) to (1632,152) : 4 : 0 : 0
    0 (0 : - / SW1DIRT / - )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
    0 (0 : - / - / - )
    160 : FLOOR0_2 192 : FLAT8 208 0 12
(1568,144) to (1632,144) : 4 : 0 : 0
    0 (0 : - / SW1DIRT / - )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
    0 (0 : - / - / - )
    160 : FLOOR0_2 192 : FLAT8 208 0 12
(1568,152) to (1568,144) : 4 : 0 : 0
    0 (0 : - / SW1DIRT / - )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
    0 (0 : - / - / - )
    160 : FLOOR0_2 192 : FLAT8 208 0 12
(1632,256) to (1568,256) : 4 : 0 : 0
    0 (0 : SP_HOT1 / STEP2 / - )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
    0 (0 : - / - / - )
    104 : FLAT18 176 : FLAT9 208 0 0
(1568,232) to (1632,232) : 4 : 0 : 0
    0 (0 : BROWN144 / STEP2 / - )
    96 : FLOOR0_2 192 : FLAT8 208 0 0
    0 (0 : - / - / - )
    104 : FLAT1 176 : CEIL3_5 208 0 0
(1568,240) to (1568,248) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    104 : FLAT18 104 : FLAT23 208 0 9
(1984,344) to (1952,344) : 1 : 0 : 0
    0 (0 : - / - / BROWN1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1952,344) to (1952,280) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1888,280) to (1888,344) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1760,256) to (1760,232) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    80 : FLOOR6_1 208 : TLITE6_5 160 7 0
(1760,232) to (1760,128) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    80 : FLOOR6_1 208 : TLITE6_5 160 7 0
(1664,-392) to (1664,232) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    80 : FLOOR6_1 208 : TLITE6_5 160 7 0
(1664,232) to (1664,256) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    80 : FLOOR6_1 208 : TLITE6_5 160 7 0
(1888,344) to (1872,344) : 1 : 0 : 0
    0 (0 : - / - / BROWN1 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1872,344) to (1856,344) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
(1856,344) to (1856,328) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1856,328) to (1856,256) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(1536,256) to (1536,336) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    96 : FLOOR0_2 192 :  MFLR8_1 128 : FLAT1 128 0 0
(1024,768) to (896,768) : 4 : 0 : 0
    0 (0 : CEMENT3 / ICKWALL6 / - )
    -120 : MFLR8_1 128 : FLAT1 192 8 2
    0 (0 : SHAWN2 / SHAWN2 / - )
    0 : MFLR8_1 128 : FLAT1 128 0 0

things:209
(-160,-1248, 90) :1, 7
(-288,-1248, 90) :2, 7
(-416,-1248, 90) :3, 7
(-544,-1248, 90) :4, 7
(-224,-720, 0) :2007, 7
(-176,-768, 0) :2047, 7
(-176,-720, 0) :2049, 7
(-208,-784, 0) :2010, 2
(-512,-736, 0) :2008, 7
(-672,-288, 0) :2007, 7
(-32,-288, 0) :2008, 7
(1472,736, 0) :2023, 7
(560,-336, 0) :2048, 7
(560,-368, 0) :2012, 7
(448,448, 0) :2002, 7
(448,704, 0) :2012, 7
(448,656, 0) :2008, 7
(544,-32, 0) :2007, 7
(-800,-288, 0) :2007, 7
(-480,864, 0) :2047, 0
(-608,880, 0) :2047, 0
(-96,512, 0) :2012, 7
(-224,176, 0) :2006, 7
(-448,528, 0) :2013, 7
(-1280,-544, 270) :3001, 7
(-992,-544, 270) :3001, 7
(-896,224, 0) :2022, 7
(-912,-800, 0) :2007, 7
(352,32, 0) :2049, 7
(80,368, 0) :2012, 7
(-1264,-160, 0) :3002, 14
(-1104,-160, 0) :3002, 14
(-1296,-272, 0) :2007, 7
(-1104,-272, 0) :2012, 7
(-1200,96, 270) :3001, 7
(-1152,496, 270) :3001, 6
(-464,-48, 270) :3001, 12
(-304,-352, 270) :3001, 15
(-160,-864, 270) :3002, 4
(288,1408, 270) :3001, 7
(448,1424, 225) :3001, 4
(496,1360, 225) :3001, 7
(512,-736, 135) :3001, 6
(464,-1120, 135) :3001, 6
(624,-1120, 135) :3001, 6
(688,-608, 225) :3002, 15
(-352,-48, 270) :3001, 15
(-240,-80, 270) :3001, 12
(-176,-240, 270) :3001, 14
(-80,-784, 0) :40, 7
(-256,1168, 270) :3001, 6
(0,1216, 270) :3001, 6
(240,848, 45) :3001, 7
(432,944, 45) :3001, 7
(464,1120, 45) :3001, 7
(-480,768, 180) :3001, 7
(-720,880, 0) :2011, 7
(-560,-752, 0) :2007, 7
(-512,-784, 0) :2008, 7
(432,-736, 225) :3001, 14
(336,-784, 0) :57, 7
(816,-784, 0) :57, 7
(816,-1072, 0) :57, 7
(336,-1072, 0) :57, 7
(-96,160, 90) :3006, 15
(-672,-96, 90) :3006, 15
(32,-288, 0) :2019, 7
(-592,304, 0) :17, 7
(-224,416, 90) :3006, 14
(1744,416, 270) :3002, 14
(1152,416, 0) :3005, 7
(1056,864, 180) :3002, 15
(928,800, 0) :3002, 14
(-352,-288, 0) :2001, 7
(640,912, 270) :3003, 14
(-768,32, 0) :3002, 14
(848,624, 0) :2012, 7
(848,848, 0) :2047, 7
(-176,816, 270) :3002, 6
(928,992, 0) :2015, 7
(992,992, 0) :2015, 7
(1056,992, 0) :2015, 7
(-624,-784, 0) :2011, 7
(-1296,-800, 0) :2011, 7
(-1008,176, 90) :3001, 14
(1040,1360, 0) :2018, 7
(1200,1264, 0) :2012, 3
(944,1136, 0) :2011, 7
(1072,1232, 0) :8, 7
(1136,1328, 0) :2048, 7
(-368,912, 0) :2012, 7
(-272,912, 0) :2012, 7
(-304,912, 0) :2026, 7
(-336,912, 0) :2008, 7
(48,912, 0) :2048, 7
(16,912, 0) :2011, 7
(-16,912, 0) :2011, 7
(-32,928, 45) :3002, 7
(-1296,-608, 315) :3005, 6
(-1072,-16, 315) :3001, 6
(368,1456, 225) :3001, 4
(368,1392, 225) :3001, 7
(432,1328, 225) :3001, 4
(304,1280, 225) :3001, 6
(0,768, 45) :3001, 7
(-1120,864, 315) :3005, 10
(704,192, 270) :3006, 7
(1392,112, 180) :3006, 6
(1392,-304, 180) :3006, 6
(1392,-96, 180) :3006, 3
(1200,1168, 0) :2011, 7
(1264,1168, 0) :2011, 7
(928,672, 0) :3001, 14
(-672,880, 0) :2019, 7
(-1280,-112, 0) :2008, 7
(-1088,-112, 0) :2008, 7
(-352,-800, 0) :2007, 7
(-352,-608, 0) :2007, 7
(-272,-1248, 0) :2001, 1
(-272,-1216, 0) :2012, 1
(-400,-1248, 0) :2048, 7
(-528,-1248, 0) :2008, 7
(-480,-352, 0) :2011, 7
(-224,-352, 0) :2011, 7
(-576,576, 0) :2012, 7
(-576,512, 0) :2012, 7
(-128,512, 270) :9, 15
(32,-288, 0) :2012, 1
(784,-848, 0) :2049, 7
(784,-1008, 0) :2007, 7
(400,-848, 0) :2011, 7
(400,-1008, 0) :2007, 7
(-1264,-272, 0) :2008, 7
(-1072,-272, 0) :2010, 7
(-1184,336, 0) :2008, 7
(-1184,192, 0) :2008, 7
(-960,704, 0) :2011, 7
(-1088,768, 0) :2011, 7
(-848,-992, 0) :3002, 2
(512,-832, 225) :3002, 4
(1344,-64, 180) :3006, 4
(1344,-128, 180) :3006, 4
(592,-352, 0) :58, 12
(-928,-544, 270) :58, 4
(288,-160, 180) :58, 12
(-400,1072, 0) :3001, 4
(48,1072, 270) :3001, 4
(368,1008, 45) :3001, 7
(336,864, 45) :3001, 7
(1264,528, 0) :3006, 4
(1264,352, 0) :3006, 4
(640,944, 0) :3002, 9
(-304,-1216, 0) :2011, 6
(-736,-96, 0) :2012, 7
(-608,208, 0) :2010, 7
(-1040,848, 315) :3003, 12
(-1184,-288, 270) :62, 7
(-704,-576, 90) :62, 7
(608,-736, 0) :32, 7
(800,288, 0) :41, 7
(1088,-192, 0) :10, 7
(-384,-896, 0) :12, 7
(-16,-928, 0) :24, 7
(-1040,-960, 0) :24, 7
(1152,-64, 0) :61, 7
(1824,144, 0) :46, 7
(1536,320, 0) :42, 7
(1344,320, 0) :42, 7
(1344,576, 0) :42, 7
(1536,576, 0) :42, 7
(-912,832, 0) :25, 7
(-608,-176, 0) :27, 7
(-112,-176, 0) :27, 7
(-576,-448, 0) :45, 7
(-128,-448, 0) :45, 7
(-480,96, 0) :35, 7
(-224,96, 0) :35, 7
(48,-800, 0) :24, 7
(-576,1280, 0) :24, 7
(-752,848, 0) :34, 7
(-576,848, 0) :34, 7
(224,928, 0) :53, 7
(464,848, 0) :25, 7
(1136,1232, 0) :2003, 7
(-624,304, 0) :17, 23
(960,1216, 0) :2019, 23
(-128,544, 0) :2012, 23
(-160,512, 0) :2012, 23
(-128,480, 0) :2012, 23
(64,32, 180) :3002, 12
(1232,1296, 0) :2049, 7
(-160,-1232, 90) :11, 23
(-544,-1232, 90) :11, 23
(880,-48, 135) :11, 23
(224,32, 90) :11, 23
(-672,160, 180) :11, 23
(-640,1216, 0) :11, 23
(-1184,-320, 270) :11, 23
(-912,176, 225) :58, 14
(32,928, 90) :3002, 14
(1200,592, 0) :3006, 4
(1200,304, 0) :3006, 4
(1424,272, 0) :3006, 4
(1296,688, 0) :3006, 4
(1776,320, 270) :3002, 12
(1232,-16, 0) :55, 7
(1232,-176, 0) :55, 7
(1456,-176, 0) :55, 7
(1456,-16, 0) :55, 7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    TLITE6_5 208 0 0
(1536,336) to (1536,352) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    96 : FLOOR0_2 192 : TLITE6_5 208 0 0
(368,-1920) to (512,-1920) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_2 136 : CEIL3_2 128 0 0
(512,-1920) to (512,-1912) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_2 136 : CEIL3_2 128 0 0
(512,-1912) to (640,-1912) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_2 136 : CEIL3_2 128 0 0
    0 (0 : - / - / - )
    64 : FLOOR7_1 64 : FLAT23 160 0 0
(640,-1912) to (640,-1920) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_2 136 : CEIL3_2 128 0 0
(640,-1920) to (712,-1920) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_2 136 : CEIL3_2 128 0 0
(512,-1912) to (512,-1904) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR7_1 64 : FLAT23 160 0 0
(640,-1904) to (512,-1904) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR7_1 64 : FLAT23 160 0 0
(512,-1904) to (512,-1896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(512,-1896) to (384,-1896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(384,-1896) to (384,-1728) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(704,-1896) to (640,-1896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(640,-1896) to (640,-1904) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(448,-1344) to (448,-1152) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(448,-1152) to (512,-1152) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(512,-1152) to (512,-1144) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(512,-1144) to (512,-1136) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(512,-1136) to (512,-1128) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(512,-1128) to (344,-1128) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(344,-1128) to (344,-1088) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(344,-1088) to (336,-1088) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(336,-1088) to (328,-1088) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(328,-1088) to (320,-1088) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(320,-1088) to (320,-1216) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(128,-1216) to (128,-1224) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(128,-1224) to (128,-1232) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(128,-1232) to (128,-1240) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
(128,-1240) to (192,-1240) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
(192,-1240) to (192,-1384) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
(192,-1384) to (-192,-1384) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
(-192,-1384) to (-264,-1312) : 36 : 31 : 0
    112 (0 : GSTONE1 / - / - )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : CEIL3_1 160 0 0
(-264,-1312) to (-192,-1240) : 36 : 31 : 0
    112 (0 : GSTONE1 / - / - )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : CEIL3_1 160 0 0
(-192,-1240) to (0,-1240) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
(0,-1240) to (0,-1232) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
(0,-1232) to (0,-1224) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(0,-1224) to (0,-1216) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(0,-1216) to (-192,-1216) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(-192,-1216) to (-192,-1152) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(-192,-1152) to (-200,-1152) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(-200,-1152) to (-208,-1152) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-208,-1152) to (-216,-1152) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-216,-1152) to (-216,-1216) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-216,-1216) to (-376,-1216) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-376,-1216) to (-376,-1152) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-376,-1152) to (-384,-1152) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-384,-1152) to (-392,-1152) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-392,-1152) to (-408,-1152) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 192 : CEIL5_2 160 7 0
(-408,-1152) to (-408,-1216) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
(-408,-1216) to (-576,-1216) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
(-576,-992) to (-408,-992) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
(-408,-992) to (-408,-1024) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
(-408,-1024) to (-392,-1024) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 192 : CEIL5_2 160 7 0
(-392,-1024) to (-384,-1024) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-384,-1024) to (-376,-1024) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-376,-1024) to (-376,-896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-376,-896) to (-216,-896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-216,-896) to (-216,-1024) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-216,-1024) to (-208,-1024) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
(-208,-1024) to (-200,-1024) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-200,-1024) to (-192,-1024) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(-192,-1024) to (-192,-896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(-192,-896) to (-64,-896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(-64,-896) to (-64,-888) : 1 : 0 : 0
    32 (0 : - / - / GSTONE1 )
    72 : FLOOR5_4 144 : CEIL3_4 208 0 0
(-64,-888) to (-64,-880) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    72 : FLOOR5_4 72 : FLAT23 208 0 0
(-64,-880) to (-64,-872) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(-64,-872) to (-104,-832) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(-64,-744) to (0,-744) : 1 : 18 : 17
    0 (0 : - / - / SW1STON1 )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
(40,-832) to (0,-872) : 1 : 0 : 0
    0 (64 : - / - / GSTONE1 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(0,-872) to (0,-880) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(0,-880) to (0,-888) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    72 : FLOOR5_4 72 : FLAT23 208 0 0
(0,-888) to (0,-896) : 1 : 0 : 0
    32 (0 : - / - / GSTONE1 )
    72 : FLOOR5_4 144 : CEIL3_4 208 0 0
(0,-896) to (64,-896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(64,-832) to (320,-832) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(320,-832) to  128 0 0
(1728,-3616) to (1728,-3600) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1856,-3488) to (1792,-3488) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1792,-3488) to (1792,-3504) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1856,-3504) to (1856,-3488) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1792,-3600) to (1792,-3616) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1792,-3616) to (1856,-3616) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1856,-3616) to (1856,-3600) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1984,-3488) to (1920,-3488) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1920,-3488) to (1920,-3504) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1984,-3504) to (1984,-3488) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(1920,-3600) to (1920,-3616) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1920,-3616) to (1984,-3616) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1984,-3616) to (1984,-3600) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(1792,-3504) to (1760,-3504) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -32 : MFLR8_3 136 : MFLR8_2 144 0 0
(1760,-3504) to (1728,-3504) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -40 : MFLR8_3 136 : MFLR8_2 144 0 0
(1920,-3504) to (1888,-3504) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    0 : MFLR8_3 136 : MFLR8_2 144 0 0
(1888,-3504) to (1856,-3504) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -8 : MFLR8_3 136 : MFLR8_2 144 0 0
(1760,-3600) to (1792,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -32 : MFLR8_3 136 : MFLR8_2 144 0 0
(1728,-3600) to (1760,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -40 : MFLR8_3 136 : MFLR8_2 144 0 0
(1888,-3600) to (1920,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    0 : MFLR8_3 136 : MFLR8_2 144 0 0
(1856,-3600) to (1888,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -8 : MFLR8_3 136 : MFLR8_2 144 0 0
(1664,-3504) to (1696,-3504) : 9 : 0 : 0
    0 (0 : - / - / METAL6 )
    -56 : MFLR8_3 112 : MFLR8_2 255 0 0
(1696,-3504) to (1728,-3504) : 9 : 0 : 0
    0 (32 : - / - / METAL6 )
    -48 : MFLR8_3 112 : MFLR8_2 255 0 14
(1792,-3504) to (1824,-3504) : 9 : 0 : 0
    0 (0 : - / - / METAL6 )
    -24 : MFLR8_3 112 : MFLR8_2 255 0 0
(1824,-3504) to (1856,-3504) : 9 : 0 : 0
    0 (32 : - / - / METAL6 )
    -16 : MFLR8_3 112 : MFLR8_2 255 0 0
(1920,-3504) to (1952,-3504) : 9 : 0 : 0
    0 (0 : - / - / METAL6 )
    8 : MFLR8_3 112 : MFLR8_2 255 0 0
(1952,-3504) to (1984,-3504) : 9 : 0 : 0
    0 (32 : - / - / METAL6 )
    16 : MFLR8_3 112 : MFLR8_2 255 0 0
(1696,-3600) to (1664,-3600) : 9 : 0 : 0
    0 (32 : - / - / METAL6 )
    -56 : MFLR8_3 112 : MFLR8_2 255 0 0
(1728,-3600) to (1696,-3600) : 9 : 0 : 0
    0 (0 : - / - / METAL6 )
    -48 : MFLR8_3 112 : MFLR8_2 255 0 14
(1824,-3600) to (1792,-3600) : 9 : 0 : 0
    0 (32 : - / - / METAL6 )
    -24 : MFLR8_3 112 : MFLR8_2 255 0 0
(1856,-3600) to (1824,-3600) : 9 : 0 : 0
    0 (0 : - / - / METAL6 )
    -16 : MFLR8_3 112 : MFLR8_2 255 0 0
(1952,-3600) to (1920,-3600) : 9 : 0 : 0
    0 (32 : - / - / METAL6 )
    8 : MFLR8_3 112 : MFLR8_2 255 0 0
(1984,-3600) to (1952,-3600) : 9 : 0 : 0
    0 (0 : - / - / METAL6 )
    16 : MFLR8_3 112 : MFLR8_2 255 0 0
(1696,-3504) to (1696,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -56 : MFLR8_3 112 : MFLR8_2 255 0 0
    0 (0 : - / - / - )
    -48 : MFLR8_3 112 : MFLR8_2 255 0 14
(1664,-3504) to (1664,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -56 : MFLR8_3 112 : MFLR8_2 255 0 0
(1728,-3504) to (1728,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -48 : MFLR8_3 112 : MFLR8_2 255 0 14
    0 (0 : METAL2 / - / - )
    -40 : MFLR8_3 136 : MFLR8_2 144 0 0
(1792,-3504) to (1792,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -32 : MFLR8_3 136 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    -24 : MFLR8_3 112 : MFLR8_2 255 0 0
(1760,-3504) to (1760,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -40 : MFLR8_3 136 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    -32 : MFLR8_3 136 : MFLR8_2 144 0 0
(1824,-3504) to (1824,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -24 : MFLR8_3 112 : MFLR8_2 255 0 0
    0 (0 : - / - / - )
    -16 : MFLR8_3 112 : MFLR8_2 255 0 0
(1888,-3504) to (1888,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -8 : MFLR8_3 136 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    0 : MFLR8_3 136 : MFLR8_2 144 0 0
(1856,-3504) to (1856,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -16 : MFLR8_3 112 : MFLR8_2 255 0 0
    0 (0 : METAL2 / - / - )
    -8 : MFLR8_3 136 : MFLR8_2 144 0 0
(1920,-3504) to (1920,-3600) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    0 : MFLR8_3 136 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    8 : MFLR8_3 112 : MFLR8_2 255 0 0
(1984,-3504) to (1984,-3600) : 20 : 36 : 13
    0 (0 : METAL2 / METAL2 / - )
    16 : MFLR8_3 112 : MFLR8_2 255 0 0
    0 (0 : METAL2 / - / - )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(1952,-3504) to (1952,-3600) : 20 : 36 : 17
    0 (0 : METAL2 / METAL2 / - )
    8 : MFLR8_3 112 : MFLR8_2 255 0 0
    0 (0 : - / - / - )
    16 : MFLR8_3 112 : MFLR8_2 255 0 0
(2040,-3392) to (2104,-3392) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(2104,-3392) to (2104,-3712) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(2104,-3712) to (2040,-3712) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(1984,-3616) to (2040,-3712) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(2040,-3392) to (1984,-3488) : 20 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    24 : MFLR8_3 136 : MFLR8_2 176 0 0
(1472,-3416) to (1536,-3360) : 20 : 91 : 18
    0 (0 : METAL2 / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1408,-3440) to (1472,-3440) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    136 : MFLR8_2 136 : MFLR8_2 128 0 13
(1472,-3712) to (1408,-3712) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    136 : MFLR8_2 136 : MFLR8_2 128 0 13
(1408,-3712) to (1376,-3744) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1248,-3744) to (1248,-3408) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1248,-3408) to (1376,-3408) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1376,-3408) to (1408,-3440) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1472,-3712) to (1472,-3440) : 4 : 94 : 13
    0 (0 : - / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    136 : MFLR8_2 136 : MFLR8_2 128 0 13
(1408,-3440) to (1408,-3712) : 4 : 126 : 14
    0 (0 : - / METAL2 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    136 : MFLR8_2 136 : MFLR8_2 128 0 13
(1528,-3768) to (1528,-3712) : 20 : 0 : 0
    0 (0 : METAL2 / METAL5 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    64 : MFLR8_3 136 : MFLR8_2 128 0 0
(1528,-3712) to (1472,-3712) : 20(320,-960) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(320,-960) to (328,-960) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(328,-960) to (336,-960) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(336,-960) to (344,-960) : 1 : 0 : 0
    0 (0 : - / - / DOORSTOP )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(344,-704) to (704,-704) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(704,-1128) to (640,-1128) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(640,-1128) to (640,-1136) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(640,-1136) to (640,-1144) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(640,-1144) to (640,-1152) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(640,-1152) to (704,-1152) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(512,-1144) to (640,-1144) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(640,-1136) to (512,-1136) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(328,-960) to (328,-1088) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(336,-1088) to (336,-960) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-208,-1024) to (-208,-1152) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-64,-888) to (0,-888) : 4 : 1 : 0
    0 (0 : ICKDOOR1 / - / - )
    72 : FLOOR5_4 144 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    72 : FLOOR5_4 72 : FLAT23 208 0 0
(0,-880) to (-64,-880) : 4 : 1 : 0
    0 (0 : ICKDOOR1 / step4 / - )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
    0 (0 : - / - / - )
    72 : FLOOR5_4 72 : FLAT23 208 0 0
(-392,-1024) to (-392,-1152) : 4 : 1 : 0
    0 (0 : MARBFACE / - / - )
    64 : FLOOR5_4 192 : CEIL5_2 160 7 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-384,-1152) to (-384,-1024) : 4 : 1 : 0
    0 (0 : MARBFACE / - / - )
    64 : FLOOR5_4 192 : TLITE6_4 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-200,-1152) to (-200,-1024) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(128,-1224) to (0,-1224) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(0,-1232) to (128,-1232) : 4 : 1 : 0
    0 (0 : BIGDOOR3 / - / - )
    64 : FLOOR5_4 176 : CEIL3_1 160 0 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : FLAT23 160 0 0
(-64,-896) to (0,-896) : 28 : 0 : 0
    0 (0 : GSTONE1 / GSTONE1 / - )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    72 : FLOOR5_4 144 : CEIL3_4 208 0 0
(384,-1728) to (576,-1728) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(576,-1728) to (576,-1344) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(576,-1344) to (448,-1344) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(704,-1152) to (704,-1896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : TLITE6_4 160 0 0
(344,-960) to (344,-704) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(704,-704) to (704,-1128) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(64,-896) to (64,-832) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(320,-1216) to (128,-1216) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_4 208 0 0
(640,-1904) to (640,-1912) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    64 : FLOOR7_1 64 : FLAT23 160 0 0
(40,-768) to (0,-800) : 4 : 0 : 0
    0 (0 : - / ashwall / - )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
    0 (0 : - / - / - )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(0,-800) to (-64,-800) : 4 : 0 : 0
    0 (0 : - / ashwall / - )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
    0 (0 : - / - / - )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(-64,-800) to (-104,-768) : 4 : 0 : 0
    0 (0 : - / ashwall / - )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
    0 (0 : - / - / - )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(-104,-768) to (-72,-744) : 1 : 0 : 0
    0 (0 : - / - / ashwall )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
(-72,-744) to (-64,-744) : 1 : 0 : 0
    0 (26 : - / - / SUPPORT3 )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
(0,-744) to (8,-744) : 1 : 0 : 0
    0 (26 : - / - / SUPPORT3 )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
(416,-1040) to (512,-1040) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(512,-1040) to (512,-896) : 1 : 0 : 0
    0 (64 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(512,-896) to (640,-896) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(640,-896) to (640,-880) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(640,-880) to (496,-880) : 1 : 0 : 0
    0 (144 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(496,-880) to (496,-1024) : 1 : 0 : 0
    0 (32 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(496,-1024) to (416,-1024) : 1 : 0 : 0
    0 (224 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(416,-1024) to (416,-1040) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    64 : FLOOR5_4 176 : FLAT3 160 0 0
(-576,-1216) to (-576,-1152) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
(-576,-1024) to (-576,-992) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
(-640,-1152) to (-640,-1024) : 1 : 0 : 0
    0 (0 : - / - / SP_DUDE2 )
    88 : FLOOR6_1 216 : TLITE6_5 208 7 0
(-576,-1152) to (-576,-1024) : 29 : 0 : 0
    0 (0 : GSTONE1 / GSTONE1 / - )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
    0 (0 : - / - / - )
    88 : FLOOR6_1 216 : TLITE6_5 208 7 0
(-640,-1024) to (-600,-1024) : 1 : 0 : 0
    0 (128 : - / - / GSTONE1 )
    88 : FLOOR6_1 216 : TLITE6_5 208 7 0
(-600,-1024) to (-576,-1024) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    88 : FLOOR6_1 216 : TLITE6_5 208 7 0
(-576,-1152) to (-600,-1152) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    88 : FLOOR6_1 216 : TLITE6_5 208 7 0
(-600,-1152) to (-640,-1152) : 1 : 0 : 0
    0 (216 : - / - / GSTONE1 )
    88 : FLOOR6_1 216 : TLITE6_5 208 7 0
(-408,-1024) to (-408,-1152) : 4 : 0 : 0
    0 (0 : GSTONE1 / GSTONE1 / - )
    56 : FLOOR6_1 312 : TLITE6_5 208 7 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 192 : CEIL5_2 160 7 0
(-272,-1240) to (-192,-1240) : 17 : 0 : 0
    112 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 64 : CEIL3_1 160 0 0
(-192,-1384) to (-272,-1384) : 17 : 0 : 0
    112 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 64 : CEIL3_1 160 0 0
(-272,-1384) to (-384,-1384) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 9 0
(-384,-1384) to (-384,-1240) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 9 0
(-384,-1240) to (-272,-1240) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : FLOOR5_4 176 : CEIL3_1 160 9 0
(8,-744) to (40,-768) : 1 : 0 : 0
    0 (0 : - / - / ashwall )
    8 : FLOOR6_2 136 : FLOOR6_2 144 9 17
(-104,-832) to (-104,-784) : 1 : 0 : 0
    0 (64 : - / - / GSTONE1 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(-104,-784) to (-104,-768) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(40,-768) to (40,-784) : 1 : 0 : 0
    0 (24 : - / - / SUPPORT3 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(40,-784) to (40,-832) : 1 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    64 : LAVA4 136 : FLOOR6_2 144 16 0
(-272,-1240) to (-272,-1384) : 52 : 0 : 0
    0 (0 : GSTONE1 : 0 : 0
    0 (0 : METAL2 / METAL5 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    64 : MFLR8_3 136 : MFLR8_2 128 0 0
(1528,-3768) to (1472,-3768) : 1 : 0 : 0
    0 (0 : - / - / METAL5 )
    64 : MFLR8_3 136 : MFLR8_2 128 0 0
(1472,-3768) to (1472,-3712) : 1 : 0 : 0
    0 (0 : - / - / METAL5 )
    64 : MFLR8_3 136 : MFLR8_2 128 0 0
(1376,-3744) to (1312,-3744) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1312,-3744) to (1312,-3760) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 8 : MFLR8_2 144 0 0
(1312,-3760) to (1248,-3760) : 17 : 70 : 13
    0 (0 : - / - / SW1GARG )
    -64 : MFLR8_4 8 : MFLR8_2 144 0 0
(1248,-3760) to (1248,-3744) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 8 : MFLR8_2 144 0 0
(1312,-3744) to (1248,-3744) : 20 : 0 : 0
    0 (0 : METAL2 / METAL5 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    -64 : MFLR8_4 8 : MFLR8_2 144 0 0
(1216,-3072) to (1216,-3168) : 4 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    328 : BLOOD3 328 : F_SKY1 255 5 15
(624,-3232) to (688,-3296) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(688,-3296) to (832,-3296) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(832,-3296) to (896,-3232) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(896,-3232) to (896,-3168) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(896,-3040) to (896,-2976) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(896,-2976) to (832,-2912) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(832,-2912) to (688,-2912) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(688,-2912) to (624,-2976) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(624,-2976) to (624,-3232) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(640,-2976) to (688,-2928) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(688,-2928) to (832,-2928) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(832,-2928) to (880,-2976) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(880,-2976) to (880,-3040) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(880,-3040) to (896,-3040) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    192 : MFLR8_3 304 : MFLR8_2 160 0 0
(896,-3168) to (880,-3168) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    192 : MFLR8_3 304 : MFLR8_2 160 0 0
(880,-3168) to (880,-3232) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(880,-3232) to (832,-3280) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(832,-3280) to (688,-3280) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(688,-3280) to (640,-3232) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(880,-3040) to (880,-3168) : 28 : 38 : 15
    0 (0 : ROCK1 / ROCK1 / - )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
    0 (0 : - / - / - )
    192 : MFLR8_3 304 : MFLR8_2 160 0 0
(896,-3168) to (920,-3136) : 28 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    192 : MFLR8_3 328 : F_SKY1 255 0 0
(920,-3136) to (984,-3136) : 28 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    192 : MFLR8_3 328 : F_SKY1 255 0 0
(984,-3136) to (984,-3072) : 28 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    192 : MFLR8_3 328 : F_SKY1 255 0 0
(984,-3072) to (920,-3072) : 28 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    192 : MFLR8_3 328 : F_SKY1 255 0 0
(920,-3072) to (896,-3040) : 28 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    192 : MFLR8_3 328 : F_SKY1 255 0 0
(640,-3136) to (640,-3072) : 1 : 0 : 0
    0 (0 : - / - / STONE6 )
    400 : GATE1 472 : F_SKY1 255 8 16
(640,-3136) to (704,-3136) : 4 : 97 : 31
    0 (0 : STONE6 / SUPPORT3 / - )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
    0 (0 : STONE6 / STONE6 / - )
    400 : GATE1 472 : F_SKY1 255 8 16
(704,-3136) to (704,-3072) : 4 : 97 : 31
    0 (0 : STONE6 / SUPPORT3 / - )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
    0 (0 : STONE6 / STONE6 / - )
    400 : GATE1 472 : F_SKY1 255 8 16
(704,-3072) to (640,-3072) : 4 : 97 : 31
    0 (0 : STONE6 / SUPPORT3 / - )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
    0 (0 : STONE6 / STONE6 / - )
    400 : GATE1 472 : F_SKY1 255 8 16
(640,-3232) to (640,-3160) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(640,-3160) to (640,-3136) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(640,-3072) to (640,-3048) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(640,-3048) to (640,-2976) : 1 : 0 : 0
    0 (0 : - / - / ROCK3 )
    176 : MFLR8_3 304 : MFLR8_2 160 0 0
(896,-3168) to (896,-3040) : 28 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    192 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    192 : MFLR8_3 304 : MFLR8_2 160 0 0
(3912,360) to (3744,360) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -56 : MFLR8_3 328 : F_SKY1 255 0 0
(3744,360) to (3744,320) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3984,472) to (3912,360) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -40 : MFLR8_3 328 : F_SKY1 255 0 0
(3984,704) to (3984,472) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -24 : MFLR8_3 328 : F_SKY1 255 0 0
(3856,776) to (3984,704) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -8 : MFLR8_3 328 : F_SKY1 255 0 0
(3736,776) to (3856,776) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    8 : MFLR8_3 328 : F_SKY1 255 0 0
(3648,776) to (3736,776) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    24 : MFLR8_3 328 : F_SKY1 255 0 0
(3584,776) to (3648,776) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    40 : MFLR8_3 328 : F_SKY1 255 0 0
(3520,776) to (3584,776) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    56 : MFLR8_3 328 : F_SKY1 255 0 0
(3456,776) to (3520,776) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    72 : MFLR8_3 328 : F_SKY1 255 0 0
(3808,672) to (3736,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    8 : MFLR8_3 328 : F_SKY1 255 0 0
(3736,672) to (3648,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    24 : MFLR8_3 328 : F_SKY1 255 0 0
(3648,672) to (3584,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    40 : MFLR8_3 328 : F_SKY1 255 0 0
(3584,672) to (3520,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    56 : MFLR8_3 328 : F_SKY1 255 0 0
(3520,672) to (3456,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    72 : MFLR8_3 328 : F_SKY1 255 0 0
(3456,672) to (3328,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
(3328,672) to (3264,704) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
(3168,704) to (3072,672) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3200,704) to (3200,768) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    96 : GATE2 328 : F_SKY1 255 0 0
(3264,768) to (3328,824) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
(3328,824) to (3392,824) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
(3392,824) to (3456,776) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
(3392,840) to (3312,840) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3312,840) to (3248,784) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3248,784) to (3168,784) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3168,784) to (3168,704) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3472,792) to (3392,840) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255  / - / - )
    64 : FLOOR5_4 176 : CEIL3_1 160 9 0
    0 (0 : - / - / - )
    64 : FLOOR5_4 64 : CEIL3_1 160 0 0
(1888,264) to (1952,264) : 4 : 0 : 0
    0 (0 : TEKWALL4 / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 24 : FLAT23 144 0 0
(1888,264) to (1888,272) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    24 : FLOOR3_3 24 : FLAT23 144 0 0
(1888,272) to (1888,280) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    24 : FLOOR3_3 152 : CEIL3_4 208 0 0
(1952,280) to (1952,272) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    24 : FLOOR3_3 152 : CEIL3_4 208 0 0
(1952,272) to (1952,264) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    24 : FLOOR3_3 24 : FLAT23 144 0 0
(2128,192) to (1888,192) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(1952,264) to (1952,256) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(1952,256) to (2032,256) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2032,640) to (2048,640) : 1 : 0 : 0
    0 (96 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2048,640) to (2048,664) : 1 : 0 : 0
    0 (64 : - / - / EXITDOOR )
    40 : STEP2 112 : FLAT1 128 0 0
(2048,664) to (2048,680) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    40 : FLAT23 40 : FLAT23 128 0 0
(2048,680) to (2048,704) : 1 : 0 : 0
    0 (88 : - / - / EXITDOOR )
    40 : STEP2 112 : FLAT1 128 0 0
(2048,704) to (1984,704) : 1 : 0 : 0
    0 (0 : - / - / COMPWERD )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(1984,896) to (2048,896) : 1 : 0 : 0
    0 (0 : - / - / LITEBLU4 )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2048,896) to (2048,960) : 1 : 0 : 0
    0 (0 : - / - / COMPBLUE )
    24 : GATE4 88 : GATE4 208 0 0
(2048,960) to (2112,960) : 1 : 0 : 0
    0 (0 : - / - / COMPBLUE )
    24 : GATE4 88 : GATE4 208 0 0
(2112,960) to (2112,896) : 1 : 0 : 0
    0 (0 : - / - / COMPBLUE )
    24 : GATE4 88 : GATE4 208 0 0
(2112,896) to (2176,896) : 1 : 0 : 0
    0 (0 : - / - / LITEBLU4 )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2176,704) to (2112,704) : 1 : 0 : 0
    0 (0 : - / - / COMPWERD )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2112,704) to (2112,680) : 1 : 0 : 0
    0 (64 : - / - / EXITDOOR )
    40 : STEP2 112 : FLAT1 128 0 0
(2112,680) to (2112,664) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    40 : FLAT23 40 : FLAT23 128 0 0
(2112,664) to (2112,640) : 1 : 0 : 0
    0 (88 : - / - / EXITDOOR )
    40 : STEP2 112 : FLAT1 128 0 0
(2112,640) to (2128,640) : 1 : 0 : 0
    0 (48 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2048,664) to (2112,664) : 4 : 1 : 0
    0 (0 : EXITDOOR / - / - )
    40 : STEP2 112 : FLAT1 128 0 0
    0 (0 : - / - / - )
    40 : FLAT23 40 : FLAT23 128 0 0
(2112,680) to (2048,680) : 4 : 1 : 0
    0 (0 : EXITDOOR / - / - )
    40 : STEP2 112 : FLAT1 128 0 0
    0 (0 : - / - / - )
    40 : FLAT23 40 : FLAT23 128 0 0
(2112,704) to (2048,704) : 20 : 0 : 0
    0 (0 : COMPSPAN / COMPSPAN / - )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
    0 (0 : - / - / - )
    40 : STEP2 112 : FLAT1 128 0 0
(2048,896) to (2112,896) : 28 : 52 : 0
    0 (0 : LITEBLU4 / LITEBLU4 / - )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
    0 (0 : - / - / - )
    24 : GATE4 88 : GATE4 208 0 0
(1952,280) to (1888,280) : 4 : 0 : 0
    0 (0 : BROWN1 / BROWN1 / - )
    16 : FLOOR4_1 240 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_4 208 0 0
(1952,272) to (1888,272) : 4 : 31 : 0
    0 (0 : TEKWALL4 / - / - )
    24 : FLOOR3_3 152 : CEIL3_4 208 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 24 : FLAT23 144 0 0
(1888,192) to (1888,256) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(1888,256) to (1888,264) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(1984,704) to (1984,736) : 1 : 0 : 0
    0 (0 : - / - / COMPSPAN )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(1984,736) to (1984,864) : 1 : 0 : 0
    0 (0 : - / - / COMPTILE )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(1984,864) to (1984,896) : 1 : 0 : 0
    0 (0 : - / - / COMPSPAN )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2176,896) to (2176,856) : 1 : 0 : 0
    0 (0 : - / - / COMPSPAN )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2176,856) to (2176,736) : 1 : 0 : 0
    0 (0 : - / - / COMPTILE )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2176,736) to (2176,704) : 1 : 0 : 0
    0 (0 : - / - / COMPSPAN )
    24 : FLOOR1_1 152 : CEIL4_3 208 0 0
(2048,640) to (2064,640) : 12 : 0 : 0
    0 (112 : BROWN96 / STEP5 / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
    0 (0 : - / - / - )
    40 : STEP2 112 : FLAT1 128 0 0
(2064,640) to (2096,640) : 12 : 0 : 0
    0 (0 : BROWN96 / EXITSIGN / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    40 : STEP2 112 : FLAT1 128 0 0
(2096,640) to (2112,640) : 12 : 0 : 0
    0 (32 : BROWN96 / STEP5 / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
    0 (0 : - / - / - )
    40 : STEP2 112 : FLAT1 128 0 0
(2032,576) to (2024,576) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    48 : FLAT14 64 : FLAT14 176 0 0
(2024,576) to (2024,608) : 1 : 0 : 0
    0 (0 : - / - / EXITSIGN )
    48 : FLAT14 64 : FLAT14 176 0 0
(2024,608) to (2032,608) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    48 : FLAT14 64 : FLAT14 176 0 0
(2032,608) to (2032,640) : 1 : 0 : 0
    0 (96 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2128,640) to (2128,608) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2128,608) to (2136,608) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    48 : FLAT14 64 : FLAT14 176 0 0
(2136,608) to (2136,576) : 1 : 0 : 0
    0 (0 : - / - / EXITSIGN )
    48 : FLAT14 64 : FLAT14 176 0 0
(2136,576) to (2128,576) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    48 : FLAT14 64 : FLAT14 176 0 0
(2128,608) to (2128,576) : 28 : 0 : 0
    0 (0 : BROWN96 / BROWN96 / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    48 : FLAT14 64 : FLAT14 176 0 0
(2032,576) to (2032,608) : 28 : 0 : 0
    0 (64 : BROWN96 / BROWN96 / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    48 : FLAT14 64 : FLAT14 176 0 0
(2032,608) to (2064,640) : 132 : 0 : 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2096,640) to (2128,608) : 132 : 0 : 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2032,256) to (2032,576) : 1 : 0 : 0
    0 (0 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2128,576) to (2128,192) : 1 : 0 : 0
    0 (112 : - / - / BROWN96 )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2080,552) to (2032,576) : 132 : 0 : 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(2128,576) to (2080,552) : 132 : 0 : 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 176 0 0
    0 (0 : - / - / - )
    24 : FLOOR3_3 152 : CEIL3_2 128 0 0
(-552,-520) to (-552,-648) : 4 : 1 : 6
    0 (0 : PIPE2 / STEP6 / - )
    80 : FLOOR7_1 176 : TLITE6_5 160 0 0
    0 (0 : - / - / - )
    80 : FLOOR7_1 80 : TLITE6_5 160 0 6
(-64,-208) to (8,-256) : 4 : 0 : 0
    56 (0 : PIPE1 / PIPE1 / - )
    16 : FLOOR6_1 160 : SFLR6_4 208 0 5
    0 (64 : PIPE1 / PIPE1 / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(8,-256) to (8,-352) : 4 : 0 : 0
    56 (0 : PIPE1 / PIPE1 / - )
    16 : FLOOR6_1 160 : SFLR6_4 208 0 5
    0 (64 : PIPE1 / PIPE1 / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(1160,512) to (1216,456) : 28 : 0 : 0
    32 (64 : GSTONE1 / GSTONE1 / - )
    0 : FLOOR0_5 96 : CEIL3_5 128 0 0
    0 (0 : - / - / - )
    24 : DEM1_5 48 : DEM1_5 128 0 0
(1216,456) to (1256,416) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : FLOOR0_5 96 : CEIL3_5 128 0 0
(1160,512) to (1216,568) : 1 : 0 : 0
    0 (0 : - / - / metal )
    24 : DEM1_5 48 : DEM1_5 128 0 0
(1272,512) to (1216,456) : 1 : 0 : 0
    0 (0 : - / - / metal )
    24 : DEM1_5 48 : DEM1_5 128 0 0
(1272,512) to (1216,568) : 28 : 0 : 0
    32 (80 : GSTONE1 / GSTONE1 / - )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
    0 (0 : - / - / - )
    24 : DEM1_5 48 : DEM1_5 128 0 0
(15 0
(4000,792) to (3472,792) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(4000,320) to (4000,792) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3744,320) to (4000,320) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3744,448) to (3744,360) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    -56 : MFLR8_3 328 : F_SKY1 255 0 0
(3864,448) to (3912,360) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    -56 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    -40 : MFLR8_3 328 : F_SKY1 255 0 0
(3904,512) to (3984,472) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    -40 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    -24 : MFLR8_3 328 : F_SKY1 255 0 0
(3904,616) to (3984,704) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    -24 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    -8 : MFLR8_3 328 : F_SKY1 255 0 0
(3808,672) to (3856,776) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    -8 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    8 : MFLR8_3 328 : F_SKY1 255 0 0
(3736,672) to (3736,776) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    8 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    24 : MFLR8_3 328 : F_SKY1 255 0 0
(3648,672) to (3648,776) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    24 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    40 : MFLR8_3 328 : F_SKY1 255 0 0
(3584,672) to (3584,776) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    40 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    56 : MFLR8_3 328 : F_SKY1 255 0 0
(3520,672) to (3520,776) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    56 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    72 : MFLR8_3 328 : F_SKY1 255 0 0
(3456,672) to (3456,776) : 20 : 0 : 0
    0 (0 : ROCK2 / ROCK2 / - )
    72 : MFLR8_3 328 : F_SKY1 255 0 0
    0 (0 : - / - / - )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
(3264,704) to (3264,768) : 20 : 97 : 24
    0 (0 : ROCK2 / ROCK2 / - )
    88 : MFLR8_3 168 : MFLR8_2 144 0 0
    0 (0 : ROCK2 / - / - )
    96 : GATE2 328 : F_SKY1 255 0 0
(3200,768) to (3264,768) : 1 : 0 : 0
    0 (0 : - / - / ROCK2 )
    96 : GATE2 328 : F_SKY1 255 0 0
(3264,704) to (3200,704) : 1 : 0 : 0
    0 (8 : - / - / ROCK2 )
    96 : GATE2 328 : F_SKY1 255 0 0
(1472,-3416) to (1360,-3304) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1360,-3304) to (1344,-3304) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    16 : MFLR8_2 16 : MFLR8_2 144 0 17
(1344,-3304) to (1344,-3328) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1344,-3392) to (1280,-3392) : 1 : 0 : 0
    0 (0 : - / - / STONE7 )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(1360,-3304) to (1280,-3224) : 20 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    16 : MFLR8_2 16 : MFLR8_2 144 0 17
(1280,-3328) to (1280,-3304) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1280,-3304) to (1280,-3224) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    16 : MFLR8_2 16 : MFLR8_2 144 0 17
(1280,-3304) to (1344,-3304) : 20 : 0 : 0
    0 (0 : ROCK1 / ROCK1 / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    16 : MFLR8_2 16 : MFLR8_2 144 0 17
(1344,-3328) to (1280,-3328) : 20 : 83 : 18
    0 (0 : METAL2 / METAL2 / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(1248,-3192) to (1224,-3168) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1248,-3072) to (1304,-3128) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1320,-3144) to (1536,-3360) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1304,-3128) to (1320,-3144) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 18
(1280,-3224) to (1264,-3208) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
(1264,-3208) to (1248,-3192) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 18
(1264,-3208) to (1320,-3144) : 4 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 18
(1304,-3128) to (1248,-3192) : 4 : 0 : 0
    0 (0 : METAL2 / METAL2 / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 0
    0 (0 : - / - / - )
    -56 : MFLR8_4 16 : MFLR8_2 144 0 18
(1344,-3328) to (1344,-3336) : 1 : 0 : 0
    0 (0 : - / - / STONE7 )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(1344,-3336) to (1344,-3392) : 1 : 0 : 0
    0 (0 : - / - / STONE7 )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(1280,-3392) to (1280,-3336) : 1 : 0 : 0
    0 (0 : - / - / STONE7 )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(1280,-3336) to (1280,-3328) : 1 : 0 : 0
    0 (0 : - / - / STONE7 )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(1344,-3336) to (1280,-3336) : 20 : 97 : 28
    0 (0 : METAL2 / METAL2 / - )
    -56 : GATE1 16 : MFLR8_2 255 2 0
    0 (0 : - / - / - )
    -56 : GATE1 16 : MFLR8_2 255 2 0
(3392,-3776) to (3392,-2880) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(4032,-3328) to (3392,-2880) : 20 : 88 : 19
    0 (0 : ROCK1 / ROCKRED1 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3392,-2496) to (3968,-2240) : 20 : 88 : 19
    0 (0 : ROCK1 / ROCKRED1 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(3968,-2240) to (4544,-2496) : 20 : 88 : 19
    0 (0 : ROCK1 / ROCKRED1 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(4544,-2880) to (4032,-3328) : 20 : 88 : 19
    0 (0 : ROCK1 / ROCKRED1 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(4616,-1408) to (4544,-2496) : 4 : 0 : 0
    0 (0 : MARBLE3 / MARBLE3 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    -72 : BLOOD3 208 : F_SKY1 160 5 0
(4544,-2496) to (4544,-2880) : 4 : 0 : 0
    0 (0 : MARBLE3 / MARBLE3 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -280 : LAVA4 208 : F_SKY1 160 16 0
(4544,-2880) to (4544,-4360) : 4 : 0 : 0
    0 (0 : MARBLE3 / MARBLE3 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
    0 (0 : - / - / - )
    -72 : BLOOD3 208 : F_SKY1 160 5 0
(4720,-1216) to (4736,-2496) : 1 : 0 : 0
    0 (0 : - / - / TANROCK4 )
    -72 : BLOOD3 208 : F_SKY1 160 5 0
(4736,-2496) to (4736,-2880) : 1 : 0 : 0
    0 (0 : - / - / TANROCK4 )
    -280 : LAVA4 208 : F_SKY1 160 16 0
(4736,-2880) to (4744,-4488) : 1 : 0 : 0
    0 (0 : - / - / TANROCK4 )
    -72 : BLOOD3 208 : F_SKY1 160 5 0
(4544,-2496) to (4736,-2496) : 20 : 0 : 0
    0 (0 : ROCK1 / ROCKRED1 / - )
    -280 : LAVA4 208 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -72 : BLOOD3 208 : F_SKY1 160 5 0
(4736,-2880) to (4544,-2880) : 20 : 0 : 0
    0 (0 : ROCK1 / ROCKRED1 / - )
    -280 : LAVA4 208 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -72 : BLOOD3 208 : F_SKY1 160 5 0
(4240,-2480) to (3640,-2480) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(3776,-2960) to (4240,-2960) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(4160,-2944) to (3776,-2944) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -184 : MFLR8_3 -72 : FLAT5_5 128 0 0
(3776,-2880) to (4160,-2880) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -184 : MFLR8_3 -72 : FLAT5_5 128 0 0
(4160,-2816) to (3776,-2816) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 24 : MFLR8_2 128 0 0
(3776,-2752) to (4160,-2752) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 24 : MFLR8_2 128 0 0
(4160,-2880) to (4160,-2816) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
(3776,-2944) to (3776,-2960) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -184 : MFLR8_3 328 : F_SKY1 160 0 19
(3776,-2688) to (3776,-2752) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    8 : MFLR8_3 328 : F_SKY1 160 0 21
(4160,-2688) to (3776,-2688) : 1 : 0 : 0
    0 (0 : - / - / ROCK5216,640) to (1216,704) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : GATE1 96 : GATE1 176 0 1
(1216,704) to (1280,704) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : GATE1 96 : GATE1 176 0 1
(1344,704) to (1344,512) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
(1344,512) to (1272,512) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
(1280,704) to (1344,704) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
(1216,568) to (1216,640) : 17 : 0 : 0
    0 (0 : - / - / GSTONE1 )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
(1216,640) to (1280,640) : 4 : 97 : 18
    0 (0 : - / - / - )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
    0 (0 : - / - / - )
    0 : GATE1 96 : GATE1 176 0 1
(1280,640) to (1280,704) : 4 : 97 : 18
    0 (0 : - / - / - )
    0 : FLOOR0_5 96 : CEIL3_5 128 9 0
    0 (0 : - / - / - )
    0 : GATE1 96 : GATE1 176 0 1
(520,-1568) to (520,-1632) : 1 : 0 : 0
    0 (0 : - / - / ICKWALL5 )
    64 : FLOOR0_3 136 : CEIL3_5 160 0 0
(520,-1632) to (520,-1664) : 1 : 0 : 0
    0 (0 : - / - / ICKWALL1 )
    64 : FLOOR0_3 136 : CEIL3_5 160 0 0
(-704,-560) to (-616,-440) : 132 : 74 : 4
    0 (0 : - / - / - )
    64 : FLOOR5_2 192 : CEIL3_2 128 0 0
    0 (0 : GSTONE1 / STEP6 / - )
    64 : FLOOR5_2 192 : CEIL3_2 128 0 0
(-144,-408) to (16,-408) : 132 : 73 : 5
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(16,-408) to (16,-200) : 132 : 73 : 5
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(16,-200) to (-144,-200) : 132 : 73 : 5
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(-144,-200) to (-144,-408) : 132 : 73 : 5
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(328,-392) to (120,-392) : 132 : 73 : 4
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(328,-600) to (328,-392) : 132 : 73 : 4
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(120,-600) to (328,-600) : 132 : 73 : 4
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(120,-392) to (120,-600) : 132 : 73 : 4
    0 (0 : - / - / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 472 : F_SKY1 160 0 0
(-384,-824) to (-384,-648) : 1 : 0 : 0
    8 (42 : - / - / SKINLOW )
    72 : SFLR6_1 168 : MFLR8_2 160 0 0
(-136,-728) to (-224,-704) : 12 : 0 : 0
    0 (170 : SKINLOW / STEP2 / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 168 : MFLR8_2 160 0 0
(-256,-192) to (-56,-64) : 12 : 0 : 0
    0 (170 : SKINLOW / STEP2 / - )
    72 : SFLR6_1 176 : F_SKY1 160 0 0
    0 (0 : - / - / - )
    72 : SFLR6_1 168 : MFLR8_2 160 0 0

things:374
(16,1104, 270) :1, 7
(-48,1072, 270) :2, 7
(80,1104, 270) :3, 7
(112,1040, 270) :4, 7
(-336,304, 90) :3002, 14
(-240,208, 0) :2001, 7
(-240,176, 0) :2011, 3
(-240,240, 0) :2011, 7
(-272,208, 0) :2047, 7
(-256,640, 45) :3004, 7
(-304,528, 45) :3004, 7
(976,464, 0) :2007, 7
(976,368, 0) :2008, 7
(944,432, 0) :2047, 7
(976,432, 0) :2007, 7
(976,400, 0) :2023, 7
(944,400, 0) :2007, 7
(944,368, 0) :2019, 7
(944,464, 0) :2012, 7
(1088,480, 180) :3006, 7
(1088,352, 180) :3002, 4
(1152,448, 180) :3002, 6
(1152,384, 180) :3002, 6
(1200,416, 0) :2011, 7
(1104,528, 0) :2014, 7
(1104,320, 0) :2014, 7
(-368,240, 0) :2015, 7
(-560,304, 0) :2015, 7
(624,624, 0) :2014, 7
(272,304, 45) :3005, 7
(336,848, 270) :3005, 7
(560,416, 225) :3002, 14
(-400,272, 90) :3002, 14
(-464,240, 90) :3002, 12
(-112,32, 270) :3002, 6
(-80,-544, 45) :3004, 7
(80,-608, 90) :9, 7
(208,-672, 90) :3006, 6
(400,-352, 135) :3004, 6
(272,-112, 180) :3004, 7
(208,-352, 90) :3006, 6
(-320,-784, 0) :2014, 7
(-144,-144, 0) :2014, 7
(384,-464, 0) :2014, 7
(320,-592, 0) :2014, 7
(128,-720, 0) :2014, 7
(-64,-304, 0) :2002, 7
(192,-528, 0) :2014, 7
(256,-528, 0) :2014, 7
(256,-464, 0) :2014, 7
(192,-464, 0) :2014, 7
(224,-496, 0) :2022, 7
(-96,-272, 0) :2011, 7
(-64,-272, 0) :2011, 7
(-32,-272, 0) :2011, 7
(-32,-304, 0) :2011, 7
(-32,-336, 0) :2011, 7
(-64,-336, 0) :2011, 7
(-96,-336, 0) :2011, 7
(-96,-304, 0) :2011, 7
(-512,-400, 270) :3001, 14
(-448,-336, 270) :3001, 14
(-512,-336, 270) :3001, 14
(-448,-848, 90) :3002, 7
(-448,-400, 0) :2007, 7
(-480,-272, 0) :2007, 7
(-736,-1280, 180) :9, 6
(-736,-1472, 180) :9, 6
(-608,-1376, 180) :3002, 7
(-560,-1328, 0) :2014, 7
(-560,-1424, 0) :2014, 7
(-560,-1376, 0) :2014, 7
(-656,-1232, 0) :2049, 7
(-656,-1488, 0) :2048, 7
(-1344,-1344, 0) :2011, 7
(-112,-1456, 180) :3001, 14
(16,-1520, 180) :3001, 14
(-240,-1584, 180) :3001, 14
(16,-1632, 180) :3001, 14
(240,-1936, 180) :3002, 14
(16,-2032, 180) :3002, 14
(272,-2496, 180) :3003, 14
(-112,-2048, 180) :3002, 15
(-320,-2432, 180) :3006, 14
(-384,-2496, 180) :3006, 14
(-320,-2560, 180) :3006, 14
(-256,-2496, 180) :3006, 14
(288,-2416, 0) :40, 7
(288,-1264, 315) :3005, 7
(480,-1472, 0) :2048, 7
(496,-1568, 0) :2015, 7
(496,-1600, 0) :2015, 7
(496,-1632, 0) :2015, 7
(464,-1568, 0) :2011, 7
(464,-1600, 0) :2047, 7
(464,-1632, 0) :2011, 7
(432,-1568, 0) :2008, 7
(432,-1600, 0) :2007, 7
(432,-1632, 0) :2008, 7
(400,-1568, 0) :2014, 7
(400,-1600, 0) :2018, 7
(400,-1632, 0) :2014, 7
(1056,-1504, 180) :3002, 6
(1120,-1504, 180) :3002, 6
(1120,-1568, 180) :3002, 7
(1040,-1648, 0) :2014, 7
(1136,-1648, 0) :2014, 7
(1072,-1648, 0) :2014, 7
(1104,-1648, 0) :2014, 7
(832,-960, 270) :3001, 7
(848,-896, 270) :3001, 6
(912,-832, 270) :3001, 6
(816,-752, 270) :3001, 6
(880,-688, 270) :3001, 7
(992,-112, 0) :39, 7
(992,-208, 0) :2007, 7
(992,-304, 0) :2007, 7
(992,-256, 0) :2011, 7
(912,112, 270) :3002, 6
(976,112, 270) :3002, 6
(944,176, 270) :3002, 7
(912,-208, 0) :2022, 7
(912,-304, 0) :2049, 7
(944,-240, 0) :2014, 7
(944,-272, 0) :2014, 7
(624,-592, 0) :2011, 7
(1104,-592, 0) :2011, 7
(944,-592, 0) :2011, 7
(784,-592, 0) :2011, 7
(1392,176, 270) :3006, 6
(1440,128, 270) :9, 7
(1360,128, 270) :3004, 7
(1360,224, 270) :9, 6
(1440,224, 270) :3004, 6
(1568,0, 0) :38, 7
(1568,-160, 180) :3006, 7
(1568,-224, 180) :3002, 6
(1216,-224, 180) :3004, 11
(1216,-32, 180) :3004, 11
(768,-96, 180) :3004, 11
(768,-288, 180) :3004, 11
(1472,-544, 90) :3004, 15
(1600,-544, 90) :3001, 14
(1728,-544, 90) :3006, 15
(1888,-288, 180) :3002, 14
(1920,-144, 180) :3005, 15
(1984,64, 180) :3003, 14
(1712,-336, 0) :2012, 7
(1712,-208, 0) :2012, 7
(1712,-144, 0) :2012, 7
(1712,-80, 0) :2012, 7
(1712,48, 0) :2012, 7
(1712,112, 0) :2012, 7
(1712,176, 0) :2012, 7
(1712,240, 0) :2012, 7
(1712,-16, 0) :2012, 7
(1712,-272, 0) :2012, 7
(1776,-144, 0) :2012, 7
(1840,-144, 0) :2012, 7
(1824,-288, 0) :2049, 7
(2032,64, 0) :8, 7
(1728,-608, 0) :2025, 7
(1936,112, 0) :2012, 7
(1936,16, 0) :2012, 7
(1632,448, 45) :3002, 15
(1760,448, 45) :3002, 14
(1696,448, 45) :3002, 14
(1824,448, 45) :3002, 14
(1600,112, 90) :3002, 14
(1568,96, 0) :2048, 7
(1632,96, 0) :2019, 7
(464,-1952, 180) :3001, 6
(512,-1968, 180) :3001, 7
(560,-2000, 180) :3001, 6
(608,-2016, 180) :3001, 6
(496,-1776, 270) :3004, 6
(592,-1808, 270) :3004, 7
(480,-1312, 0) :3005, 14
(656,-1680, 0) :2035, 7
(624,-1552, 0) :2035, 7
(656,-1424, 0) :2035, 7
(656,-1808, 0) :2007, 7
(656,-1200, 0) :2024, 7
(656,-1488, 0) :2015, 7
(464,-976, 180) :3002, 15
(576,-832, 0) :3005, 14
(592,-1040, 270) :3004, 7
(576,-768, 0) :3005, 14
(-112,-1168, 0) :3004, 7
(-48,-1104, 0) :3004, 6
(-48,-976, 0) :9, 7
(80,-976, 0) :3004, 6
(144,-1040, 0) :3004, 6
(80,-1168, 0) :9, 6
(208,-912, 0) :3004, 6
(208,-1168, 0) :3004, 6
(144,-864, 0) :9, 6
(-160,-976, 0) :3004, 7
(464,-944, 0) :2011, 7
(464,-848, 0) :2049, 7
(656,-1008, 0) :2014, 7
(656,-944, 0) :2014, 7
(656,-880, 0) :2014, 7
(656,-816, 0) :2014, 7
(656,-752, 0) :2014, 7
(624,-1072, 0) :2014, 7
(-32,-768, 0) :2006, 7
(-304,-992, 180) :3001, 6
(-272,-1056, 180) :3001, 6
(-272,-1120, 180) :3001, 7
(-304,-1184, 180) :3001, 6
(-352,-102 )
    8 : MFLR8_3 120 : MFLR8_2 128 0 0
(3712,-2880) to (3776,-2880) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -184 : MFLR8_3 328 : F_SKY1 160 0 19
(3776,-2624) to (4160,-2624) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    8 : MFLR8_3 120 : MFLR8_2 128 0 0
(4160,-2624) to (4160,-2560) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
(3840,-2560) to (3776,-2560) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    112 : GATE3 208 : GATE3 160 0 0
(3776,-2560) to (3776,-2496) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    112 : GATE3 208 : GATE3 160 0 0
(3776,-2496) to (3840,-2496) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    112 : GATE3 208 : GATE3 160 0 0
(3840,-2496) to (4160,-2496) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    104 : MFLR8_3 216 : MFLR8_2 128 0 0
(3840,-2560) to (3840,-2496) : 20 : 97 : 11
    0 (0 : SUPPORT3 / SUPPORT3 / - )
    104 : MFLR8_3 216 : MFLR8_2 128 0 0
    0 (0 : - / - / - )
    112 : GATE3 208 : GATE3 160 0 0
(4160,-2560) to (4160,-2496) : 4 : 88 : 22
    0 (0 : ROCK5 / ROCK5 / - )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
    0 (0 : - / - / - )
    104 : MFLR8_3 216 : MFLR8_2 128 0 0
(3776,-2624) to (3776,-2688) : 4 : 88 : 22
    0 (0 : ROCK5 / ROCK5 / - )
    8 : MFLR8_3 328 : F_SKY1 160 0 21
    0 (0 : - / - / - )
    8 : MFLR8_3 120 : MFLR8_2 128 0 0
(4160,-2816) to (4160,-2752) : 4 : 88 : 21
    0 (0 : ROCK5 / ROCK5 / - )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
    0 (0 : - / - / - )
    -88 : MFLR8_3 24 : MFLR8_2 128 0 0
(3776,-2880) to (3776,-2944) : 20 : 88 : 20
    0 (0 : ROCK5 / ROCK5 / - )
    -184 : MFLR8_3 328 : F_SKY1 160 0 19
    0 (0 : - / - / - )
    -184 : MFLR8_3 -72 : FLAT5_5 128 0 0
(3712,-2880) to (3712,-3008) : 4 : 0 : 0
    0 (0 : ROCK3 / ROCK3 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -184 : MFLR8_3 328 : F_SKY1 160 0 19
(3712,-3008) to (3776,-3008) : 4 : 0 : 0
    0 (0 : ROCK3 / ROCK3 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -184 : MFLR8_3 328 : F_SKY1 160 0 19
(3776,-3008) to (3776,-2960) : 4 : 0 : 0
    0 (0 : ROCK1 / ROCK3 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -184 : MFLR8_3 328 : F_SKY1 160 0 19
(4160,-2880) to (4160,-2944) : 4 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    -184 : MFLR8_3 -72 : FLAT5_5 128 0 0
    0 (0 : ROCK5 / ROCK5 / - )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
(3776,-2816) to (3776,-2752) : 4 : 88 : 20
    0 (0 : ROCK5 / ROCK5 / - )
    -88 : MFLR8_3 24 : MFLR8_2 128 0 0
    0 (0 : ROCK5 / ROCK5 / - )
    8 : MFLR8_3 328 : F_SKY1 160 0 21
(4160,-2624) to (4160,-2688) : 4 : 88 : 21
    0 (0 : ROCK5 / ROCK5 / - )
    8 : MFLR8_3 120 : MFLR8_2 128 0 0
    0 (0 : ROCK5 / ROCK5 / - )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
(3648,-2816) to (3648,-2832) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(3648,-2832) to (3712,-2832) : 1 : 62 : 19
    0 (0 : - / - / SW1ROCK )
    -272 : MFLR8_3 -152 : MFLR8_2 160 0 0
(3712,-2832) to (3712,-2880) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -272 : MFLR8_3 -152 : MFLR8_2 160 0 0
(3648,-2832) to (3648,-2880) : 4 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -272 : MFLR8_3 -152 : MFLR8_2 160 0 0
(3648,-2880) to (3712,-2880) : 4 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -272 : MFLR8_3 -152 : MFLR8_2 160 0 0
(4160,-2752) to (4224,-2752) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
(4224,-2944) to (4160,-2944) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
(4224,-2688) to (4160,-2688) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
(4160,-2496) to (4224,-2496) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
(3712,-2624) to (3776,-2624) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    8 : MFLR8_3 328 : F_SKY1 160 0 21
(3776,-2816) to (3712,-2816) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    8 : MFLR8_3 328 : F_SKY1 160 0 21
(3712,-2816) to (3712,-2624) : 28 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    8 : MFLR8_3 328 : F_SKY1 160 0 21
    0 (0 : - / - / - )
    40 : FLAT5_5 160 : FLAT5_5 160 0 0
(3696,-2816) to (3648,-2816) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(2064,-3936) to (2112,-3776) : 4 : 22 : 9
    0 (0 : - / ROCK2 / - )
    112 : MFLR8_3 328 : F_SKY1 255 0 11
    0 (0 : - / ROCK2 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(2176,-4000) to (2064,-3936) : 4 : 22 : 9
    0 (0 : - / ROCK2 / - )
    112 : MFLR8_3 328 : F_SKY1 255 0 11
    0 (0 : - / ROCK2 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(2416,-3936) to (2312,-4000) : 4 : 22 : 9
    0 (0 : - / ROCK2 / - )
    112 : MFLR8_3 328 : F_SKY1 255 0 11
    0 (0 : - / ROCK2 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(2368,-3776) to (2416,-3936) : 4 : 22 : 9
    0 (0 : - / ROCK2 / - )
    112 : MFLR8_3 328 : F_SKY1 255 0 11
    0 (0 : - / ROCK2 / - )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(4224,-2752) to (4224,-2784) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
(4224,-2784) to (4224,-2912) : 28 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
    0 (0 : - / - / - )
    -56 : FLAT5_5 8 : FLAT5_5 255 0 0
(4224,-2912) to (4224,-2944) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -88 : MFLR8_3 328 : F_SKY1 160 0 20
(4240,-2960) to (4240,-2912) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(4240,-2912) to (4240,-2784) : 28 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    -56 : FLAT5_5 8 : FLAT5_5 255 0 0
(4240,-2784) to (4240,-2656) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(4240,-2656) to (4240,-2528) : 28 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    -280 : LAVA4 328 : F_SKY1 160 16 0
    0 (0 : - / - / - )
    136 : FLAT5_5 200 : FLAT5_5 160 0 0
(4240,-2528) to (4240,-2480) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -280 : LAVA4 328 : F_SKY1 160 16 0
(4224,-2496) to (4224,-2528) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
(4224,-2528) to (4224,-2656) : 28 : 0 : 0
    0 (0 : ROCK5 / ROCK5 / - )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
    0 (0 : - / - / - )
    136 : FLAT5_5 200 : FLAT5_5 160 0 0
(4224,-2656) to (4224,-2688) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    104 : MFLR8_3 328 : F_SKY1 160 0 22
(4240,-2656) to (4224,-2656) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    136 : FLAT5_5 200 : FLAT5_5 160 0 0
(4224,-2528) to (4240,-2528) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    136 : FLAT5_5 200 : FLAT5_5 160 0 0
(4224,-2784) to (4240,-2784) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -56 : FLAT5_5 8 : FLAT5_5 255 0 0
(4240,-2912) to (4224,-2912) : 1 : 0 : 0
    0 (0 : - / - / ROCK5 )
    -56 : FLAT5_5 8 : FLAT5_5 255 0 0
(1216,-3856) to (1792,-3856) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(1792,-3856) to (2112,-3776) : 1 : 0 : 0
    0 (0 : - / - / ROCK1 )
    -72 : BLOOD3 328 : F_SKY1 255 5 0
(1792,-3768) to (1792,-3776) : 17 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 -64 : MFLR8_2 128 0 0
(1792,-3776) to (1792,-3840) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1792,-3840) to (1472,-3840) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1728,-3776) to (1728,-3768) : 17 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 -64 : MFLR8_2 128 0 0
(1408,-3840) to (1408,-3776) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 144 : TLITE6_5 255 8 0
(1408,-3776) to (1472,-3776) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 144 : TLITE6_5 255 8 0
(1472,-3776) to (1728,-3776) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
(1472,-3840) to (1408,-3840) : 1 : 0 : 0
    0 (0 : - / - / METAL2 )
    -64 : MFLR8_4 144 : TLITE6_5 255 8 0
(1472,-3840) to (1472,-3776) : 20 : 0 : 0
    0 (0 : METAL2 / METAL5 / - )
    -64 : MFLR8_4 136 : MFLR8_2 128 0 0
    0 (0 : METAL3 / - / - )
    -64 : MFLR8_4 144 : TLITE6_5 24, 0) :2014, 7
(-320,-1024, 0) :2014, 7
(-304,-1056, 0) :2014, 7
(-304,-1088, 0) :2014, 7
(-304,-1120, 0) :2014, 7
(-320,-1152, 0) :2014, 7
(-352,-1152, 0) :2014, 7
(-352,-1088, 0) :2014, 7
(-496,-1104, 0) :3003, 6
(-528,-1104, 0) :2013, 7
(-112,-1296, 0) :2035, 7
(16,-1328, 0) :2035, 7
(80,-1328, 0) :2035, 7
(144,-1296, 0) :2035, 7
(-48,-1360, 0) :2007, 7
(-112,-1360, 0) :2008, 7
(-48,-1296, 0) :2011, 7
(-176,-1296, 0) :2011, 7
(-368,-1360, 0) :2046, 7
(-368,-1328, 0) :2046, 7
(-368,-1296, 0) :2046, 7
(-368,-1264, 0) :2046, 7
(-336,-1264, 0) :2046, 7
(-320,-1280, 0) :3002, 7
(-320,-1344, 0) :3002, 6
(-336,-1360, 0) :2046, 7
(-304,-1360, 0) :2012, 7
(-304,-1328, 0) :2012, 7
(-304,-1296, 0) :17, 7
(-304,-1264, 0) :17, 3
(864,-432, 0) :2048, 7
(32,944, 0) :2018, 1
(16,992, 0) :2003, 7
(672,288, 135) :14, 7
(1248,672, 315) :14, 7
(-416,352, 0) :2035, 7
(-496,528, 0) :2035, 7
(-208,240, 0) :2049, 7
(-208,176, 0) :2048, 3
(-528,-944, 0) :2049, 7
(-432,-240, 0) :2047, 7
(-640,-1664, 225) :3001, 14
(208,320, 90) :3005, 12
(-128,-448, 45) :3005, 4
(-672,-1312, 180) :3002, 4
(-672,-1440, 180) :3002, 4
(-560,-1616, 225) :3005, 12
(-80,-1920, 180) :3002, 12
(176,-2064, 180) :3002, 12
(-112,-1072, 0) :3005, 4
(1152,-1216, 270) :58, 4
(800,-96, 180) :3004, 4
(800,-288, 180) :3004, 4
(1248,-224, 180) :3004, 4
(1248,-32, 180) :3004, 4
(800,-48, 180) :9, 4
(800,-240, 180) :9, 4
(1248,-176, 180) :9, 4
(1248,16, 180) :9, 4
(1824,288, 180) :3002, 12
(2080,752, 270) :3005, 4
(-304,592, 0) :2035, 7
(112,-272, 0) :2035, 7
(16,-496, 0) :2035, 7
(-512,-848, 90) :3002, 7
(128,-1984, 0) :2035, 7
(176,-2032, 0) :2035, 7
(176,-1936, 0) :2035, 7
(1056,-1568, 180) :3002, 4
(-320,-592, 270) :62, 7
(32,1056, 270) :62, 7
(224,32, 270) :34, 7
(608,576, 225) :62, 0
(448,736, 225) :42, 7
(608,160, 225) :42, 7
(736,672, 225) :42, 7
(-592,640, 225) :29, 7
(256,-192, 225) :35, 7
(400,-240, 225) :35, 7
(-192,-512, 225) :35, 7
(-224,-160, 225) :35, 7
(-960,-576, 225) :24, 7
(-976,-896, 225) :24, 7
(-1472,-768, 225) :42, 7
(-1504,-1120, 225) :26, 7
(-704,-1920, 225) :24, 7
(-320,-2112, 225) :24, 7
(0,-1920, 225) :15, 7
(-48,-2464, 225) :12, 7
(384,-736, 225) :27, 7
(-352,-928, 225) :29, 7
(-240,-928, 225) :29, 7
(80,944, 225) :63, 7
(1440,608, 225) :32, 7
(1952,608, 225) :32, 7
(2000,880, 225) :57, 7
(2160,880, 225) :57, 7
(2160,720, 225) :57, 7
(2000,720, 225) :57, 7
(464,-1232, 0) :2011, 7
(496,-1200, 0) :2007, 7
(32,848, 0) :2012, 7
(1440,176, 270) :2007, 6
(960,64, 270) :2007, 6
(1536,-192, 270) :2007, 6
(1408,-448, 270) :2007, 6
(1600,-448, 270) :2008, 6
(1088,-1600, 0) :2018, 7
(224,160, 270) :2049, 7
(1136,-1600, 0) :2008, 7
(1056,-1616, 0) :2008, 7
(-320,-640, 270) :11, 7
(-832,-512, 270) :11, 7
(896,-1984, 90) :11, 7
(-80,1024, 270) :11, 7
(-528,352, 90) :3002, 12
(-576,416, 90) :3002, 12
(368,448, 90) :3002, 12
(32,688, 90) :3002, 12
(160,1088, 90) :2010, 12
(-96,1088, 90) :2010, 12
(288,-864, 0) :2012, 7
(1312,576, 90) :58, 4
(1088,416, 180) :3002, 4
(1312,672, 180) :58, 4
(640,576, 270) :3002, 12
(256,-256, 135) :9, 4
(-64,-640, 90) :9, 4
(320,-320, 135) :3002, 4
(-448,-928, 90) :3002, 4
(-512,-928, 90) :3002, 4
(-512,-256, 270) :3002, 4
(-448,-256, 270) :3002, 4
(-736,-1376, 180) :9, 4
(-672,-1376, 180) :9, 4
(-672,-1504, 180) :9, 4
(-672,-1248, 180) :9, 4
(-320,-2496, 180) :3006, 4
(-192,-2560, 180) :3006, 4
(-192,-2432, 180) :3006, 4
(-192,-1472, 180) :3001, 4
(400,-832, 270) :58, 12
(128,-928, 315) :3006, 4
(288,-928, 270) :3006, 4
(288,-1184, 90) :3006, 4
(160,-1120, 45) :3006, 4
(32,-1120, 0) :3006, 4
(32,-992, 0) :3006, 4
(32,-1056, 0) :3006, 4
(-32,-832, 270) :3006, 12
(-288,-928, 270) :58, 12
(-496,-1168, 0) :3002, 12
(-496,-1040, 0) :3002, 12
(448,-1856, 0) :3002, 12
(1056,-1632, 180) :3002, 12
(1120,-1632, 180) :3002, 12
(896,-960, 270) :3001, 4
(832,-832, 270) :3001, 4
(896,-768, 270) :3001, 4
(1568,288, 0) :3002, 12
(1504,544, 315) :3005, 4
(-1616,-1584, 225) :42, 7
(-1872,-1232, 225) :42, 7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    688) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(696,688) to (728,688) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -56 : CEIL5_1 24 : MFLR8_2 144 0 10
(728,688) to (744,688) : 17 : 0 : 0
    0 (0 : - / - / DOORRED2 )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(744,688) to (752,688) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(752,688) to (784,688) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(792,688) to (1040,688) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(1040,688) to (1040,176) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(1040,176) to (784,176) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(784,176) to (784,600) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(784,608) to (752,624) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(752,624) to (744,624) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(744,624) to (728,624) : 17 : 0 : 0
    0 (0 : - / - / DOORRED2 )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(728,624) to (696,624) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -56 : CEIL5_1 24 : MFLR8_2 144 0 10
(696,624) to (664,624) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(664,616) to (664,512) : 1 : 48 : 0
    0 (8 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(664,512) to (384,512) : 1 : 48 : 0
    0 (112 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(384,512) to (384,448) : 17 : 48 : 0
    0 (136 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(384,448) to (768,448) : 1 : 48 : 0
    0 (200 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(768,448) to (768,256) : 1 : 48 : 0
    0 (228 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(768,248) to (768,232) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
(768,232) to (768,216) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(768,216) to (768,192) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
(768,192) to (768,-64) : 1 : 0 : 0
    0 (0 : - / - / SKSPINE1 )
    -64 : MFLR8_4 64 : CEIL3_6 160 0 0
(768,-64) to (576,-64) : 1 : 0 : 0
    0 (0 : - / - / SKSPINE1 )
    -64 : MFLR8_4 64 : CEIL3_6 160 0 0
(576,-64) to (576,192) : 198 : 0 : 0
    0 (0 : - / - / - )
    -64 : MFLR8_4 64 : CEIL3_6 160 0 0
    0 (0 : - / - / - )
    -64 : MFLR8_4 64 : CEIL3_6 160 0 0
(576,192) to (704,192) : 1 : 0 : 0
    0 (64 : - / - / SKSPINE1 )
    -64 : MFLR8_4 64 : CEIL3_6 160 0 0
(704,192) to (704,216) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
(704,216) to (704,232) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(704,232) to (704,248) : 1 : 0 : 0
    0 (0 : - / - / SUPPORT3 )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
(704,256) to (704,320) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(704,320) to (320,320) : 1 : 48 : 0
    0 (64 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(320,320) to (320,448) : 1 : 48 : 0
    0 (192 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(320,448) to (256,448) : 1 : 48 : 0
    0 (64 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(256,448) to (128,320) : 1 : 48 : 0
    0 (128 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(128,288) to (128,128) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(128,120) to (128,-128) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(128,-128) to (832,-128) : 1 : 48 : 0
    0 (248 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(832,-128) to (840,-128) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(840,-128) to (896,-112) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
(896,-112) to (896,-64) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
(888,-368) to (824,-352) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(808,-296) to (896,-256) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(896,-256) to (888,-208) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
(888,-208) to (840,-192) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
(840,-192) to (832,-192) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(832,-192) to (128,-192) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(128,-192) to (128,-256) : 9 : 48 : 0
    0 (192 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(128,-256) to (384,-256) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(384,-512) to (384,-576) : 1 : 0 : 0
    0 (0 : - / - / WOOD1 )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
(320,-504) to (320,-320) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(320,-320) to (64,-320) : 1 : 48 : 0
    0 (192 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(64,-320) to (64,120) : 1 : 48 : 0
    0 (192 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(64,128) to (64,224) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(64,224) to (32,224) : 1 : 0 : 0
    0 (0 : - / - / WOOD7 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(32,224) to (-32,160) : 1 : 0 : 0
    0 (0 : - / - / WOOD9 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(-32,160) to (-64,128) : 1 : 0 : 0
    0 (26 : - / - / WOOD8 )
    -40 : FLOOR7_1 72 : CEIL3_2 128 0 0
(-64,128) to (-96,96) : 1 : 0 : 0
    0 (7 : - / - / WOOD8 )
    -24 : FLOOR7_1 72 : CEIL3_2 144 0 0
(-96,96) to (-128,64) : 1 : 0 : 0
    0 (52 : - / - / WOOD8 )
    -8 : FLOOR7_1 72 : CEIL3_2 160 0 0
(64,384) to (128,456) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(128,456) to (128,1104) : 1 : 48 : 0
    0 (96 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(136,1120) to (56,1120) : 1 : 46 : 3
    0 (0 : - / - / SKINSYMB )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(56,1120) to (56,832) : 17 : 0 : 0
    0 (0 : - / - / WOOD5 )
    -64 : FLOOR3_3 -64 : FLAT10 144 0 2
(56,832) to (-64,832) : 17 : 0 : 0
    0 (0 : - / - / WOOD5 )
    -64 : FLOOR3_3 -64 : FLAT10 144 0 2
(-64,832) to (-96,832) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -80 : STEP1 0 : TLITE6_5 144 0 0
(-96,832) to (-128,832) : 1 : 0 : 0
    0 (32 : - / - / BRONZE1 )
    -96 : STEP1 0 : TLITE6_5 144 0 0
(-128,832) to (-160,832) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -112 : STEP1 0 : TLITE6_5 144 0 0
(-160,832) to (-256,832) : 1 : 0 : 0
    0 (96 : - / - / TEKWALL4 )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
(-256,832) to (-256,768) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-256,768) to (-192,768) : 1 : 0 : 0
    0 (64 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-320,512) to (-352,512) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-352,512) to (-352,384) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-608,384) to (-608,512) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-608,512) to (-640,512) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-640,512) to (-640,416) : 1 : 0 : 0
    0 (32 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-640,416) to (-768,416) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-896,672) to (-832,672) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-640,672) to (-640,576) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-640,576) to (-608,576MM *                                                                                                                                                                                                                                              ww                                                                               xwxwxwxwxwxwx                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       wwww                                                                                                                                0       0                                                              (       R                
  ' 
  '                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
   	  	 	 	  	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ingflat]] );
		msector->linecount = ShortSwap (lcount);
		
		for (j=0 ; j<lcount ; j++)
		{
			linenum = [wsector->lines elementAt:j];
			msector->lines[j] = ShortSwap(linecrunch[*linenum]);
		}
	}
		
	[self writeBuffer: "sectors"];

			
	return self;
}


/*
================
=
= saveDoomMap
=
= Writes out lumps for the doom executable
=
================
*/
#define	MAXMAPSIZE	100000

- saveDoomMap
{
	char		path[1025];

	[editworld_i deselectAll];
	
	if (![blockworld_i connectSectors])
		return self;		// don't continue if there were sector errors
	
//
// have the project save out the latest textures
//
//	[doomproject_i saveDoomLumps];
	
//
// make a wad file for everything in this map
//
	strcpy (path, [doomproject_i wadfile]);
	StripFilename (path);
	strcat (path,"/");
	ExtractFileName ( pathname, path+strlen (path));
	StripExtension (path);
	strcat (path,".wad");
	
	mapwad_i = [[Wadfile alloc] initNew: path];
	
//
// write a label at the start
//
	ExtractFileName (pathname, path);
	StripExtension (path);
	[mapwad_i addName: path data: path size: 0];
		
	worldsize = 0;
	buffer = buf_p = malloc (MAXMAPSIZE);

	[self writeFlatNames];		// builds lumptoflatnum[]
	[self writePoints];			// builds pointcrunch[]
	[self writeLines];			// builds linecrunch[]
	[self writeSectors];
	[self writeThings];

	[mapwad_i writeDirectory];
	[mapwad_i free];
	
	free (buffer);
	printf ("Save completed (%i bytes)\n", worldsize);
	
	[editworld_i updateWindows];
	
	return self;
}

@end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-608,576) to (-608,640) : 1 : 0 : 0
    0 (64 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-608,640) to (-480,640) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-448,640) to (-448,704) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-448,704) to (-768,704) : 1 : 0 : 0
    0 (64 : - / - / WOOD3 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-768,672) to (-640,672) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-768,704) to (-768,672) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-832,672) to (-832,704) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-832,704) to (-832,896) : 1 : 0 : 0
    0 (192 : - / - / WOOD3 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-832,896) to (-832,928) : 1 : 0 : 0
    0 (128 : - / - / WOOD3 )
    -112 : CEIL5_2 0 : CEIL3_4 144 0 0
(-832,928) to (-832,960) : 1 : 0 : 0
    0 (160 : - / - / WOOD3 )
    -96 : CEIL5_2 0 : CEIL3_4 144 0 0
(-832,960) to (-864,960) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -80 : CEIL5_2 0 : CEIL3_4 144 0 0
(-864,960) to (-896,960) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -64 : CEIL5_2 0 : CEIL3_4 144 0 0
(-896,960) to (-896,704) : 1 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
(-896,704) to (-1024,704) : 1 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
(-1152,832) to (-1152,1024) : 1 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
(-1152,1024) to (-1152,1056) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -168 : STEP2 -64 : TLITE6_5 144 0 0
(-1152,1056) to (-1152,1088) : 1 : 0 : 0
    0 (32 : - / - / BRONZE1 )
    -144 : STEP2 -64 : TLITE6_5 144 0 0
(-1152,1088) to (-1152,1120) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -120 : STEP2 8 : TLITE6_5 144 0 0
(-1152,1120) to (-1152,1152) : 1 : 0 : 0
    0 (32 : - / - / BRONZE1 )
    -96 : STEP2 8 : TLITE6_5 144 0 0
(-1152,1152) to (-1152,1232) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -80 : FLAT5_5 8 : TLITE6_5 144 0 0
(-1152,1232) to (-896,1232) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -80 : FLAT5_5 8 : TLITE6_5 144 0 0
(-896,1152) to (-1088,1152) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -80 : FLAT5_5 8 : TLITE6_5 144 0 0
(-1088,1152) to (-1088,1120) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -96 : STEP2 8 : TLITE6_5 144 0 0
(-1088,1120) to (-1088,1088) : 1 : 0 : 0
    0 (32 : - / - / BRONZE1 )
    -120 : STEP2 8 : TLITE6_5 144 0 0
(-1088,1088) to (-1088,1056) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -144 : STEP2 -64 : TLITE6_5 144 0 0
(-1088,1056) to (-1088,1024) : 1 : 0 : 0
    0 (32 : - / - / BRONZE1 )
    -168 : STEP2 -64 : TLITE6_5 144 0 0
(-1088,1024) to (-960,1024) : 1 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
(-896,1024) to (-864,1024) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -64 : CEIL5_2 0 : CEIL3_4 144 0 0
(-864,1024) to (-832,1024) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -80 : CEIL5_2 0 : CEIL3_4 144 0 0
(-832,1024) to (-800,1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -96 : CEIL5_2 0 : CEIL3_4 144 0 0
(-800,1024) to (-768,1024) : 1 : 0 : 0
    0 (32 : - / - / WOOD3 )
    -112 : CEIL5_2 0 : CEIL3_4 144 0 0
(-768,1024) to (-384,1024) : 1 : 0 : 0
    0 (64 : - / - / WOOD3 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-384,1024) to (-384,896) : 1 : 0 : 0
    0 (192 : - / - / WOOD3 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-384,896) to (-320,896) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-320,896) to (-320,960) : 1 : 0 : 0
    0 (64 : - / - / TEKWALL4 )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
(-448,1072) to (-480,1072) : 1 : 0 : 0
    0 (0 : - / - / SKINBORD )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-896,1072) to (-896,1152) : 1 : 0 : 0
    0 (0 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-352,576) to (-320,576) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-320,640) to (-320,768) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-320,832) to (-384,832) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-384,832) to (-384,704) : 1 : 0 : 0
    0 (128 : - / - / WOOD3 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-32,288) to (48,368) : 1 : 0 : 0
    0 (0 : - / - / WOOD9 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(-64,288) to (-32,288) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(-288,480) to (-64,480) : 1 : 0 : 0
    0 (32 : - / - / ROCKRED3 )
    -64 : FLOOR6_1 80 : FLOOR1_6 128 0 0
(-288,256) to (-288,480) : 1 : 0 : 0
    0 (64 : - / - / ROCKRED3 )
    -64 : FLOOR6_1 80 : FLOOR1_6 128 0 0
(-96,256) to (-288,256) : 1 : 0 : 0
    0 (0 : - / - / ROCKRED3 )
    -64 : FLOOR6_1 80 : FLOOR1_6 128 0 0
(-96,224) to (-96,256) : 1 : 0 : 0
    0 (7 : - / - / WOOD8 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(-128,192) to (-96,224) : 1 : 0 : 0
    0 (26 : - / - / WOOD8 )
    -40 : FLOOR7_1 72 : CEIL3_2 128 0 0
(-160,160) to (-128,192) : 1 : 0 : 0
    0 (45 : - / - / WOOD8 )
    -24 : FLOOR7_1 72 : CEIL3_2 144 0 0
(-192,128) to (-160,160) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -8 : FLOOR7_1 72 : CEIL3_2 160 0 0
(-832,128) to (-192,128) : 1 : 0 : 0
    0 (192 : - / - / SP_HOT1 )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(-832,136) to (-832,128) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    8 : FLOOR7_1 8 : FLAT10 144 0 19
(-640,192) to (-832,192) : 1 : 0 : 0
    0 (144 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-640,408) to (-640,192) : 1 : 0 : 0
    0 (184 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-1376,408) to (-640,408) : 1 : 0 : 0
    0 (216 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-832,192) to (-832,136) : 1 : 0 : 0
    0 (80 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-128,64) to (-128,-64) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(-128,-64) to (-32,-96) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    48 : FLAT5_3 160 : BLOOD3 144 9 12
(-32,-96) to (-32,-224) : 1 : 0 : 0
    0 (0 : - / - / FIRELAVA )
    48 : FLAT5_3 160 : BLOOD3 144 9 12
(-32,-224) to (-128,-256) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    48 : FLAT5_3 160 : BLOOD3 144 9 12
(-128,-256) to (-128,-384) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(192,-512) to (320,-512) : 1 : 0 : 0
    0 (0 : - / - / WOOD1 )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
(-192,-448) to (-1024,-448) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(-1024,-448) to (-1088,-384) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    32 : FLOOR0_2 160 : FLAT5_1 160 0 22
(-1088,-384) to (-1152,-320) : 4 : 1 : 0
    0 (90 : SP_HOT1 / - / - )
    32 : FLOOR0_2 160 : FLAT5_1 160 0 22
    0 (0 : - / - / - )
    32 : FLOOR0_2 32 : FLAT20 160 0 0
(-1152,-320) to (-1248,-224) : 1 : 0 : 0
    0 (180 : - / - / SP_HOT1 )
    32 : FLOOR0_2 160 : FLAT5_1 160 0 22
(-1248,-224) to (-1248,-96) : 4 : 0 : 0
    0 (0 : - / MARBFAC3 / - )
    32 : FLOOR0_2 160 : FLAT5_1 160 0 22
    0 (0 : MARBLE2 / - / - )
    160 : FLOOR7_1 232 : FLAT5_1 208 0 18
(-1248,-96) to (-1024,128) : 1 : 0 : 0
    0 (48 : - / - / SP_HOT1 )
    32 : FLOOR0_2 160 : FLAT5_1 160 0 22
(-1024,128) to (-960,128) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(-960,128) to (-960,136) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    8 : FLOOR7_1 8 : FLAT10 144 0 19
(-960,136) to (-960,288) : 1 : 0 : 0
    0 (0 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-960,288) to (-768,288) : 1 : 0 : 0
    0 (152 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-768,288) to (-768,320) : 1 : 0 : 0
    0 (88 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-768,320) to (-1152,320) : 1 : 0 : 0
    0 (120 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(-1152,320) to (-1152,256) : 1 : 0 : 0
    0 (248 : - / - / WOOD5 )
    8 : FLOOR7_1 13#import <appkit/appkit.h>

//============================================================================
#define	DOOMNAME		"DoomEd"
#define MAXPATCHES	100
// mappatch_t orients a patch inside a maptexturedef_t
typedef struct
{
	int		originx;		// block origin (allways UL), which has allready accounted
	int		originy;		// for the patch's internal origin
	char		patchname[9];
	int		stepdir;		// allow flipping of the texture DEBUG: make this a char?
	int		colormap;
} worldpatch_t;

typedef struct
{
	int		WADindex;	// which WAD it's from!  (JR 5/28/93 )
	char		name[9];
	BOOL	dirty;		// true if changed since last texture file load
	
	int	width;
	int	height;
	int	patchcount;
	worldpatch_t	patches[MAXPATCHES]; // [patchcount] drawn back to front into the
} worldtexture_t;

// a sectordef_t describes the features of a sector without listing the lines
typedef struct
{
	int	floorheight, ceilingheight;
	char 	floorflat[9], ceilingflat[9];
	int	lightlevel;
	int	special, tag;	
} sectordef_t;

//============================================================================

extern	id	doomproject_i;
extern	id	wadfile_i;
extern	id	log_i;

extern	int	numtextures;
extern	worldtexture_t		*textures;

extern	char	mapwads[1024];		// map WAD path
extern	char	bspprogram[1024];	// bsp program path
extern	char	bsphost[32];		// bsp host machine

//============================================================================

@interface DoomProject : Object
{
	BOOL	loaded;
	char	projectdirectory[1024];
	char	wadfile[1024];		// WADfile path
	int		nummaps;
	char	mapnames[100][9];
	
	int		texturessize;
	
	id		window_i;
	id		projectpath_i;
	id		wadpath_i;
	id		maps_i;
	id		thingPanel_i;
	id		findPanel_i;
	id		mapNameField_i;
	id		BSPprogram_i;
	id		BSPhost_i;
	id		mapwaddir_i;
	
	BOOL	projectdirty;
	BOOL	texturesdirty;
	BOOL	mapdirty;
	
	id		thermoTitle_i;
	id		thermoMsg_i;
	id		thermoView_i;
	id		thermoWindow_i;
	
	id		printPrefWindow_i;
}


- init;
- displayLog:sender;
- (BOOL)loaded;
- (char *)wadfile;
- (char const *)directory;

- menuTarget: sender;
- openProject: sender;
- newProject: sender;
- saveProject: sender;
- reloadProject: sender;
- openMap: sender;
- newMap: sender;
- removeMap: sender;
- printMap:sender;
- printAllMaps:sender;

- loadProject: (char const *)path;
- updateTextures;

- updatePanel;

- (int)textureNamed: (char const *)name;

- (BOOL)readTexture: (worldtexture_t *)tex from: (FILE *)file;
- writeTexture: (worldtexture_t *)tex to: (FILE *)file;

- (int)newTexture: (worldtexture_t *)tex;
- changeTexture: (int)num to: (worldtexture_t *)tex;

- saveDoomLumps;
- loadAndSaveAllMaps:sender;
- printStatistics:sender;
- printSingleMapStatistics:sender;
- updateThings;
- updateSectorSpecials;
- updateLineSpecials;
- saveFrame;
- changeWADfile:(char *)string;
- quit;
- setDirtyProject:(BOOL)truth;
- setDirtyMap:(BOOL)truth;
- (BOOL)projectDirty;
- (BOOL)mapDirty;
- checkDirtyProject;

- printPrefs:sender;
- togglePanel:sender;
- toggleMonsters:sender;
- toggleItems:sender;
- toggleWeapons:sender;

// Thermometer functions
- initThermo:(char *)title message:(char *)msg;
- updateThermo:(int)current max:(int)maximum;
- closeThermo;


//	Map Loading Functions
- beginOpenAllMaps;
- (BOOL)openNextMap;

@end

void IO_Error (char *error, ...);
void DE_DrawOutline(NXRect *r);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    #import <appkit/appkit.h>
#import "DoomProject.h"

#define	WORLDNAME	"EditWorld"

typedef struct
{
	int	selected;		// context that owns the point, 0 if unselected, or -1 if deleted
	int	refcount;		// when 0, remove it 

	NXPoint	pt;
} worldpoint_t;

typedef struct
{
	int		flags;	
	int		firstcollumn;
	char		toptexture[9];
	char		bottomtexture[9];
	char		midtexture[9];
	sectordef_t	ends;				// on the viewer's side
	int		sector;					// only used when saving doom map
} worldside_t;

typedef struct
{
	int	selected;			// 0 if unselected, -1 if deleted, 1 if selected, 2 if back side selected
	
	int	p1, p2;
	int	special, tag;
	int	flags;
	
	worldside_t	side[2];

	NXPoint	mid;
	NXPoint	norm;
} worldline_t;

#define	ML_BLOCKMOVE			1
#define	ML_TWOSIDED			4	// backside will not be present at all if not two sided

typedef struct
{
	int	selected;		// 0 if unselected, -1 if deleted, 1 if selected

	NXPoint	origin;
	int	angle;
	int	type;
	int	options;
	int	area;
} worldthing_t;

typedef struct
{
	sectordef_t	s;
	id	lines;			// storage object of line numbers
} worldsector_t;

typedef struct
{
	worldline_t	l;
	NXPoint		p1,p2;
} copyline_t;

//===========================================================================
// GLOBAL variables

extern	id			editworld_i;

extern	int			numpoints, numlines, numthings;

extern	worldpoint_t	*points;
extern	worldline_t	*lines;
extern	worldthing_t	*things;

//===========================================================================

@interface EditWorld : Object
{
	BOOL	loaded;
	
	int		pointssize, linessize, thingssize, texturessize;	// array size >= numvalid
	BOOL	dirty, dirtypoints;		// set whenever the map is changed FIXME
	NXRect	bounds;
	BOOL	boundsdirty;
	char		pathname[1024];
	NXRect	dirtyrect;	
	id		windowlist_i;			// all windows that display this world
	
	id		copyThings_i;			// cut/copy/paste info
	id		copyLines_i;
	NXPoint	copyCoord;
	int		copyLoaded;
	id		saveSound;				// Sound instance
}

- appWillTerminate: sender;
- loadWorldFile: (char const *)path;
- saveDoomEdMapBSP:sender;

- (BOOL)loaded;
- (BOOL)dirty;
- (BOOL)dirtyPoints;

- closeWorld;

//
// menu targets
//
- newWindow:sender;
- saveWorld:sender;
- print:sender;

//
// selection operations
//

- cut: sender;
- copy: sender;
- paste: sender;
- delete: sender;
- flipSelectedLines: sender;
- fusePoints: sender;
- seperatePoints: sender;

//
// dealing with map windows
//
- windowWillClose: sender;
- updateWindows;
- addToDirtyRect: (int)p1 : (int)p2;
- updateLineNormal:(int) num;
- redrawWindows;
- getMainWindow;	// returns window id

//
// get info
//
- getBounds: (NXRect *)theRect;

//
// change info
//
- selectPoint: (int)num;
- deselectPoint: (int)num;
- selectLine: (int)num;
- deselectLine: (int)num;
- selectThing: (int)num;
- deselectThing: (int)num;
- deselectAllPoints;
- deselectAllLines;
- deselectAllThings;
- deselectAll;


- (int)allocatePoint: (NXPoint *)pt;
- (int)newPoint: (NXPoint *)pt;
- (int)newLine: (worldline_t *)line from: (NXPoint *)p1 to:(NXPoint *)p2;
- (int)newThing: (worldthing_t *)thing;

- changePoint: (int)p to: (worldpoint_t *)data;
- changeLine: (int)p to: (worldline_t *)data;
- changeThing: (int)p to: (worldthing_t *)data;


//
// Cut/copy/paste stuff
//
- storeCopies;
- copyDeselect;
- (NXPoint)findCopyCenter;
- (int)findMin:(int)num0	:(int)num1;
- (int)findMax:(int)num0	:(int)num1;
@end


//
// EWLoadSave catagory
//
@interface EditWorld (EWLoadSave)

- (BOOL)readLine: (NXPoint *)p1 : (NXPoint *)p2 : (worldline_t *)line from: (FILE *)file;
- writeLine: (worldline_t *)line to: (FILE *)file;
- (BOOL)readThing: (worldthing_t *)thing from: (FILE *)file;
- writeThing: (worldthing_t *)thing to: (FILE *)file;

- loadV4File: (FILE *)file;
- saveFile: (FILE *)file;

@end

//
// EWDoomSave catagory
//
@interface EditWorld (EWDoomSave)

- saveDoomMap;

@end

int LineByPoint (NXPoint *pt, int *side);
                                                                                                                                                                                                                     6 : FLAT5_2 128 9 0
(-1216,184) to (-1152,184) : 1 : 63 : 11
    0 (0 : - / - / SW1WDMET )
    8 : FLOOR7_1 136 : FLAT5_2 128 0 0
(-1152,184) to (-1152,32) : 1 : 0 : 0
    0 (0 : - / - / WOODMET1 )
    8 : FLOOR7_1 136 : FLAT5_2 128 0 0
(-1152,32) to (-1312,32) : 1 : 0 : 0
    0 (32 : - / - / WOODMET1 )
    8 : FLOOR7_1 136 : FLAT5_2 128 0 0
(-1376,96) to (-1376,184) : 1 : 0 : 0
    0 (0 : - / - / WOODMET1 )
    8 : FLOOR7_1 136 : FLAT5_2 128 0 0
(192,-640) to (192,-512) : 1 : 0 : 0
    0 (0 : - / - / WOOD1 )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
(192,-672) to (192,-640) : 1 : 0 : 0
    0 (0 : - / - / bronze4 )
    -96 : STEP2 48 : CEIL1_1 144 0 0
(192,-704) to (192,-672) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -112 : STEP2 48 : CEIL1_1 144 0 0
(192,-736) to (192,-704) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -128 : STEP2 48 : CEIL1_1 144 0 0
(192,-768) to (192,-736) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -144 : STEP2 48 : CEIL1_1 144 0 0
(128,-768) to (192,-768) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(128,-832) to (128,-768) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(-88,-832) to (128,-832) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -32 : STEP1 96 : TLITE6_6 176 0 24
(-176,-832) to (-88,-832) : 1 : 0 : 0
    0 (168 : - / - / SKINSCAB )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-176,-1088) to (-176,-832) : 1 : 0 : 0
    0 (0 : - / - / SKINMET2 )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-768,-1088) to (-176,-1088) : 1 : 0 : 0
    0 (0 : - / - / SKINMET1 )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-768,-1408) to (-768,-1344) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-848,-1408) to (-768,-1408) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-848,-1240) to (-848,-1408) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1104,-1240) to (-848,-1240) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1104,-1576) to (-1104,-1240) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1024,-1728) to (-1064,-1600) : 1 : 0 : 0
    0 (114 : - / - / FIREBLU2 )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-960,-1728) to (-1024,-1728) : 1 : 0 : 0
    0 (50 : - / - / FIREBLU2 )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-896,-1600) to (-896,-1664) : 1 : 0 : 0
    0 (114 : - / - / FIREBLU2 )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1008,-1576) to (-896,-1600) : 1 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1024,-1368) to (-1024,-1528) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-936,-1368) to (-1024,-1368) : 1 : 0 : 0
    0 (80 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-936,-1544) to (-936,-1368) : 1 : 0 : 0
    0 (80 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-680,-1544) to (-936,-1544) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-680,-1344) to (-680,-1376) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-512,-1168) to (-512,-1344) : 1 : 0 : 0
    0 (80 : - / - / SKINMET1 )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-88,-1168) to (-512,-1168) : 1 : 0 : 0
    0 (0 : - / - / SKINMET1 )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-88,-1000) to (-88,-1168) : 1 : 0 : 0
    0 (0 : - / - / SKINMET2 )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-64,-1000) to (-88,-1000) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-64,-912) to (-64,-1000) : 1 : 0 : 0
    0 (168 : - / - / SKINSCAB )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(128,-896) to (-64,-912) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -32 : STEP1 96 : TLITE6_6 176 0 24
(128,-960) to (128,-896) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(192,-960) to (128,-960) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(192,-1024) to (192,-960) : 17 : 0 : 0
    0 (0 : - / - / SW1LION )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(128,-1024) to (192,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(128,-1344) to (128,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(104,-1344) to (128,-1344) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(88,-1344) to (104,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -144 : TLITE6_1 -144 : FLAT20 144 0 0
(64,-1344) to (88,-1344) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(-64,-1024) to (64,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-64,-1280) to (-64,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-448,-1280) to (-64,-1280) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-448,-1344) to (-448,-1280) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-384,-1344) to (-448,-1344) : 4 : 103 : 25
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-320,-1344) to (-384,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-256,-1344) to (-320,-1344) : 4 : 103 : 25
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-192,-1344) to (-256,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-128,-1344) to (-192,-1344) : 4 : 103 : 25
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-64,-1344) to (-128,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-64,-1408) to (-64,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(0,-1416) to (0,-1544) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(128,-1408) to (104,-1408) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(128,-1472) to (128,-1408) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(640,-1472) to (128,-1472) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(640,-1344) to (640,-1472) : 4 : 31 : 0
    0 (0 : BIGDOOR5 / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 0
(608,-1344) to (640,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(544,-1344) to (608,-1344) : 4 : 103 : 17
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(512,-1344) to (544,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(448,-1344) to (512,-1344) : 4 : 103 : 17
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(416,-1344) to (448,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(352,-1344) to (416,-1344) : 4 : 103 : 17
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(320,-1344) to (352,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(320,-1024) to (320,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(256,-1024) to (320,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(256,-960) to (256,-1024) : 17 : 0 : 0
    0 (0 : - / - / SW1LION )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(320,-960) to (256,-960) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(320,-896) to (320,-960) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 #import "DoomProject.h"
#import "TextureEdit.h"
#import "TexturePalette.h"
#import "SectorEditor.h"
#import "EditWorld.h"
#import "Wadfile.h"
#import "LinePanel.h"
#import "ThingPanel.h"
#import "R_mapdef.h"
#import	"TextureRemapper.h"
#import	"FlatRemapper.h"
#import	"TextLog.h"
#import "ThingPalette.h"
#import	"ThermoView.h"

id	doomproject_i;
id	wadfile_i;
id	log_i;

int	pp_panel;
int	pp_monsters;
int	pp_items;
int	pp_weapons;

int	numtextures;
worldtexture_t		*textures;

char	mapwads[1024];		// map WAD path
char	bspprogram[1024];	// bsp program path
char	bsphost[32];		// bsp host machine

#define BASELISTSIZE	32


@implementation DoomProject


/*
=============================================================================

						PROJECT METHODS

=============================================================================
*/


- init
{
	loaded = NO;
	doomproject_i = self;
	window_i = NULL;
	numtextures = 0;
	texturessize = BASELISTSIZE;
	textures = malloc (texturessize*sizeof(worldtexture_t));
	log_i = [[TextLog	alloc] initTitle:"DoomEd Error Log" ];
	projectdirty = mapdirty = FALSE;
	
	return self;
}

- checkDirtyProject
{
	int	val;
	
	if ([self	projectDirty] == FALSE)
		return self;
		
	val = NXRunAlertPanel("Important",
		"Do you wish to save your project before exiting?",
		"Yes", "No",NULL);
	if (val == NX_ALERTDEFAULT)
		[self	saveProject:self];
		
	return self;
}

//
//	App is going to terminate:
//
- quit
{
	[editworld_i	closeWorld];
	[self	checkDirtyProject];
	
	return self;
}

- setDirtyProject:(BOOL)truth
{
	projectdirty = truth;
	return self;
}

- setDirtyMap:(BOOL)truth
{
	mapdirty = truth;
	[[editworld_i	getMainWindow] setDocEdited:truth];
	return self;
}

- (BOOL)mapDirty
{
	return mapdirty;
}

- (BOOL)projectDirty
{
	return projectdirty;
}

- displayLog:sender
{
	[log_i	display:NULL];
	return self;
}

- (BOOL)loaded
{
	return loaded;
}

- (char *)wadfile
{
	return wadfile;
}


- (char const *)directory
{
	return projectdirectory;
}

/*
===============
=
= loadPV1File:
=
===============
*/

- (BOOL)loadPV1File: (FILE *)stream
{
	int		i;
	
	if (fscanf (stream, "\nwadfile: %s\n",wadfile) != 1)
		return NO;
	
	if (fscanf (stream, "mapwads: %s\n",mapwads) != 1)
		return NO;
	
	if (fscanf (stream, "BSPprogram: %s\n",bspprogram) != 1)
		return NO;
	
	if (fscanf (stream, "BSPhost: %s\n",bsphost) != 1)
		return NO;
	
	if (fscanf(stream,"nummaps: %d\n", &nummaps) != 1)
		return NO;
		
	for (i=0 ; i<nummaps ; i++)
		if (fscanf(stream,"%s\n", mapnames[i]) != 1)
			return NO;

	return YES;
}

/*
===============
=
= savePV1File:
=
===============
*/

- savePV1File: (FILE *)stream
{
	int	i;

	fprintf (stream, "\nwadfile: %s\n",wadfile);
	fprintf (stream, "mapwads: %s\n",mapwads);
	fprintf (stream, "BSPprogram: %s\n",bspprogram);
	fprintf (stream, "BSPhost: %s\n",bsphost);
	fprintf (stream,"nummaps: %d\n", nummaps);
		
	for (i=0 ; i<nummaps ; i++)
		fprintf (stream,"%s\n", mapnames[i]);

	return self;
}


/*
===============
=
= menuTarget
=
===============
*/

- menuTarget: sender
{
	if (!loaded)
	{
		NXRunAlertPanel ("Error","No project loaded",NULL,NULL,NULL);
		return nil;
	}
	
	if (!window_i)
	{
		[NXApp 
			loadNibSection:	"Project.nib"
			owner:			self
			withNames:		NO
		];
		[window_i	setFrameUsingName:DOOMNAME];
		
	}

	[self updatePanel];
	[window_i orderFront:self];

	return self;
}

- saveFrame
{
	if (window_i)
		[window_i	saveFrameUsingName:DOOMNAME];
	return self;
}


/*
===============
=
= openProject
=
===============
*/

- openProject: sender
{
	id			openpanel;
	static char	*suffixlist[] = {"dpr", 0};
	char		const	*filename;

	[self	checkDirtyProject];
	
	openpanel = [OpenPanel new];
	if (![openpanel runModalForTypes:suffixlist] )
		return NULL;

	printf("Purging existing texture patches.\n");
	[ textureEdit_i	dumpAllPatches ];	
	
	printf("Purging existing flats.\n");
	[ sectorEdit_i	dumpAllFlats ];
	
	filename = [openpanel filename];
	
	if (![self loadProject: filename])
	{
		NXRunAlertPanel("Uh oh!","Couldn't load your project!",
			"OK",NULL,NULL);

		[ wadfile_i	initFromFile: wadfile ];
		[ textureEdit_i		initPatches ];
		[ sectorEdit_i		loadFlats ];
		[ thingPalette_i	initIcons];
		[ wadfile_i	close ];
		
		return nil;
	}

	return self;
}

/*
===============
=
= newProject
=
===============
*/

- newProject: sender
{
	FILE		*stream;
	id			panel;
	char		const *filename;
	static char *fileTypes[] = { "wad",NULL};
	char		projpath[1024];
	char		texturepath[1024];


	[self	checkDirtyProject];
	//
	// get directory for project & files
	//	
	panel = [OpenPanel new];
	[panel setTitle: "Project directory"];
	[panel chooseDirectories:YES];
	if (! [panel runModal] )
		return self;
		
	filename = [panel filename];
	if (!filename || !*filename)
	{
		NXRunAlertPanel("Nope.","I need a directory for projects to"
			" create one.","OK",NULL,NULL);
		return self;
	}
		
	strcpy (projectdirectory, filename);
	
	//
	// get wadfile
	//
	[panel setTitle: "Wadfile"];
	[panel chooseDirectories:NO];
	if (! [panel runModalForTypes: fileTypes] )
		return self;
		
	filename = [panel filename];
	if (!filename || !*filename)
	{
		NXRunAlertPanel("Nope.","I need a WADfile for this project.",
			"OK",NULL,NULL);
		return self;
	}
		
	strcpy (wadfile, filename);
		
	//
	// create default data: project file
	//
	nummaps = 0;
	numtextures = 0;
	
	strcpy (projpath, projectdirectory);
	strcat (projpath, "/project.dpr");

	printf("Creating a new project: %s\n", projectdirectory );
	stream = fopen (projpath,"w+");
	if (!stream)
	{
		NXRunAlertPanel ("Error","Couldn't create %s.",
			NULL,NULL,NULL, projpath);
		return self;	
	}
	fprintf (stream, "Doom Project version 1\n\n");
	fprintf (stream, "wadfile: %s\n\n",wadfile);
	fprintf (stream,"nummaps: 0\n");
	fclose (stream);

	strcpy(texturepath,projectdirectory);
	strcat(texturepath,"/texture1.dsp");
	stream = fopen (texturepath,"w+");
	if (!stream)
	{
		NXRunAlertPanel ("Error","Couldn't create %s.",
			NULL,NULL,NULL,texturepath);
		return self;	
	}
	fprintf (stream, "numtextures: 0\n");
	fclose (stream);
	
	//
	// load in and init all the WAD patches
	//
	loaded = YES;
	
	if ( !wadfile_i )
		wadfile_i = [ Wadfile alloc ];

	[editworld_i	closeWorld];

	[sectorEdit_i	emptySpecialList];
	[linepanel_i	emptySpecialList];
	[thingpanel_i	emptyThingList];

	printf("Initializing WADfile %s\n",wadfile);
	[ wadfile_i	initFromFile: wadfile ];
	
	printf("Purging existing texture patches.\n");
	[ textureEdit_i	dumpAllPatches ];	
	[ textureEdit_i	initPatches ];
	
	numtextures = 0;
	[texturePalette_i	selectTexture:-1];
	[texturePalette_i	initTextures];
	[self updateTextures];		// TexturePalette will be updated in here
	[texturePalette_i	setupPalette];
	
	printf("Purging existing flats.\n");
	[ sectorEdit_i	dumpAllFlats ];
	[ sectorEdit_i	loadFlats ];
	[sectorEdit_i	setCurrentFlat:0];
	[sectorEdit_i	setupEditor];
	
	printf("Purging existing icons.\n");
	[ thingPalette_i	dumpAllIcons ];
	[ thingPalette_i	initIcons ];
	
	[ self		updateThings ];
	[ self		updateSectorSpecials ];
	[ self		updateLineSpecials ];
	[ self		updateTextures ];
	
	[ wadfile_i	close ];
	
	[self	setDirtyMap:FALSE];
	[self	setDirtyProject:FALSE];
	[self menuTarget: self];		// bring the panel to front

	return self;
}


/*
===============
=
= saveProject
=
===============
*/

- saveProject: sender
{
	FILE		*stream;
	char		filename[1024];

	if (!loaded)
		return nil;
		
	strcpy (filename, projectdirectory);
	strcat (filename ,"/project.dpr");
	stream = fopen (filename,"w");
	fprintf (stream, "Doom Project version 1\n");
	[self savePV1File: stream];
	fclose (stream);
	projectdirty = NO;

	[self updateTextures];
	[self	updateThings];
	[self	updateSectorSpecials];
	[self	updateLineSpecials];
	[texturePalette_i	finishInit];
	[self	saveDoomLumps];
	[self	setDirtyProject:FALSE];
	
	return self;
}


/*
===============
=
= reloadProject
=
===============
*/

- reloadProject: sender
{
	if (!loaded)
		return nil;
		
	[self updateTextures];
	[self	updateThings];
	[self	updateSectorSpecials];
	[self	updateLineSpecials];
	[self	setDirtyProject:FALSE];
	
	return self;
}


/*
=============================================================================

						PRIV0 0
(384,-896) to (320,-896) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -144 : TLITE6_1 -144 : TLITE6_1 144 0 16
(384,-1152) to (384,-896) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(832,-1152) to (384,-1152) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(832,-1344) to (832,-1152) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-1344) to (832,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-1472) to (960,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-1472) to (960,-1472) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-1280) to (1088,-1472) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(960,-1280) to (1088,-1280) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(896,-1152) to (896,-1280) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-1152) to (896,-1152) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-1216) to (960,-1152) : 1 : 61 : 16
    0 (0 : - / - / SW2WOOD )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-1216) to (960,-1216) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-1024) to (1088,-1216) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(960,-1024) to (1088,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(960,-1088) to (960,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(448,-1088) to (960,-1088) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(448,-768) to (448,-1088) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(512,-768) to (448,-768) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(512,-832) to (512,-768) : 17 : 0 : 0
    0 (0 : - / - / SW2SATYR )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(704,-1024) to (512,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(704,-832) to (704,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(576,-832) to (704,-832) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(576,-768) to (576,-832) : 17 : 0 : 0
    0 (0 : - / - / SW2SATYR )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(768,-768) to (576,-768) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(768,-832) to (768,-768) : 17 : 0 : 0
    0 (0 : - / - / SW2SATYR )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(896,-1024) to (768,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(896,-832) to (896,-1024) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(832,-832) to (896,-832) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(832,-768) to (832,-832) : 17 : 0 : 0
    0 (0 : - / - / SW2SATYR )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-768) to (832,-768) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-960) to (960,-768) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-960) to (960,-960) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-768) to (1088,-960) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1024,-768) to (1088,-768) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1024,-704) to (1024,-768) : 17 : 0 : 0
    0 (0 : - / - / SW2SATYR )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(1088,-704) to (1024,-704) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1088,-512) to (1088,-704) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(960,-512) to (1088,-512) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(960,-704) to (960,-512) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(384,-704) to (960,-704) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(384,-832) to (384,-704) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(320,-832) to (384,-832) : 1 : 0 : 0
    0 (0 : - / - / metal )
    -144 : TLITE6_1 -144 : TLITE6_1 144 0 16
(320,-768) to (320,-832) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(256,-768) to (320,-768) : 1 : 0 : 0
    0 (0 : - / - / SW1GARG )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
(256,-736) to (256,-768) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -144 : STEP2 48 : CEIL1_1 144 0 0
(256,-704) to (256,-736) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -128 : STEP2 48 : CEIL1_1 144 0 0
(256,-672) to (256,-704) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -112 : STEP2 48 : CEIL1_1 144 0 0
(256,-640) to (256,-672) : 1 : 0 : 0
    0 (0 : - / - / bronze4 )
    -96 : STEP2 48 : CEIL1_1 144 0 0
(384,-640) to (256,-640) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
(480,-640) to (384,-640) : 1 : 0 : 0
    0 (0 : - / - / WOOD1 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(488,-640) to (480,-640) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(480,-576) to (488,-576) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(384,-576) to (480,-576) : 1 : 0 : 0
    0 (0 : - / - / WOOD1 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(-1216,-384) to (-1152,-320) : 17 : 0 : 0
    0 (0 : - / - / metal )
    32 : FLOOR0_2 32 : FLAT20 160 0 0
(-1280,-384) to (-1216,-384) : 1 : 0 : 0
    0 (0 : - / - / WOOD7 )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
(-1280,-640) to (-1280,-384) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
(-1280,-672) to (-1280,-640) : 1 : 0 : 0
    0 (0 : - / - / WOOD9 )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
(-1280,-680) to (-1280,-672) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    16 : FLAT5_2 16 : FLAT10 160 0 14
(-1280,-704) to (-1280,-680) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
(-320,-672) to (-320,-800) : 1 : 0 : 0
    0 (0 : - / - / SKULWAL3 )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
(-1216,-704) to (-1088,-704) : 1 : 0 : 0
    0 (0 : - / - / SKULWAL3 )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
(-1216,-680) to (-1216,-704) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
(-1216,-672) to (-1216,-680) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    16 : FLAT5_2 16 : FLAT10 160 0 14
(-1216,-640) to (-1216,-672) : 1 : 0 : 0
    0 (0 : - / - / WOOD9 )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
(-1152,-640) to (-1216,-640) : 1 : 0 : 0
    0 (0 : - / - / WOOD7 )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
(-1152,-448) to (-1152,-640) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
(-1088,-384) to (-1152,-448) : 17 : 0 : 0
    0 (0 : - / - / metal )
    32 : FLOOR0_2 32 : FLAT20 160 0 0
(-512,2016) to (-512,2080) : 17 : 0 : 0
    0 (0 : - / - / SW2GARG )
    0 : FLAT1_1 128 : TLITE6_6 128 0 0
(-512,2080) to (-576,2080) : 1 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    8 : TLITE6_4 80 : TLITE6_4 112 0 0
(-576,2080) to (-576,2144) : 1 : 0 : 0
    0 (0 : - / - / DOOR3 )
    8 : TLITE6_4 80 : TLITE6_4 112 0 0
(-576,2144) to (-512,2144) : 1 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    8 : TLITE6_4 80 : TLITE6_4 112 0 0
(-512,2080) to (-512,2144) : 4 : 0 : 0
    0 (0 : METAL / STEP3 / - )
    0 : FLAT1_1 128 : TLITE6_6 128 0 0
    0 (0 : - / - / - )
    8 : TLITE6_4 80 : TLITE6_4 112 0 0
(-224,1408) to (-136,1408) : 1 : 0 : 0
    0 (80 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-896,1232) to (-896,1408) : 1 : 0 : 0
    0 (80 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-64,896) to (-72,1120) : 17 : 0 : 0
    0 (0 : - / - / WOOD5 )
    -64 : FLOOR3_3 -64 : FLAT10 144ATE METHODS
						
=============================================================================
*/

/*
===============
=
= updatePanel
=
===============
*/

- updatePanel
{
	[projectpath_i setStringValue: projectdirectory];
	[wadpath_i setStringValue: wadfile];
	[BSPprogram_i	setStringValue: bspprogram];
	[BSPhost_i		setStringValue: bsphost];
	[mapwaddir_i	setStringValue: mapwads];
	[maps_i reloadColumn: 0];	
	return self;
}

- changeWADfile:(char *)string
{
	strcpy(wadfile,string);
	[self	updatePanel];
	NXRunAlertPanel("Note!", "The WADfile will be changed when you\n"
		"restart DoomEd.  Make sure you SAVE YOUR PROJECT!",
		"OK",NULL,NULL);
	return self;
}

/*
===============
=
= loadProject:
=
= Called by openProject:
=
===============
*/

- loadProject: (char const *)path
{
	FILE	*stream;
	char	projpath[1024];
	int		version, ret;
	int		oldnumtextures;
	
	strcpy (projectdirectory, path);
	StripFilename (projectdirectory);
	
	strcpy (projpath, projectdirectory);
	strcat (projpath, "/project.dpr");
	
	stream = fopen (projpath,"r");
	if (!stream)
	{
		NXRunAlertPanel ("Error","Couldn't open %s",NULL,NULL,NULL, projpath);
		return nil;	
	}
	version = -1;
	fscanf (stream, "Doom Project version %d\n", &version);
	if (version == 1)
		ret = [self loadPV1File: stream];
	else
	{
		fclose (stream);
		NXRunAlertPanel ("Error","Unknown file version for project %s",
			NULL,NULL,NULL, projpath);
		return nil;	
	}

	if (!ret)
	{
		fclose (stream);
		NXRunAlertPanel ("Error","Couldn't parse project file %s",NULL,NULL,NULL, projpath);
		return nil;	
	}
	
	fclose (stream);
	
	projectdirty = NO;
	texturesdirty = NO;
	loaded = YES;
	oldnumtextures = numtextures;
	wadfile_i = [[Wadfile alloc] initFromFile: wadfile];
	if (!wadfile_i)
	{
		NXRunAlertPanel ("Error","Couldn't open wadfile %s",
			NULL,NULL,NULL, wadfile);
		return nil;	
	}
	
	[editworld_i	closeWorld];
	[log_i	msg:"DoomEd initializing...\n\n" ];
	
	[sectorEdit_i	emptySpecialList];
	[linepanel_i	emptySpecialList];
	[thingpanel_i	emptyThingList];
	
	[self	updateThings];
	[self	updateSectorSpecials];
	[self	updateLineSpecials];
	
	[self menuTarget: self];		// bring the panel to front
	
	[textureEdit_i	initPatches];
	numtextures = 0;
	[texturePalette_i	selectTexture:-1];
	[self updateTextures];		// TexturePalette will be updated in here
	[texturePalette_i	setupPalette];
	
	[sectorEdit_i	loadFlats];
	[sectorEdit_i	setCurrentFlat:0];
	[sectorEdit_i	setupEditor];
	
	[thingPalette_i	initIcons];
		
	[wadfile_i close];
	
	[self	setDirtyMap:FALSE];
	[self	setDirtyProject:FALSE];
	return self;
}


/*
=============================================================================

						MAP METHODS
						
=============================================================================
*/


/*
===============
=
= removeMap:
=
===============
*/

- removeMap:sender
{

	return self;
}

//============================================================
//
//	Sort the maps internally
//
//============================================================
- sortMaps
{
	int		i;
	int		j;
	int		flag;
	char	name[16];
	
	flag = 1;
	while(flag)
	{
		flag = 0;
		for(i=0;i<nummaps;i++)
			for(j=i+1;j<nummaps;j++)
				if (strcmp(mapnames[j],mapnames[i])<0)
				{
					strcpy(name,mapnames[i]);
					strcpy(mapnames[i],mapnames[j]);
					strcpy(mapnames[j],name);
					flag = 1;
					break;
				}
	}
	return self;
}

/*
===============
=
= browser:fillMatrix:inColumn:
=
===============
*/

- (int)browser:sender  fillMatrix:matrix  inColumn:(int)column
{
	int	i;
	id	cell;

	if (column != 0)
		return 0;

	[self	sortMaps];
		
	for (i=0 ; i<nummaps ; i++)
	{
		[matrix addRow];
		cell = [matrix cellAt: i : 0];
		[cell setStringValue: mapnames[i]];
		[cell setLeaf: YES];
		[cell setLoaded: YES];
		[cell setEnabled: YES];
	}
	
	return nummaps;
}

/*
=====================
=
= newMap
=
= A world name was typed in the new field
=
=====================
*/

- newMap: sender
{
	FILE		*stream;
	char		pathname[1024];
	char		const	*title;
	int		len, i;

	//
	// get filename for map
	//	
	title = [mapNameField_i stringValue];
	len = strlen (title);
	if (len < 1 || len > 8)
	{
		NXRunAlertPanel ("Error","Map names must be 1 to 8 characters",
			NULL, NULL, NULL);
		return nil;
	}
	
	for (i=0 ; i<nummaps ; i++)
		if (!strcmp(title, mapnames[i]))
		{
			NXRunAlertPanel ("Error","Map name in use",NULL, NULL, NULL);
			return nil;
		}
		
	//
	// write an empty file
	//
	strcpy (pathname, projectdirectory);
	strcat (pathname, "/");
	strcat (pathname,title);
	strcat (pathname,".dwd");
	stream = fopen (pathname,"w");
	if (!stream)
	{
		NXRunAlertPanel ("Error","Could not open %s",
			NULL, NULL, NULL, pathname);
		return nil;	
	}
	fprintf (stream, "WorldServer version 0\n");
	fclose (stream);

//
// add the map and update the browser
//
	strcpy (mapnames[nummaps], title);
	nummaps++;
	
	[self updatePanel];
	[self saveProject: self];
	
	return self;
}

/*
=====================
=
= openMap:
=
= A world name was clicked on in the browser
=
=====================
*/

- openMap:sender
{
	id			cell;
	const char	*title;
	char			fullpath[1024];
	char			string[80];

	if ([editworld_i loaded])
		[editworld_i closeWorld];
	
	cell = [sender selectedCell];
	title = [cell stringValue];
	
	strcpy (fullpath, projectdirectory);
	strcat (fullpath,"/");
	strcat (fullpath,title);
	strcat (fullpath,".dwd");
	
	sprintf( string, "\nLoading map %s\n",title );
	[ log_i	msg:string ];
	[editworld_i loadWorldFile: fullpath];
	
	return self;
}

//===================================================================
//
//	Load Map Functions
//
//===================================================================
int	oldSelRow,curMap;
id	openMatrix;

//	Init to start opening all maps
- beginOpenAllMaps
{
	openMatrix = [maps_i	matrixInColumn:0];
	oldSelRow = [openMatrix	selectedRow];
	curMap = 0;
	return self;
}

//	Open next map, finish if needed
- (BOOL)openNextMap
{
	if (curMap < nummaps)
	{
		[openMatrix	selectCellAt:curMap :0];
		[self	openMap:openMatrix];
		curMap++;
		return YES;
	}
	else
	{
		if (oldSelRow >= 0)
		{
			[openMatrix	selectCellAt:oldSelRow :0];
			[self	openMap:openMatrix];
		}
		return NO;
	}
}

//===================================================================
//
//	Print all the maps out!
//
//===================================================================
- printAllMaps:sender
{
	id		openMatrix;
	int		i;
	int		selRow;

	[editworld_i	closeWorld];

	openMatrix = [maps_i	matrixInColumn:0];
	selRow = [openMatrix	selectedRow];
	
	for (i = 0;i < nummaps; i++)
	{
		[openMatrix	selectCellAt:i :0];
		[self	openMap:openMatrix];
		[self	printMap:NULL];
	}
	
	if (selRow >=0)
	{
		[openMatrix	selectCellAt:selRow :0];
		[self	openMap:openMatrix];
	}
	
	return self;
}

//===================================================================
//
//	Map printing preferences
//
//===================================================================
- printPrefs:sender
{
	[printPrefWindow_i	makeKeyAndOrderFront:NULL];
	return self;
}

- togglePanel:sender
{
	pp_panel = 1-pp_panel;
	return self;
}
- toggleItems:sender
{
	pp_items = 1-pp_items;
	return self;
}
- toggleMonsters:sender
{
	pp_monsters = 1-pp_monsters;
	return self;
}
- toggleWeapons:sender
{
	pp_weapons = 1-pp_weapons;
	return self;
}

//===================================================================
//
//	Print the map out!
//
//===================================================================
- printMap:sender
{
	char	string[1024];
	id		m;
	id		cell;
	id		panel;
	char	prpanel[10];
	char	monsters[10];
	char	items[10];
	char	weapons[10];
	
	m = [maps_i	matrixInColumn:0];
	cell = [m selectedCell];
	if (!cell)
	{
		NXBeep();
		return self;
	}
	
	memset(prpanel,0,10);
	memset(monsters,0,10);
	memset(items,0,10);
	memset(weapons,0,10);
	
	if (pp_panel)
		strcpy(prpanel,"-panel");
	if (pp_weapons)
		strcpy(weapons,"-weapons");
	if (pp_items)
		strcpy(items,"-powerups");
	if (pp_monsters)
		strcpy(monsters,"-monsters");
		
	sprintf(string,"doomprint %s %s %s %s %s/%s.dwd",
		prpanel,
		weapons,
		items,
		monsters,
		projectdirectory,
		[cell stringValue]);
		
	panel = NXGetAlertPanel("Wait...","Printing %s.",
		NULL,NULL,NULL,[ 0 2
(-136,1152) to (-296,1104) : 1 : 0 : 0
    0 (0 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-96,896) to (-64,896) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -80 : STEP1 0 : TLITE6_5 144 0 0
(-128,896) to (-96,896) : 1 : 0 : 0
    0 (32 : - / - / BRONZE1 )
    -96 : STEP1 0 : TLITE6_5 144 0 0
(-160,896) to (-128,896) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -112 : STEP1 0 : TLITE6_5 144 0 0
(-160,960) to (-160,896) : 1 : 0 : 0
    0 (96 : - / - / TEKWALL4 )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
(-256,960) to (-160,960) : 1 : 0 : 0
    0 (0 : - / - / TEKWALL4 )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
(24,1376) to (64,1376) : 1 : 0 : 0
    0 (0 : - / - / BRONZE1 )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(64,1440) to (64,1472) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -16 : STEP2 64 : TLITE6_6 144 0 0
(64,1408) to (64,1440) : 1 : 0 : 0
    0 (32 : - / - / BRONZE4 )
    -32 : STEP2 64 : TLITE6_6 144 0 0
(64,1376) to (64,1408) : 1 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -48 : STEP2 64 : TLITE6_6 144 0 0
(64,1472) to (64,1536) : 1 : 0 : 0
    0 (0 : - / - / WOOD1 )
    0 : FLAT1_1 128 : CEIL3_4 128 0 0
(-1376,192) to (-1376,408) : 1 : 0 : 0
    0 (0 : - / - / WOOD5 )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
(64,1472) to (128,1472) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -16 : STEP2 64 : TLITE6_6 144 0 0
    0 (0 : metal / - / - )
    0 : FLAT1_1 128 : CEIL3_4 128 0 0
(64,1440) to (128,1440) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -32 : STEP2 64 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -16 : STEP2 64 : TLITE6_6 144 0 0
(64,1408) to (128,1408) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -48 : STEP2 64 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -32 : STEP2 64 : TLITE6_6 144 0 0
(64,1376) to (128,1376) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / - / - )
    -48 : STEP2 64 : TLITE6_6 144 0 0
(192,1600) to (192,1664) : 12 : 0 : 0
    0 (0 : - / STEP5 / - )
    -16 : STEP1 88 : TLITE6_6 144 0 0
    0 (70 : WOOD1 / - / - )
    0 : FLAT1_1 128 : CEIL3_4 128 0 0
(224,1600) to (224,1664) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -32 : STEP1 88 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -16 : STEP1 88 : TLITE6_6 144 0 0
(256,1600) to (256,1664) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -48 : STEP1 88 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -32 : STEP1 88 : TLITE6_6 144 0 0
(288,1600) to (288,1664) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -64 : STEP1 88 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -48 : STEP1 88 : TLITE6_6 144 0 0
(320,1600) to (320,1664) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -80 : FLAT5_5 88 : TLITE6_6 160 0 0
    0 (0 : metal / - / - )
    -64 : STEP1 88 : TLITE6_6 144 0 0
(-1152,1152) to (-1088,1152) : 4 : 0 : 0
    0 (0 : - / BROWN144 / - )
    -96 : STEP2 8 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -80 : FLAT5_5 8 : TLITE6_5 144 0 0
(-1152,1120) to (-1088,1120) : 4 : 0 : 0
    0 (0 : - / BROWN144 / - )
    -120 : STEP2 8 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -96 : STEP2 8 : TLITE6_5 144 0 0
(-1152,1088) to (-1088,1088) : 4 : 0 : 0
    0 (0 : - / BROWN144 / - )
    -144 : STEP2 -64 : TLITE6_5 144 0 0
    0 (0 : BRONZE1 / - / - )
    -120 : STEP2 8 : TLITE6_5 144 0 0
(-1152,1056) to (-1088,1056) : 4 : 0 : 0
    0 (0 : - / BROWN144 / - )
    -168 : STEP2 -64 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -144 : STEP2 -64 : TLITE6_5 144 0 0
(-1152,1024) to (-1088,1024) : 12 : 0 : 0
    0 (0 : - / BROWN144 / - )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
    0 (0 : - / - / - )
    -168 : STEP2 -64 : TLITE6_5 144 0 0
(-832,928) to (-800,928) : 4 : 0 : 0
    0 (0 : - / BROWNHUG / - )
    -112 : CEIL5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -96 : CEIL5_2 0 : CEIL3_4 144 0 0
(-832,896) to (-768,896) : 4 : 0 : 0
    0 (0 : - / BROWNHUG / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -112 : CEIL5_2 0 : CEIL3_4 144 0 0
(-768,896) to (-768,1024) : 4 : 0 : 0
    0 (0 : - / BROWNHUG / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -112 : CEIL5_2 0 : CEIL3_4 144 0 0
(-1216,192) to (-1216,184) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    8 : FLOOR7_1 8 : FLAT10 144 0 11
(-1376,184) to (-1376,192) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    8 : FLOOR7_1 8 : FLAT10 144 0 11
(-1216,192) to (-1376,192) : 4 : 1 : 0
    0 (112 : BIGDOOR5 / - / - )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
    0 (0 : - / - / - )
    8 : FLOOR7_1 8 : FLAT10 144 0 11
(-1376,184) to (-1216,184) : 4 : 0 : 0
    0 (112 : BIGDOOR5 / - / - )
    8 : FLOOR7_1 136 : FLAT5_2 128 0 0
    0 (0 : - / - / - )
    8 : FLOOR7_1 8 : FLAT10 144 0 11
(-832,136) to (-960,136) : 4 : 99 : 0
    0 (0 : SP_HOT1 / - / - )
    8 : FLOOR7_1 136 : FLAT5_2 128 9 0
    0 (0 : - / - / - )
    8 : FLOOR7_1 8 : FLAT10 144 0 19
(-960,128) to (-832,128) : 4 : 0 : 0
    96 (64 : SP_HOT1 / - / - )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
    0 (0 : - / - / - )
    8 : FLOOR7_1 8 : FLAT10 144 0 19
(744,688) to (744,624) : 4 : 28 : 0
    0 (0 : SLADSKUL / - / - )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(752,624) to (752,688) : 4 : 1 : 0
    0 (0 : SLADSKUL / - / - )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(784,608) to (784,680) : 92 : 0 : 0
    0 (0 : BRONZE3 / BRONZE3 / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(760,256) to (712,256) : 92 : 0 : 0
    0 (0 : BRONZE3 / BRONZE3 / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
(768,232) to (704,232) : 4 : 1 : 0
    0 (0 : SLADSKUL / - / - )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(704,216) to (768,216) : 4 : 26 : 0
    0 (0 : SLADSKUL / - / - )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 -56 : FLAT10 144 0 0
(704,192) to (768,192) : 92 : 0 : 0
    0 (0 : BRONZE3 / BRONZE3 / - )
    -64 : MFLR8_4 64 : CEIL3_6 160 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 8 : FLOOR7_1 144 0 0
(-128,-64) to (-128,-256) : 4 : 0 : 0
    0 (0 : - / metal / - )
    8 : FLOOR7_1 160 : FLAT5_1 160 0 0
    0 (0 : - / - / - )
    48 : FLAT5_3 160 : BLOOD3 144 9 12
(840,-192) to (840,-128) : 4 : 1 : 0
    0 (0 : SLADSKUL / ashwall / - )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(832,-128) to (832,-192) : 4 : 1 : 0
    0 (0 : SLADSKUL / - / - )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(488,-640) to (488,-576) : 4 : 1 : 0
    0 (0 : SLADSKUL / ASHWALL / - )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(480,-576) to (480,-640) : 4 : 1 : 13
    0 (0 : SLADSKUL / - / - )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT20 128 0 0
(384,-576) to (384,-640) : 76 : 0 : 0
    0 (0 : WOOD1 / step5 / - )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(192,-640) to (256,-640) : 28 : 0 : 0
    0 (0 : - / STEP5 / - )
    -96 : STEP2 48 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
(192,-672) to (256,-672) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -112 : STEP2 48 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -96 : STEP2 48 : CEIL1_1 144 0 0
(192,-704) to (256,-704) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -128 : STEP2 48 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -112 : STEP2 48 : CEIL1_1 144 0 0
(192,-736) to (256,-736) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -144 : STEP2 48 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -128 : STEP2 48 : CEIL1_1 144 0 0
(192,-768) to (256,-768) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
    0 (0 : metal / - / - )
    -144 : STEP2 48 : CEIL1_1 144 0 0
(-1024,-1528) to (-1024,-1552) : 1 : 0 : 0
    0 (88 : - / - / EXITDOOR )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1024,-1552) to (-1008,-1576) : 17 : 0 : 0
    0 cell stringValue]);
		
	[panel	orderFront:NULL];
	NXPing();
	system(string);
	[panel	orderOut:NULL];
	NXFreeAlertPanel(panel);
	
	return self;
}

//===================================================================
//
// 				MAP MUNGE: LOAD AND SAVE ALL MAPS
//
//===================================================================
- loadAndSaveAllMaps:sender
{
	id		openMatrix;
	int		i;
	int		selRow;

#if 0
	rv = NXRunAlertPanel("Warning!",
		"This may take awhile!  Make sure your map is saved!",
		"Abort","Continue",NULL,NULL);
	if (rv == 1)
		return self;
#endif
	[editworld_i	closeWorld];

	openMatrix = [maps_i	matrixInColumn:0];
	selRow = [openMatrix	selectedRow];
	
	for (i = 0;i < nummaps; i++)
	{
		[openMatrix	selectCellAt:i :0];
		[self	openMap:openMatrix];
		[editworld_i	saveDoomEdMapBSP:NULL];
	}
	
	if (selRow >=0)
	{
		[openMatrix	selectCellAt:selRow :0];
		[self	openMap:openMatrix];
	}
	
	return self;
}

//===================================================================
//
// 							PRINT CURRENT MAP'S STATISTICS
//
//===================================================================
typedef struct
{
	int		type;
	int		count;
	char	name[32];
} tc_t;

- printSingleMapStatistics:sender
{
	int		i,nt,k;
	int		tset;
	int		*textureCount, indx;
	FILE		*stream;
	char		filename[]="/tmp/tempstats.txt\0";
	texpal_t	*t;
	id		openMatrix;
	int		selRow;
	char		string[80];
	int		numth;
	tc_t	*thingCount;
	
	if ([editworld_i	loaded] == NO)
	{
		NXRunAlertPanel("Hey!",
			"You don't have a world loaded!",
			"Oops, what a dolt I am!",NULL,NULL);
		return self;
	}
	
	[ log_i	msg:"Single map statistics\n" ];	

	//
	//	Thing report data
	//
	numth = numthings;	// MAX # OF DIFFERENT TYPES OF THINGS POSSIBLE
	thingCount = malloc (numth * sizeof(*thingCount));
	bzero(thingCount,sizeof(*thingCount)*numth);
	for (i = 0;i < numth;i++)
	{
		int	type = things[i].type;
		int	found = 0;
		int	j;
		
		// IF TYPE ALREADY EXISTS IN ARRAY, INC COUNT
		for (j = 0;j < numth;j++)
		{
			if (thingCount[j].type == type)
			{
				thingCount[j].count++;
				found = 1;
				break;
			}
		}
		
		// IF TYPE !EXIST, CREATE TYPE AND COUNT = 1
		if (!found)
			for (j = 0;j < numth;j++)
				if (!thingCount[j].type)
				{
					int	index;
					thinglist_t *thing;
					
					thingCount[j].type = type;
					thingCount[j].count = 1;
					
					index = [thingPanel_i searchForThingType:type];
					thing = [thingPanel_i getThingData:index];
					strcpy(thingCount[j].name,thing->name);
					
					break;
				}
	}

	//
	//	Texture report data
	//
	nt = [texturePalette_i	getNumTextures];
	textureCount = malloc(sizeof(int) * nt);
	bzero(textureCount,sizeof(int)*nt);
	
	//
	// count amount of each texture
	//
	for (k=0;k<numlines;k++)
	{
		if (lines[k].selected == -1)		// deleted line; skip it
			continue;
			
		// SIDE 0
		//
		// BOTTOM
		//
		indx = [texturePalette_i
				getTextureIndex:lines[k].side[0].bottomtexture];
		if (indx >= nt)
			NXRunAlertPanel("Programming Error?",
				"Returned a bad texture index: %d",
				"Continue",NULL,NULL,indx);
		
		if (indx >= 0)
			textureCount[indx]++;
		else
		if (indx == -2)
		{
			NXRunAlertPanel("Error!",
				"Found a line with a texture that isn't present: '%s'",
				"Continue",NULL,NULL, lines[k].side[0].bottomtexture);
			[editworld_i	selectLine:k];
			sprintf(string,"Line %d: texture '%s' nonexistent!\n",
				k, lines[k].side[0].bottomtexture);
			[log_i	msg:string];
			return self;
		}

		//
		// MIDDLE
		//
		indx = [texturePalette_i
				getTextureIndex:lines[k].side[0].midtexture];
		if (indx >= nt)
			NXRunAlertPanel("Programming Error?",
				"Returned a bad texture index: %d",
				"Continue",NULL,NULL,indx);
		if (indx >= 0)
			textureCount[indx]++;
		else
		if (indx == -2)
		{
			NXRunAlertPanel("Error!",
				"Found a line with a texture that isn't present: '%s'",
				"Continue",NULL,NULL, lines[k].side[0].midtexture);
			[editworld_i	selectLine:k];
			sprintf(string,"Line %d: texture '%s' nonexistent!\n",
				k, lines[k].side[0].midtexture);
			[log_i	msg:string];
			return self;
		}

		//
		// TOP
		//
		indx = [texturePalette_i
				getTextureIndex:lines[k].side[0].toptexture];
		if (indx >= nt)
			NXRunAlertPanel("Programming Error?",
				"Returned a bad texture index: %d",
				"Continue",NULL,NULL,indx);
		if (indx >= 0)
			textureCount[indx]++;
		else
		if (indx == -2)
		{
			NXRunAlertPanel("Error!",
				"Found a line with a texture that isn't present: '%s'",
				"Continue",NULL,NULL, lines[k].side[0].toptexture);
			[editworld_i	selectLine:k];
			sprintf(string,"Line %d: texture '%s' nonexistent!\n",
				k, lines[k].side[0].toptexture);
			[log_i	msg:string];
			return self;
		}

		// SIDE 1
		//
		// BOTTOM
		//
		indx = [texturePalette_i
				getTextureIndex:lines[k].side[1].bottomtexture];
		if (indx >= nt)
			NXRunAlertPanel("Programming Error?",
				"Returned a bad texture index: %d",
				"Continue",NULL,NULL,indx);
		
		if (indx >= 0)
			textureCount[indx]++;
		else
		if (indx == -2)
		{
			NXRunAlertPanel("Error!",
				"Found a line with a texture that isn't present: '%s'",
				"Continue",NULL,NULL, lines[k].side[1].bottomtexture);
			[editworld_i	selectLine:k];
			sprintf(string,"Line %d: texture '%s' nonexistent!\n",
				k, lines[k].side[0].bottomtexture);
			[log_i	msg:string];
			return self;
		}

		//
		// MIDDLE
		//
		indx = [texturePalette_i
				getTextureIndex:lines[k].side[1].midtexture];
		if (indx >= nt)
			NXRunAlertPanel("Programming Error?",
				"Returned a bad texture index: %d",
				"Continue",NULL,NULL,indx);
		if (indx >= 0)
			textureCount[indx]++;
		else
		if (indx == -2)
		{
			NXRunAlertPanel("Error!",
				"Found a line with a texture that isn't present: '%s'",
				"Continue",NULL,NULL,lines[k].side[1].midtexture);
			[editworld_i	selectLine:k];
			sprintf(string,"Line %d: texture '%s' nonexistent!\n",
				k, lines[k].side[0].midtexture);
			[log_i	msg:string];
			return self;
		}

		//
		// TOP
		//
		indx = [texturePalette_i
				getTextureIndex:lines[k].side[1].toptexture];
		if (indx >= nt)
			NXRunAlertPanel("Programming Error?",
				"Returned a bad texture index: %d",
				"Continue",NULL,NULL,indx);
		if (indx >= 0)
			textureCount[indx]++;
		else
		if (indx == -2)
		{
			NXRunAlertPanel("Error!",
				"Found a line with a texture that isn't present: '%s'",
				"Continue",NULL,NULL, lines[k].side[1].toptexture);
			[editworld_i	selectLine:k];
			sprintf(string,"Line %d: texture '%s' nonexistent!\n",
				k, lines[k].side[0].toptexture);
			[log_i	msg:string];
			return self;
		}
	}
		
	//
	// create stats file
	//
	openMatrix = [maps_i matrixInColumn:0];
	selRow = [openMatrix	selectedRow];

	stream = fopen (filename,"w");
	fprintf(stream,"DoomEd Map Statistics for %s\n\n",
		[[openMatrix cellAt:selRow :0] stringValue]);
	fprintf(stream,"Texture count:\n");
	tset = -1;
	for (i=0;i<nt;i++)
	{
		if (!textureCount[i])
			continue;
		t = [texturePalette_i	getTexture:i];
		if (t->WADindex != tset)
		{
			fprintf(stream,"Texture set #%d\n",t->WADindex+1);
			tset = t->WADindex;
		}
		fprintf(stream,"%d\x9\x9%s\n",textureCount[i],t->name);
	}
	
	fprintf(stream,"\nThing Report:\n");
	fprintf(stream, "Type	Amount	Description\n"
					"-----	------	-------------------------------------\n");
	for (i = 0;i < numth;i++)
		if (thingCount[i].type)
			fprintf(stream,"%d   \x9\x9%d\x9%s\n",
				thingCount[i].type,
				thingCount[i].count,
				thingCount[i].name);
	
	fclose(stream);
	
	//
	// launch Edit with file!
	//
	[[Application	workspace]	openTempFile:filename];
	
	free(textureCount);
	
	return self;
}

//===================================================================
//
// 							PRINT ALL MAP STATISTICS
//
//===================================================================
- printStatistics:sender
{
	id		openMatrix;

	int		numPatches;
	int		*patchCount;
	char	*patchName;
	
	int		i;
	int		k;
	int		j;
	int		nt;
	int		selRow;
	int		nf;
	int		flat;
	int		errors;
	int		*textureCount, indx, *flatCount;
	FILE	*stream;
	char	filename[]="/tmp/tempstats.txt\0";
	char	string[80];
	texpal_t	*t;
	int		numth;
	tc_t	*thingCount;
	id		thingList_i;
	
#if 0
	rv = NXRunAlertPanel("Warning!",
		"This may take awhile!  (0 : - / - / doortrak )
    -24 : SFLR6_4 -24 : FLAT20 144 0 0
(-1064,-1600) to (-1080,-1584) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -24 : SFLR6_4 -24 : FLAT20 144 0 0
(-1064,-1600) to (-1008,-1576) : 4 : 0 : 0
    0 (0 : EXITDOOR / - / - )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
    0 (0 : - / - / - )
    -24 : SFLR6_4 -24 : FLAT20 144 0 0
(-1080,-1584) to (-1104,-1576) : 1 : 0 : 0
    0 (64 : - / - / EXITDOOR )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-1024,-1552) to (-1080,-1584) : 4 : 31 : 0
    0 (0 : EXITDOOR / - / - )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
    0 (0 : - / - / - )
    -24 : SFLR6_4 -24 : FLAT20 144 0 0
(-1216,-384) to (-1152,-448) : 4 : 1 : 0
    0 (0 : metal / METAL / - )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
    0 (0 : - / - / - )
    32 : FLOOR0_2 32 : FLAT20 160 0 0
(-1216,-672) to (-1280,-672) : 4 : 1 : 0
    0 (0 : SW2GARG / - / - )
    16 : FLAT5_2 144 : CEIL1_1 160 9 0
    0 (0 : - / - / - )
    16 : FLAT5_2 16 : FLAT10 160 0 14
(-1280,-680) to (-1216,-680) : 4 : 0 : 0
    0 (0 : SW2GARG / - / - )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
    0 (0 : - / - / - )
    16 : FLAT5_2 16 : FLAT10 160 0 14
(-320,-576) to (-320,-640) : 1 : 63 : 14
    0 (0 : - / - / SW1PANEL )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
(-384,-1344) to (-384,-1352) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-384,-1480) to (-448,-1480) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-448,-1480) to (-448,-1352) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-448,-1352) to (-448,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-256,-1344) to (-256,-1352) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-256,-1352) to (-256,-1480) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-256,-1480) to (-320,-1480) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-320,-1480) to (-320,-1352) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-320,-1352) to (-320,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-128,-1344) to (-128,-1352) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-128,-1352) to (-128,-1480) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-128,-1480) to (-192,-1480) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-192,-1480) to (-192,-1352) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-192,-1352) to (-192,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-384,-1352) to (-384,-1480) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(104,-1408) to (88,-1408) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -144 : TLITE6_1 -144 : FLAT20 144 0 0
(88,-1408) to (64,-1408) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(64,-1408) to (0,-1408) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(352,-1344) to (352,-1336) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(352,-1336) to (352,-1208) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(352,-1208) to (416,-1208) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(416,-1208) to (416,-1336) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(416,-1336) to (416,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(448,-1344) to (448,-1336) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(448,-1336) to (448,-1208) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(448,-1208) to (512,-1208) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(512,-1208) to (512,-1336) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(512,-1336) to (512,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(544,-1344) to (544,-1336) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(544,-1336) to (544,-1208) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(544,-1208) to (608,-1208) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(608,-1208) to (608,-1336) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(608,-1336) to (608,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(640,-1344) to (648,-1344) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 0
(648,-1344) to (648,-1216) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(648,-1600) to (648,-1472) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(648,-1472) to (640,-1472) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 0
(88,-1344) to (88,-1408) : 4 : 1 : 0
    0 (0 : SLADSKUL / - / - )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -144 : FLAT20 144 0 0
(64,-1344) to (64,-1408) : 12 : 0 : 0
    0 (0 : WOOD3 / step5 / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(128,-1408) to (128,-1344) : 12 : 0 : 0
    0 (0 : WOOD3 / step5 / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(104,-1408) to (104,-1344) : 4 : 1 : 0
    0 (0 : SLADSKUL / - / - )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -144 : FLAT20 144 0 0
(-320,-1352) to (-256,-1352) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-192,-1352) to (-128,-1352) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-448,-1352) to (-384,-1352) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(776,-1600) to (648,-1600) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(648,-1472) to (648,-1344) : 4 : 0 : 0
    0 (0 : BIGDOOR5 / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 0
(0,-1544) to (-64,-1544) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-64,-1544) to (-64,-1416) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-64,-1416) to (-64,-1408) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(0,-1408) to (-64,-1408) : 4 : 103 : 25
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(-64,-1416) to (0,-1416) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(736,952) to (800,952) : 129 : 0 : 0
    0 (0 : - / - / SKSNAKE2 )
    -64 : FLOOR3_3 32 : SFLR6_4 144 9 0
(-256,1624) to (-256,1704) : 4 : 0 : 0
    0 (0 : METAL / STEP3 / - )
    0 : FLAT1_1 128 : CEIL3_4 128 0 0
    0 (0 : - / - / - )
    8 : SFLR6_1 104 : FLAT10 144 0 0
(384,1792) to (320,1792) : 4 : 1 : 0
    0 (0 : WOOD4 / WOOD4 / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
    0 (0 : - / - / - )
    -80 : FLAT5_5 -80 : FLAT10 144 0 0
(640,1600) to (640,1664) : 76 : 3 : 7
    0 (64 : GSTONE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
    0 (0 : - / MARBLE1 / - )
    -88 : BLOOD3 -8 : DEM1_6 144 5 0
(320,1472) to (320,1600) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
   Make sure your map is saved!",
		"Abort","Continue",NULL,NULL);
	if (rv == 1)
		return self;
#endif
	[editworld_i	closeWorld];

	openMatrix = [maps_i	matrixInColumn:0];
	selRow = [openMatrix	selectedRow];
	
	nt = [texturePalette_i	getNumTextures];
	textureCount = malloc(sizeof(int) * nt);
	bzero(textureCount,sizeof(int)*nt);
	
	nf = [sectorEdit_i	getNumFlats];
	flatCount = malloc ( sizeof(*flatCount) * nf );
	bzero (flatCount, sizeof (*flatCount) * nf );

	thingList_i = [thingPanel_i getThingList];
	numth = [thingList_i	count];
	thingCount = malloc (numth * sizeof(*thingCount));
	bzero(thingCount,sizeof(*thingCount)*numth);
	// FILL THING COUNT LIST WITH ALL POSSIBLE THINGS
	for (k = 0;k < numth;k++)
	{
		thinglist_t *thing;
		thing = [thingPanel_i getThingData:k];
		thingCount[k].type = thing->value;
		strcpy(thingCount[k].name,thing->name);
	}
	
	[log_i	msg:"Starting to calculate multiple map statistics...\n" ];
	
	errors = 0;
	
	for (i = 0;i < nummaps; i++)
	{
		sprintf(string,"Loading map %s.\n",
			[[openMatrix selectedCell] stringValue] );
		[log_i	msg:string ];
		[openMatrix	selectCellAt:i :0];
		[self	openMap:openMatrix];
		
		//
		//	Thing report data
		//
		[log_i	msg:"Counting things.\n" ];
		for (k = 0;k < numthings;k++)
		{
			int	type = things[k].type;
			int	found = 0;
			int	j;
			
			// IF TYPE ALREADY EXISTS IN ARRAY, INC COUNT
			for (j = 0;j < numth;j++)
			{
				if (thingCount[j].type == type)
				{
					thingCount[j].count++;
					found = 1;
					break;
				}
			}
			
			// IF TYPE !EXIST, CREATE TYPE AND COUNT = 1
			if (!found)
				for (j = 0;j < numth;j++)
					if (!thingCount[j].type)
					{
						int	index;
						thinglist_t *thing;
						
						thingCount[j].type = type;
						thingCount[j].count = 1;
						
						index = [thingPanel_i searchForThingType:type];
						thing = [thingPanel_i getThingData:index];
						strcpy(thingCount[j].name,thing->name);
						
						break;
					}
		}
		
		//
		// count amount of each texture
		//
		[log_i	msg:"Counting textures and flats.\n" ];
		for (k=0;k<numlines;k++)
		{
			// SIDE 0
			indx = [texturePalette_i
					getTextureIndex:lines[k].side[0].bottomtexture];

			if (indx >= nt)
				NXRunAlertPanel("Programming Error?",
					"Returned a bad texture index: %d",
					"Continue",NULL,NULL,indx);
			
			if (indx >= 0)
				textureCount[indx]++;
			else
			if (indx == -2)
			{
				[textureRemapper_i
					addToList:lines[k].side[0].bottomtexture to:"???"];
				errors++;
			}

			indx = [texturePalette_i
					getTextureIndex:lines[k].side[0].midtexture];
			if (indx >= nt)
				NXRunAlertPanel("Programming Error?",
					"Returned a bad texture index: %d",
					"Continue",NULL,NULL,indx);
			if (indx >= 0)
				textureCount[indx]++;
			else
			if (indx == -2)
			{
				[textureRemapper_i
					addToList:lines[k].side[0].midtexture to:"???"];
				errors++;
			}

			indx = [texturePalette_i
					getTextureIndex:lines[k].side[0].toptexture];
			if (indx >= nt)
				NXRunAlertPanel("Programming Error?",
					"Returned a bad texture index: %d",
					"Continue",NULL,NULL,indx);
			if (indx >= 0)
				textureCount[indx]++;
			else
			if (indx == -2)
			{
				[textureRemapper_i
					addToList:lines[k].side[0].toptexture to:"???"];
				errors++;
			}
			
			if (lines[k].side[0].ends.floorflat[0])
			{
				flat = [ sectorEdit_i
					findFlat:lines[k].side[0].ends.floorflat ];
				if (flat >= 0)
					flatCount[flat]++;
				else
				{
					[flatRemapper_i
						addToList:lines[k].side[0].ends.floorflat  to:"???"];
					errors++;
				}
			}
			if (lines[k].side[0].ends.ceilingflat[0])
			{
				flat = [ sectorEdit_i
					findFlat:lines[k].side[0].ends.ceilingflat ];
				if (flat >= 0)
					flatCount[flat]++;
				else
				{
					[flatRemapper_i
						addToList:lines[k].side[0].ends.ceilingflat  to:"???"];
					errors++;
				}
			}

			// SIDE 1
			indx = [texturePalette_i
					getTextureIndex:lines[k].side[1].bottomtexture];
			if (indx >= nt)
				NXRunAlertPanel("Programming Error?",
					"Returned a bad texture index: %d",
					"Continue",NULL,NULL,indx);
			
			if (indx >= 0)
				textureCount[indx]++;
			else
			if (indx == -2)
			{
				[textureRemapper_i
					addToList:lines[k].side[1].bottomtexture to:"???"];
				errors++;
			}

			indx = [texturePalette_i
					getTextureIndex:lines[k].side[1].midtexture];
			if (indx >= nt)
				NXRunAlertPanel("Programming Error?",
					"Returned a bad texture index: %d",
					"Continue",NULL,NULL,indx);
			if (indx >= 0)
				textureCount[indx]++;
			else
			if (indx == -2)
			{
				[textureRemapper_i
					addToList:lines[k].side[1].midtexture to:"???"];
				errors++;
			}

			indx = [texturePalette_i
					getTextureIndex:lines[k].side[1].toptexture];
			if (indx >= nt)
				NXRunAlertPanel("Programming Error?",
					"Returned a bad texture index: %d",
					"Continue",NULL,NULL,indx);
			if (indx >= 0)
				textureCount[indx]++;
			else
			if (indx == -2)
			{
				[textureRemapper_i
					addToList:lines[k].side[1].toptexture to:"???"];
				errors++;
			}

			if (lines[k].side[1].ends.floorflat[0])
			{
				flat = [ sectorEdit_i
					findFlat:lines[k].side[1].ends.floorflat ];
				if (flat >= 0)
					flatCount[flat]++;
				else
				{
					[flatRemapper_i
						addToList:lines[k].side[1].ends.floorflat  to:"???"];
					errors++;
				}
			}
			
			if (lines[k].side[1].ends.ceilingflat[0])
			{
				flat = [ sectorEdit_i
						findFlat:lines[k].side[1].ends.ceilingflat ];
				if (flat >= 0)
					flatCount[flat]++;
				else
				{
					[flatRemapper_i
						addToList:lines[k].side[1].ends.ceilingflat  to:"???"];
					errors++;
				}
			}
		}
	}
	
	if (errors)
		NXRunAlertPanel("Errors!",
			"Found %d lines with textures or flats that aren't present.\n"
			"The Texture/Flat Remappers have these errors listed so you\n"
			"can fix them.",
			"Continue",NULL,NULL, errors);

	//
	// 	Create Stats file
	//
	stream = fopen (filename,"w");
	fprintf(stream,"DoomEd Map Statistics\n\n");

	fprintf(stream,"Number of textures in project:%d\n",nt);
	fprintf(stream,"Texture count:\n");
	for (i=0;i<nt;i++)
	{
		t = [texturePalette_i	getTexture:i];
		fprintf(stream,"Texture\x9\x9%d\x9\x9\x9%s\n",textureCount[i],t->name);
	}
	
	//
	//	Count flat usage
	//
	fprintf( stream, "Number of flats in project:%d\n",nf );
	fprintf( stream, "Flat count:\n" );
	for (i = 0; i < nf; i++)
		fprintf( stream, "Flat\x9\x9%d\x9\x9\x9%s\n",flatCount[i],
			[sectorEdit_i flatName:i] );
	
	//
	//	Print thing report
	//
	fprintf(stream,"\nThing Report:\n");
	fprintf(stream, "Type	Amount	Description\n"
					"-----	------	-------------------------------------\n");
	for (i = 0;i < numth;i++)
		if (thingCount[i].type)
			fprintf(stream,"%d   \x9\x9%d\x9%s\n",
				thingCount[i].type,
				thingCount[i].count,
				thingCount[i].name);
	
	//
	//	Count patch usage
	//
	[log_i	msg:"Calculating patch usage: " ];
	numPatches = [textureEdit_i	getNumPatches];
	patchCount = malloc(sizeof(*patchCount) * numPatches);
	bzero(patchCount,sizeof(*patchCount)* numPatches);
	
	fprintf(stream, "Number of patches in project:%d\n",numPatches);
	fprintf(stream, "Patch count:\n");
	for (i = 0;i < numPatches; i++)
	{
		[log_i	msg:"." ];
		patchName = [textureEdit_i  getPatchName:i];
		for (j = 0;j < numtextures; j++)
			for (k = 0;k < textures[j].patchcount; k++)
				if (!strcasecmp(patchName,textures[j].patches[k].patchname))
					patchCount[i]++;
		fprintf(stream, "Patch\x9\x9\x9%d\x9\x9\x9%s\n",
			patchCount[i],patchName);
	}

	//
	//	Done!
	//
	fclose(stream);
	[log_i	msg:"\nFinished!\n\n" ];
	
	//
	// launch Edit with file!
	//
	[[Application	workspace]	openTempFile:filename];
	
	free(textureCount);
	free(flatCount);
	
	if (selRow >=0)
	{
		[openMatrix	selectCellAt:selRow :0];
		[self	openMap:openMatrix];
	}
	
	return self;
}

//======================================================================
//
//	THING METHODS
//
//======================================================================
- updateThings
{
	FILE		*stream;
	char		filename[1024];
	int		handle;

	strcpy (filename, projectdirectory);
	strcat (filename ,"/things.dsp");
	
	handle = open (filename, O_CREAT | O_RDWR, 0666);
	if (handle == -1)
	{
		NXRunAlertPanel ( -80 : FLAT5_5 -8 : TLITE6_6 144 0 0
(320,1472) to (384,1472) : 28 : 0 : 0
    0 (0 : WOOD6 / WOOD6 / - )
    -104 : FLAT5_2 24 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -80 : FLAT5_5 -8 : TLITE6_6 144 0 0
(264,1120) to (136,1120) : 4 : 0 : 0
    0 (0 : BRONZE4 / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT20 144 0 1
(-384,896) to (-384,832) : 12 : 0 : 0
    0 (64 : WOOD3 / step1 / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-320,832) to (-320,896) : 12 : 0 : 0
    0 (0 : TEKWALL4 / STEP1 / - )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-256,832) to (-320,832) : 12 : 0 : 0
    0 (64 : TEKWALL4 / STEP1 / - )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-320,512) to (-320,576) : 12 : 0 : 0
    0 (0 : WOOD11 / STEP1 / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-352,576) to (-352,512) : 12 : 0 : 0
    0 (64 : WOOD10 / STEP1 / - )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-320,768) to (-320,832) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-320,768) to (-256,768) : 28 : 0 : 0
    0 (0 : WOOD11 / WOOD4 / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-608,512) to (-608,576) : 12 : 0 : 0
    0 (0 : WOOD11 / STEP1 / - )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-640,576) to (-640,544) : 12 : 0 : 0
    0 (96 : WOOD10 / STEP1 / - )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-832,672) to (-768,672) : 12 : 0 : 0
    0 (64 : WOOD10 / STEP1 / - )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-768,704) to (-832,704) : 12 : 0 : 0
    0 (128 : WOOD3 / step1 / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-384,704) to (-384,640) : 17 : 0 : 0
    0 (0 : - / - / BRONZE4 )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-352,640) to (-352,576) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-448,640) to (-384,640) : 12 : 0 : 0
    0 (32 : WOOD11 / STEP1 / - )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(-384,704) to (-448,704) : 12 : 0 : 0
    0 (0 : WOOD3 / step1 / - )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -120 : FLAT1_3 -48 : TLITE6_4 144 0 0
(56,1120) to (-72,1120) : 4 : 0 : 0
    0 (0 : BRONZE4 / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT10 144 0 2
(-72,1120) to (-64,1200) : 1 : 0 : 0
    0 (0 : - / - / SKINMET1 )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(1088,832) to (1024,832) : 12 : 0 : 0
    0 (0 : GSTVINE1 / step2 / - )
    -64 : FLOOR7_2 64 : TLITE6_1 144 0 0
    0 (0 : - / - / - )
    -56 : FLOOR3_3 16 : FLOOR4_6 144 0 0
(664,680) to (664,624) : 92 : 0 : 0
    0 (0 : BRONZE3 / BRONZE3 / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -56 : CEIL5_1 24 : FLOOR7_1 144 0 0
(384,512) to (320,512) : 68 : 73 : 10
    0 (0 : - / - / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(320,448) to (384,448) : 68 : 0 : 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
(-128,-384) to (-192,-448) : 1 : 0 : 0
    0 (0 : - / - / SP_HOT1 )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(328,-512) to (376,-512) : 76 : 0 : 0
    0 (0 : WOOD1 / step5 / - )
    -80 : FLAT1_2 48 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(384,-256) to (384,-504) : 1 : 48 : 0
    0 (0 : - / - / SKSPINE2 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(320,-832) to (320,-896) : 4 : 26 : 0
    0 (0 : DOORHI / step5 / - )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -144 : TLITE6_1 144 0 16
(192,-1024) to (256,-1024) : 12 : 0 : 0
    0 (0 : WOOD3 / step5 / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(256,-960) to (192,-960) : 12 : 0 : 0
    0 (0 : metal / step5 / - )
    -160 : FLAT1_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -144 : TLITE6_1 -72 : TLITE6_1 144 0 0
(512,-832) to (576,-832) : 12 : 0 : 0
    0 (0 : WOOD3 / - / - )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(768,-832) to (832,-832) : 12 : 0 : 0
    0 (0 : WOOD3 / - / - )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(512,-1024) to (512,-832) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(768,-1024) to (768,-832) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
(1024,-704) to (960,-704) : 12 : 0 : 0
    0 (0 : WOOD3 / - / - )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-768) to (1024,-768) : 12 : 0 : 0
    0 (0 : WOOD3 / - / - )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-1152) to (960,-1088) : 12 : 0 : 0
    0 (0 : WOOD3 / - / - )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(960,-1344) to (960,-1280) : 12 : 0 : 0
    0 (0 : WOOD3 / - / - )
    -152 : FLAT5_1 -24 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(896,-1280) to (960,-1280) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(416,-1336) to (352,-1336) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(512,-1336) to (448,-1336) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(608,-1336) to (544,-1336) : 4 : 0 : 0
    0 (0 : SW1GARG / - / - )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -160 : FLAT5_2 -160 : FLAT10 144 0 17
(64,-1024) to (64,-1344) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-680,-1344) to (-768,-1344) : 12 : 0 : 0
    0 (0 : metal / step5 / - )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
    0 (0 : - / - / - )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-448,1952) to (-224,1952) : 1 : 48 : 0
    0 (8 : - / - / SKSPINE2 )
    8 : SFLR6_1 104 : FLAT10 144 0 0
(-128,1856) to (-352,1856) : 1 : 48 : 0
    0 (232 : - / - / SKSPINE2 )
    8 : SFLR6_1 104 : FLAT10 144 0 0
(-320,2152) to (-320,2072) : 12 : 0 : 0
    0 (0 : BRONZE2 / STEP3 / - )
    0 : FLAT1_1 128 : TLITE6_6 128 0 0
    0 (0 : - / - / - )
    8 : SFLR6_1 104 : FLAT10 144 0 0
(320,1664) to (384,1664) : 68 : 48 : 0
    0 (0 : SKSPINE2 / - / - )
    -80 : FLAT5_5 88 : TLITE6_6 160 0 0
    0 (0 : - / - / - )
    -80 : FLAT5_5 -8 : TLITE6_6 144 0 0
(384,1664) to (384,1600) : 68 : 48 : 0
    0 (64 : SKSPINE2 / - / - )
    -80 : FLAT5_5 88 : TLITE6_6 160 0 0
    0 (0 : - / marble1 / - )
    -88 : BLOOD3 -8 : DEM1_6 144 0 0
(384,1600) to (320,1600) : 68 : 48 : 0
    0 (128 : SKSPINE2 / - / - )
    -80 : FLAT5_5 88 : TLITE6_6 160 0 0
    0 (0 : - / - / - )
    -80 : FLAT5_5 -8 : TLITE6_6 144 0 0
(-64,1200) to (-64,1288) : 1 : 46 : 2
    0 (80 : - / - / SKINSYMB )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(-64,1288) to (-64,1376) : 1 : 0 : 0
    0 (168 : - / - / SKINMET1 )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(256,1376) to (256,1296) : 1 : 0 : 0
    0 (0 : - / - / SKINMET1 )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(256,1296) to (256,1208) : 1 : 46 : 1
    0 (168 : - / - / SKINSYMB )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(-64,1376) to (24,1376) "Error","Couldn't open %s",
			NULL,NULL,NULL, filename);
		return self;
	}		

	flock (handle, LOCK_EX);
	
	stream = fdopen (handle,"r+");
	if (!stream)
	{
		fclose (stream);
		NXRunAlertPanel ("Error","Could not stream to %s",
			NULL,NULL,NULL, filename);
		return self;
	}
	
	printf("Updating things file\n");
	[thingPanel_i	updateThingsDSP:stream];
	flock(handle,LOCK_UN);
	fclose(stream);
	
	return self;
}

//======================================================================
//
//	SPECIAL METHODS
//
//======================================================================
- updateSectorSpecials
{
	FILE		*stream;
	char		filename[1024];
	int		handle;

	strcpy (filename, projectdirectory);
	strcat (filename ,"/sectorspecials.dsp");
	
	handle = open (filename, O_CREAT | O_RDWR, 0666);
	if (handle == -1)
	{
		NXRunAlertPanel ("Error","Couldn't open %s",
			NULL,NULL,NULL, filename);
		return self;
	}		

	flock (handle, LOCK_EX);
	
	stream = fdopen (handle,"r+");
	if (!stream)
	{
		fclose (stream);
		NXRunAlertPanel ("Error","Could not stream to %s",
			NULL,NULL,NULL, filename);
		return self;
	}
	
	printf("Updating Sector Specials file\n");
	[sectorEdit_i	updateSectorSpecialsDSP:stream];
	flock(handle,LOCK_UN);
	fclose(stream);
	
	return self;
}

- updateLineSpecials
{
	FILE		*stream;
	char		filename[1024];
	int		handle;

	strcpy (filename, projectdirectory);
	strcat (filename ,"/linespecials.dsp");
	
	handle = open (filename, O_CREAT | O_RDWR, 0666);
	if (handle == -1)
	{
		NXRunAlertPanel ("Error","Couldn't open %s",
			NULL,NULL,NULL, filename);
		return self;
	}		

	flock (handle, LOCK_EX);
	
	stream = fdopen (handle,"r+");
	if (!stream)
	{
		fclose (stream);
		NXRunAlertPanel ("Error","Could not stream to %s",
			NULL,NULL,NULL, filename);
		return self;
	}
	
	printf("Updating Line Specials file\n");
	[linepanel_i	updateLineSpecialsDSP:stream];
	flock(handle,LOCK_UN);
	fclose(stream);
	
	return self;
}

/*
=============================================================================

						TEXTURE METHODS
						
=============================================================================
*/

//=========================================================
//
//	Alphabetize the textures[] array
//
//=========================================================
- alphabetizeTextures:(int)sets
{
	int		x;
	int		y;
	int		found;
	id		store;
	worldtexture_t	*t;
	worldtexture_t	*t2;
	worldtexture_t	m;
	worldtexture_t	m2;
	int		max;
	int		windex;
	id		list;
	
	printf("Alphabetize textures.\n");
	printf("numtextures = %d\n",numtextures);
	list = [List alloc];
	
	for (windex = 0; windex <= sets; windex++)
	{
		store = [[Storage alloc]
				initCount:		0
				elementSize:	sizeof(worldtexture_t)
				description:	NULL];
		
		for (x = 0;x < numtextures;x++)
			if (textures[x].WADindex == windex)
				[store	addElement:&textures[x]];
		
		max = [store count];
		do
		{
			found = 0;
			for (x = 0;x < max - 1;x++)
				for (y = x + 1;y < max;y++)
				{
					t = [store	elementAt:x];
					t2 = [store	elementAt:y];
					if (strcasecmp(t->name,t2->name) > 0)
					{
						m = *t;
						m2 = *t2;
						[store	replaceElementAt:x with:&m2];
						[store	replaceElementAt:y with:&m];
						found = 1;
						break;
					}
				}
			
		} while(found);
		
		[list	addObject:store];

#if 0		
		max = [store count];
		printf("\n%d textures in set %d:\n",max,windex);
		for (x = 0;x < max;x++)
			printf("%s\n",((worldtexture_t *)[store elementAt:x])->name);
#endif			
	}
	
	//	Store textures in textures[] array
	windex = 0;
	for (x = 0;x <= sets;x++)
	{
		store = [list	objectAt:x];
		max = [store count];
		for (y = 0;y < max;y++, windex++)
		{
			t = [store elementAt:y];
			textures[windex] = *t;
		}
		[store empty];
	}
	
	[list empty];
	
	return self;
}

/*
=================
=
= read/writeTexture
=
=================
*/

- (BOOL)readTexture: (worldtexture_t *)tex from: (FILE *)file
{
	int	i;
	worldpatch_t	*patch;
	
	memset (tex, 0, sizeof(*tex));

	if (fscanf (file,"%s %d, %d, %d\n",
		tex->name, &tex->width, &tex->height, &tex->patchcount) != 4)
		return NO;
		
	for (i=0 ; i<tex->patchcount ; i++)
	{
		patch = &tex->patches[i];
		if (fscanf (file,"   (%d, %d : %s ) %d, %d\n",
			&patch->originx, &patch->originy,
			patch->patchname, &patch->stepdir, &patch->colormap) != 5)
			return NO;
	}

	return YES;
}

- writeTexture: (worldtexture_t *)tex to: (FILE *)file
{
	int	i;
	worldpatch_t	*patch;
	
	fprintf (file,"%s %d, %d, %d\n",
		tex->name, tex->width, tex->height, tex->patchcount);
		
	for (i=0 ; i<tex->patchcount ; i++)
	{
		patch = &tex->patches[i];
		fprintf (file,"   (%d, %d : %s ) %d, %d\n",
			patch->originx, patch->originy,
			patch->patchname, patch->stepdir, patch->colormap);
	}

	return self;
}


/*
================
=
= textureNamed:
=
= Returns the number of the data with the given name, -1 if no texture, -2 if  name not found
=
================
*/

- (int)textureNamed: (char const *)name
{
	int	i;
	
	if (!strlen(name) || !strcmp (name, "-") )
		return -1;		// no texture
		
	for (i=0 ; i<numtextures ; i++)
		if (!strcasecmp(textures[i].name, name) )
			return i;
	return -2;	
}


/*
===============
=
= updateTextures
=
= Opens textures.dsp from the project directory exclusively, then reads in any new
= changes, then writes everything back out
=
===============
*/

- updateTextures
{
	FILE	*stream;
	int		handle;
	char	filename[1024];
	int		count;
	int		i;
	int		num;
	worldtexture_t		tex;
	int		winmax;
	int		windex;
	int		wincount;
	int		newtexture;
	id		panel;
	

	//
	//	Read-in and update textures IN MEMORY
	//
	newtexture = windex = 0;
	do
	{
		panel = NXGetAlertPanel("Wait...",
			"Reading textures from texture%d.dsp.",NULL,NULL,NULL,windex+1);
		[panel	orderFront:NULL];
		NXPing();
		
		sprintf (filename, "%s/texture%d.dsp",projectdirectory,windex+1 );
		
		chmod (filename,0666);
		handle = open (filename,O_RDWR, 0666);
		if (handle == -1)
		{
			if (!windex)
			{
				[panel	orderOut:NULL];
				NXFreeAlertPanel(panel);
				NXPing();
				NXRunAlertPanel ("Error","Couldn't open %s",
					NULL,NULL,NULL, filename);
				return self;
			}
			else
			{
				[panel	orderOut:NULL];
				NXFreeAlertPanel(panel);
				NXPing();
				close(handle);
				windex = -1;
				continue;
			}
		}
	
		printf ("Updating textures in memory from Texture%d file\n",windex+1);
		flock (handle, LOCK_EX);
		
		stream = fdopen (handle,"r+");
		if (!stream)
		{
			close (handle);
			[panel	orderOut:NULL];
			NXFreeAlertPanel(panel);
			NXPing();
			NXRunAlertPanel ("Error","Could not stream to %s",
				NULL,NULL,NULL, filename);
			return self;
		}
		
		//
		// read textures out of the file
		//
		if (fscanf (stream, "numtextures: %d\n", &count) == 1)
		{
			for (i=0 ; i<count ; i++)
			{
				if (![self readTexture: &tex from: stream])
				{
					fclose (stream);
					[panel	orderOut:NULL];
					NXFreeAlertPanel(panel);
					NXPing();
					NXRunAlertPanel ("Error",
						"Could not parse %s",NULL,NULL,NULL, filename);
					return self;
				}

				//
				// if the name is present but not modified, update it
				//	...to the current value
				// if the name is present and modified, don't update it
				// if the name is not present, add it
				//
				num = [self textureNamed:tex.name];
				if (num == -2)
				{
					[self newTexture: &tex];
					num = [self	textureNamed:tex.name ];
					textures[num].WADindex = windex;
					newtexture = 1;
				}
				else
				{
					tex.WADindex = windex;
					if (!textures[num].dirty)
						[self changeTexture: num to: &tex];
				}
			}
			
			windex++;
		}
		else
			windex = -1;
		
		flock (handle, LOCK_UN);
		fclose (stream);
		
		[panel	orderOut:NULL];
		NXFreeAlertPanel(panel);
		NXPing();

	} while (windex >= 0);
	
	//
	//	Count how many sets of textures are in memory now
	//
	winmax = 0;
	for (i = 0; i < numtextures; i++)
		if (textures[i].WADindex > winmax)
			winmax = textures[i].WADindex;

	//
	//	Alphabetize textures
	//
	[self	alphabetizeTextures:winmax];

	//
	//	Write out all Texture?.dsp files needed
	//
	for (windex = 0; windex <= winmax; windex++)
	{
		panel = NXGetAlertPanel("Wait...",
			"Writing textures to texture%d.dsp.",NULL,NULL,NULL,windex+1);
		[pa: 1 : 0 : 0
    0 (80 : - / - / SKINSCAB )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(168,1376) to (256,1376) : 1 : 0 : 0
    0 (168 : - / - / SKINSCAB )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
(-64,896) to (-64,832) : 4 : 0 : 0
    0 (0 : bronze4 / STEP5 / - )
    -80 : STEP1 0 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT10 144 0 2
(-96,896) to (-96,832) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -96 : STEP1 0 : TLITE6_5 144 0 0
    0 (0 : metal / - / - )
    -80 : STEP1 0 : TLITE6_5 144 0 0
(-128,896) to (-128,832) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -112 : STEP1 0 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -96 : STEP1 0 : TLITE6_5 144 0 0
(-160,896) to (-160,832) : 4 : 3 : 2
    0 (32 : TEKWALL4 / STEP5 / - )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
    0 (0 : - / - / - )
    -112 : STEP1 0 : TLITE6_5 144 0 0
(136,1112) to (264,1112) : 4 : 31 : 0
    0 (0 : metal / STEP3 / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -64 : FLOOR3_3 -64 : FLAT20 144 0 1
(264,1120) to (264,1112) : 1 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    -64 : FLOOR3_3 -64 : FLAT20 144 0 1
(136,1112) to (136,1120) : 1 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    -64 : FLOOR3_3 -64 : FLAT20 144 0 1
(-896,1408) to (-640,1408) : 1 : 0 : 0
    0 (0 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-640,1408) to (-608,1408) : 1 : 0 : 0
    0 (0 : - / - / SKINBORD )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-608,1408) to (-544,1408) : 1 : 0 : 0
    0 (0 : - / - / SKINEDGE )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-544,1408) to (-320,1408) : 1 : 0 : 0
    0 (0 : - / - / SKINFACE )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-320,1408) to (-256,1408) : 1 : 0 : 0
    0 (64 : - / - / SKINEDGE )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-256,1408) to (-224,1408) : 1 : 0 : 0
    0 (32 : - / - / SKINBORD )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-136,1408) to (-136,1152) : 1 : 0 : 0
    0 (0 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-480,1072) to (-544,1072) : 1 : 0 : 0
    0 (0 : - / - / SKINEDGE )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-544,1072) to (-800,1072) : 1 : 0 : 0
    0 (0 : - / - / SKINFACE )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-800,1072) to (-864,1072) : 1 : 0 : 0
    0 (64 : - / - / SKINEDGE )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-864,1072) to (-896,1072) : 1 : 0 : 0
    0 (32 : - / - / SKINBORD )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-896,1232) to (-896,1152) : 20 : 119 : 5
    0 (0 : - / BRONZE4 / - )
    -80 : FLAT5_5 8 : TLITE6_5 144 0 0
    0 (0 : metal / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-1024,704) to (-1024,832) : 4 : 0 : 0
    0 (0 : - / GRAYBIG / - )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
    0 (0 : - / - / - )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1024,832) to (-1152,832) : 4 : 0 : 0
    0 (0 : - / GRAYBIG / - )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
    0 (0 : - / - / - )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1136,816) to (-1040,816) : 4 : 0 : 0
    0 (0 : - / GRAYBIG / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
    0 (0 : - / MARBLE1 / - )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1040,816) to (-1040,720) : 4 : 0 : 0
    0 (0 : - / GRAYBIG / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
    0 (0 : - / - / - )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1040,720) to (-1136,720) : 4 : 0 : 0
    0 (0 : - / GRAYBIG / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
    0 (0 : - / - / - )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1136,720) to (-1136,816) : 4 : 0 : 0
    0 (0 : - / GRAYBIG / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
    0 (0 : - / - / - )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1024,704) to (-1152,704) : 9 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1152,704) to (-1152,832) : 9 : 0 : 0
    0 (0 : - / - / FIREBLU2 )
    -168 : FLAT5_4 -64 : CEIL4_3 144 0 0
(-1136,816) to (-1088,768) : 132 : 0 : 0
    0 (0 : - / - / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
    0 (0 : - / - / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
(-1088,768) to (-1136,720) : 132 : 119 : 4
    0 (0 : - / - / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
    0 (0 : - / - / - )
    -296 : FLAT5_4 -64 : CEIL4_3 144 0 4
(-192,1216) to (-256,1216) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-192,1280) to (-192,1216) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-256,1280) to (-192,1280) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-256,1216) to (-256,1280) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-384,1216) to (-448,1216) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-384,1280) to (-384,1216) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-448,1280) to (-384,1280) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-448,1216) to (-448,1280) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-640,1216) to (-704,1216) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-640,1280) to (-640,1216) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-704,1280) to (-640,1280) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-704,1216) to (-704,1280) : 4 : 0 : 0
    0 (0 : - / SKSNAKE1 / - )
    -160 : SFLR6_1 64 : FLAT5_3 192 0 5
    0 (32 : - / - / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(784,1320) to (816,1320) : 1 : 0 : 0
    0 (112 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(816,1320) to (832,1344) : 1 : 0 : 0
    0 (32 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(832,1344) to (832,1376) : 1 : 0 : 0
    0 (64 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(832,1376) to (816,1400) : 1 : 0 : 0
    0 (96 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(816,1400) to (784,1400) : 1 : 0 : 0
    0 (0 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(784,1400) to (768,1376) : 1 : 0 : 0
    0 (32 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(768,1376) to (768,1344) : 1 : 0 : 0
    0 (64 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(768,1344) to (784,1320) : 1 : 0 : 0
    0 (96 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(784,1672) to (816,1672) : 1 : 0 : 0
    0 (112 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(816,1672) to (832,1696) : 1 : 0 : 0
    0 (32 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(832,1696) to (832,1728) : 1 : 0 : 0
    0 (64 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(832,1728) to (816,1752) : 1 : 0 : 0
    0 (96 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(816,1752) to (784,1752) : 1 : 0 : 0
    0 (0 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(784,1752) to (768,1728) : 1 : 0 : 0
    0 (32 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(768,1728) to (768,1696) : 1 : 0 : 0
    0 (64 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(768,1696) to (784,1672) : 1 : 0 : 0
    0 (96 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(912,1496) to (944,1496) : 1 : 0 : 0
    0 (112 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(944,1496) to (960,1520) : 1 : 0 : 0
    0 (32 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(960,1520) to (960,1552) : 1 : 0 : 0
    0 nel	orderFront:NULL];
		NXPing();
		
		sprintf (filename, "%s/texture%d.dsp",projectdirectory,windex+1 );
		
		BackupFile(filename);
		unlink(filename);
		handle = open (filename,O_CREAT | O_RDWR, 0666);
		if (handle == -1)
		{
			if (!windex)
			{
				[panel	orderOut:NULL];
				NXFreeAlertPanel(panel);
				NXPing();
				NXRunAlertPanel ("Error","Couldn't create %s",
					NULL,NULL,NULL, filename);
				return self;
			}
			else
			{
				[panel	orderOut:NULL];
				NXFreeAlertPanel(panel);
				NXPing();
				close(handle);
				break;
			}
		}
	
		fchmod (handle,0666);
		flock (handle, LOCK_EX);
		
		stream = fdopen (handle,"r+");
		if (!stream)
		{
			fclose (stream);
			[panel	orderOut:NULL];
			NXFreeAlertPanel(panel);
			NXPing();
			NXRunAlertPanel ("Error","Could not stream to %s",
				NULL,NULL,NULL, filename);
			return self;
		}
		
		//
		//	Count how many of current set are in memory
		//
		wincount = 0;
		for (i = 0; i < numtextures; i++)
			if (textures[i].WADindex == windex)
				wincount++;

		//
		// go back to the beginning and write all the textures out
		//
		printf ("Writing Texture%d file\n",windex+1);
		texturesdirty = NO;
		fprintf (stream, "numtextures: %d\n",wincount);
		
		for (i=0 ; i<numtextures ; i++)
			if (textures[i].WADindex == windex)
			{
				textures[i].dirty = NO;
				[self writeTexture: &textures[i] to: stream];
			}
		
		flock (handle, LOCK_UN);
		fclose (stream);

		[panel	orderOut:NULL];
		NXFreeAlertPanel(panel);
		NXPing();
	}		
	
	if (newtexture)
		[texturePalette_i	initTextures ];

	return self;
}


/*
===============
=
= newTexture
=
===============
*/

- (int)newTexture: (worldtexture_t *)tex
{
	if (numtextures == texturessize)
	{
		texturessize += 32;		// add space to array
		textures = realloc (textures, texturessize*sizeof(worldtexture_t));
	}
	numtextures++;
	[self changeTexture: numtextures-1 to: tex];
	return numtextures-1;
}


/*
===============
=
= changeTexture
=
===============
*/

- changeTexture: (int)num to: (worldtexture_t *)tex
{
	texturesdirty = YES;
	textures[num] = *tex;
	textures[num].dirty = YES;
	return self;
}



/*
=============================================================================

						DOOM METHODS
						
=============================================================================
*/

static	int		lumptopatchnum[4096];
static	byte		*buffer, *buf_p;

- (byte *)getBuffer
{
	buffer = malloc (100000);
	return buffer;
}

/*
================
=
= writeBuffer
=
================
*/

- writeBuffer: (char const *)filename
{
	int		size;
	FILE		*stream;
	char		directory[1024];
	
	strcpy (directory, wadfile);
	StripFilename (directory);
	chdir (directory);
	
	size = buf_p - buffer;
	stream = fopen (filename,"w");
	if (!stream)
	{
		NXRunAlertPanel("ERROR!","Can't open %s! Someone must be"
			" messing with it!","OK",NULL,NULL,filename);
		free(buffer);
		return self;
	}

	fwrite (buffer, size, 1, stream);
	fclose (stream);
	printf ("%s:  %i bytes\n", filename, size);

	free (buffer);
			
	return self;
}


/*
================
=
= writePatchNames
=
================
*/

- writePatchNames
{
	int	count, i,j;
	worldtexture_t	*tex;
	int	lump;
	char	string[1024];
	
	buffer = [self getBuffer];
//
// write out names of wall patches used
//
	count = 0;
	buf_p = buffer + 4;
	memset (lumptopatchnum, -1, sizeof(lumptopatchnum));
	
	for (i= 0 ; i<numtextures ; i++)
	{
		tex = &textures[i];
		for (j=0 ; j<tex->patchcount ; j++)
		{
			lump = [wadfile_i lumpNamed: tex->patches[j].patchname];
			if (lumptopatchnum[lump] == -1)
			{
				memcpy (buf_p, tex->patches[j].patchname,8);
				buf_p += 8;
				lumptopatchnum[lump] = count;
				count++;
			}
		}
	}
		
	*(int *)buffer = LongSwap (count);
	sprintf(string,"%s/pnames.lmp",mapwads);
	[self writeBuffer: string];

	return self;
}



/*
===============
=
= writeDoomTextures
=
= Writes out a textures.lmp file with the doom version of all the textures
=
===============
*/

- writeDoomTextures
{
	mappatch_t	*patch;
	maptexture_t	*tex;
	worldtexture_t	*wtex;
	worldpatch_t	*wpatch;
	int			*list_p;
	int			i,j;
	
	int			max, windex;
	char			txtrname[1024];

	//
	//	Find out how many sets of textures there are
	//
	max = 0;
	for (i = 0; i < numtextures; i++)
		if (textures[i].WADindex > max )
			max = textures[i].WADindex;
			
	for (windex = 0; windex <= max; windex++)
	{
		int		nt;
		
		[self getBuffer];
	
		//
		//	Leave space for an index table
		//
		for (nt = 0,i = 0;i < numtextures;i++)
			if (textures[i].WADindex == windex)
				nt++;
		
		*(int *)buffer = LongSwap (nt);
		list_p = (int *)(buffer + 4);
		buf_p = buffer + (nt+1)*4;
	
		//
		// write out textures used
		//	
		for (i=0 ; i<numtextures ; i++)
		{
			wtex = &textures[i];
			if (wtex->WADindex != windex )
				continue;
	
			*list_p++ = LongSwap (buf_p-buffer);
			tex = (maptexture_t *)buf_p;
			buf_p += sizeof(*tex) - sizeof(tex->patches);
			
			strncpy(tex->name,wtex->name,8);   // JR 4/5/93
			tex->masked = false;
			tex->width = ShortSwap (wtex->width);
			tex->height = ShortSwap (wtex->height);
			tex->collumndirectory = NULL;
			tex->patchcount = ShortSwap(wtex->patchcount);
			for (j=0 ; j<wtex->patchcount ; j++)
			{
				wpatch = &wtex->patches[j];
				patch = (mappatch_t *)buf_p;
				buf_p += sizeof(mappatch_t);
				
				patch->originx = ShortSwap(wpatch->originx);
				patch->originy = ShortSwap(wpatch->originy);
				patch->patch = ShortSwap( 
					lumptopatchnum [ [wadfile_i lumpNamed: wpatch->patchname]  ]  );
				patch->stepdir = ShortSwap(wpatch->stepdir);
				patch->colormap = ShortSwap(wpatch->colormap);
			}	
		}
		
		
		//
		// write it out to disk
		//
		sprintf( txtrname, "%s/texture%d.lmp", mapwads,windex+1 );
		[self writeBuffer: txtrname];
	}

	return self;
}

/*
===============
=
= saveDoomLumps
=
= Writes out textures.lmp file with the doom version of all the textures
=
===============
*/

- saveDoomLumps
{
	chdir (mapwads);
	[self writePatchNames];
	[self writeDoomTextures];
	
	return self;
}

//====================================================
//
//	Initialize and display the thermometer
//
//====================================================
- initThermo:(char *)title message:(char *)msg
{
	[thermoTitle_i	setStringValue:title];
	[thermoMsg_i	setStringValue:msg];
	[thermoView_i	setThermoWidth:0 max:1000];
	[thermoView_i	display];
	[thermoWindow_i	makeKeyAndOrderFront:NULL];
	NXPing();
	return self;
}

//====================================================
//
//	Update the thermometer
//
//====================================================
- updateThermo:(int)current max:(int)maximum
{
	[thermoView_i	setThermoWidth:current	max:maximum];
	[thermoView_i	display];
	
	return self;
}

//====================================================
//
//	Toast the thermometer
//
//====================================================
- closeThermo
{
	[thermoWindow_i	orderOut:self];
	return self;
}

@end

/*
================
=
= IO_Error
=
================
*/

void IO_Error (char *error, ...)
{
	va_list	argptr;
	char		string[1024];

	va_start (argptr,error);
	vsprintf (string,error,argptr);
	va_end (argptr);
	NXRunAlertPanel ("Error",string,NULL,NULL,NULL);
	[NXApp terminate: NULL];
}

//=======================================================
//
//	Draw a red outline (must already be lockFocus'ed on something)
//
//=======================================================
void DE_DrawOutline(NXRect *r)
{
	PSsetrgbcolor ( 148,0,0 );
	PSmoveto ( r->origin.x, r->origin. y );
	PSsetlinewidth( 2.0 );
	PSlineto (r->origin.x+r->size.width-1,r->origin.y);
	PSlineto (r->origin.x+r->size.width-1,
			r->origin.y+r->size.height-1);
	PSlineto (r->origin.x,r->origin.y+r->size.height-1);
	PSlineto (r->origin.x,r->origin.y);
	PSstroke ();

	return;	
}

                                                                                                                                                                                                                                                                                                                                                                                                                                                     (64 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(960,1552) to (944,1576) : 1 : 0 : 0
    0 (96 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(944,1576) to (912,1576) : 1 : 0 : 0
    0 (0 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(912,1576) to (896,1552) : 1 : 0 : 0
    0 (32 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(896,1552) to (896,1520) : 1 : 0 : 0
    0 (64 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(896,1520) to (912,1496) : 1 : 0 : 0
    0 (96 : - / - / MARBLE2 )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(640,1696) to (704,1632) : 132 : 2 : 6
    0 (0 : - / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(704,1632) to (640,1560) : 132 : 2 : 6
    0 (0 : - / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
(384,1664) to (392,1664) : 81 : 0 : 0
    0 (24 : - / - / support2 )
    -88 : BLOOD3 -8 : DEM1_6 144 0 0
(392,1600) to (384,1600) : 17 : 0 : 0
    0 (32 : - / - / support2 )
    -88 : BLOOD3 -8 : DEM1_6 144 0 0
(400,1600) to (400,1664) : 4 : 0 : 0
    0 (0 : MARBLE1 / MARBLE1 / - )
    -88 : BLOOD3 -8 : DEM1_6 144 5 0
    0 (0 : - / - / - )
    -88 : BLOOD3 -8 : DEM1_6 144 5 7
(640,1208) to (640,1216) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(640,1104) to (640,1208) : 1 : 0 : 0
    0 (104 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
(768,1104) to (640,1104) : 1 : 0 : 0
    0 (104 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
(768,1208) to (768,1104) : 4 : 31 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(768,1216) to (768,1208) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(768,1216) to (640,1216) : 4 : 2 : 7
    0 (64 : GSTONE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(640,1208) to (768,1208) : 4 : 0 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(1096,1216) to (1088,1216) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(1216,1216) to (1096,1216) : 1 : 0 : 0
    0 (64 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
(1216,1408) to (1216,1216) : 1 : 0 : 0
    0 (0 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
(1096,1408) to (1216,1408) : 4 : 31 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1088,1408) to (1096,1408) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(1088,1408) to (1088,1216) : 4 : 2 : 7
    0 (128 : GSTONE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(1096,1216) to (1096,1408) : 4 : 0 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(960,1856) to (960,1864) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(960,1864) to (960,1984) : 1 : 0 : 0
    0 (8 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
(960,1984) to (1088,1984) : 1 : 0 : 0
    0 (0 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
(1088,1984) to (1088,1864) : 4 : 31 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1088,1864) to (1088,1856) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(1088,1864) to (960,1864) : 4 : 0 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(960,1856) to (1088,1856) : 4 : 2 : 7
    0 (0 : GSTONE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 144 0 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 6
(768,1208) to (776,1208) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(776,1104) to (768,1104) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(776,1208) to (832,1208) : 129 : 0 : 0
    0 (0 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(832,1208) to (832,1104) : 129 : 0 : 0
    0 (56 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(832,1104) to (776,1104) : 129 : 0 : 0
    0 (56 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1096,1408) to (1096,1416) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1096,1416) to (1096,1536) : 129 : 0 : 0
    0 (8 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1096,1536) to (1216,1536) : 129 : 0 : 0
    0 (0 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1216,1536) to (1216,1416) : 129 : 0 : 0
    0 (120 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1216,1416) to (1216,1408) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1216,1416) to (1096,1416) : 4 : 0 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1096,1864) to (1088,1864) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1216,1864) to (1096,1864) : 129 : 0 : 0
    0 (120 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1216,1984) to (1216,1864) : 129 : 0 : 0
    0 (0 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1096,1984) to (1216,1984) : 129 : 0 : 0
    0 (8 : - / - / MARBLE1 )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
(1088,1984) to (1096,1984) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(1096,1864) to (1096,1984) : 4 : 0 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(776,1104) to (776,1208) : 4 : 0 : 0
    0 (0 : MARBLE1 / - / - )
    -72 : DEM1_5 56 : DEM1_6 128 9 0
    0 (0 : - / - / - )
    -72 : DEM1_5 -72 : FLAT20 128 0 0
(128,2128) to (128,2176) : 1 : 0 : 0
    0 (16 : - / - / WOOD6 )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(128,2176) to (176,2176) : 1 : 0 : 0
    0 (0 : - / - / WOOD6 )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(520,2176) to (592,2176) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -96 : FLAT5_5 32 : CEIL3_4 64 0 0
(592,2176) to (592,2112) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -96 : FLAT5_5 32 : CEIL3_4 64 0 0
(592,2112) to (520,2112) : 1 : 0 : 0
    0 (0 : - / - / WOOD8 )
    -96 : FLAT5_5 32 : CEIL3_4 64 0 0
(520,2112) to (520,2176) : 4 : 0 : 0
    0 (0 : WOOD8 / - / - )
    -96 : FLAT5_5 32 : CEIL3_4 64 0 0
    0 (0 : - / - / - )
    -96 : FLAT5_5 -96 : FLAT10 64 0 9
(512,2176) to (512,2112) : 36 : 0 : 0
    0 (0 : WOOD6 / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
    0 (0 : - / - / - )
    -96 : FLAT5_5 -96 : FLAT10 64 0 9
(512,2176) to (520,2176) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -96 : FLAT5_5 -96 : FLAT10 64 0 9
(520,2112) to (512,2112) : 17 : 0 : 0
    0 (0 : - / - / DOORTRAK )
    -96 : FLAT5_5 -96 : FLAT10 64 0 9
(192,2112) to (192,2176) : 132 : 35 : 8
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(128,2128) to (176,2128) : 196 : 2 : 9
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(176,2128) to (176,2176) : 196 : 2 : 9
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(128,2112) to (192,2112) : 132 : 35 : 8
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
    0 (0 : - / - / - )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(64,1184) to (128,1184) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(128,1184) to (128,1248) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT1.snd    "\     V"   Sound file courtesy of Network Music, Inc                                                                                                                                                                                                                                                                          0   P ) _ : 5 2 M L s m  s  ; t 4  p e d \ F 
 #   O Q l i B B P $ _ ' & 2  7 G = } V ~ i q h x {  j` ~ ;B[" ^0EPtV5> K|:u5Azx4
]O!E'R>iT];O|T#
~Y!`.`="0R wDmzi A4>K p-	<|=%So}	&LV)  tL[Lsl	qw8 }g#BYbv)Jb#o;Tt$)!+"* %/9'0TbK+GQ'#$* '-'-g$R)y"@	 9v,1Ok>B]Rmvd!g"M%"|'; %k!
X]c /*4LNI	OY1^l '=Ru*Kcxr

b'[b
FqJ V(i!MW@H67J|yA?,Rp #%#!*Y`<fnT}^4e,}_).", &.!';%)A 5K1HA/+QiQ
ZZ
QN~_v	iE5R,sS9S
s	,L{

E"4P\
GZW 	+& 	XuW\EzxDT ~}
mYB*eI%e4ET|P#<J: Z`_o/Sf
 -K
j'h >8n |=4
fK.U'3v6/. cg>$
Ul*V	YT
dfHRr 6[0\ErAcFJC92x "H( 6j
y	a$`sAK		 `i hp"J:M
 Y1
]&
=	K;~TGrH/G/W	
	

q
S	S9
K[.l 	 e5&kw<dd&H:		
	w#
$		p@ma/)#	nc{ f
w


k
>	e3 l^|aK
V. z(F	
%	h(Y hxr^[w KDT`,q;whk!y3  m(FPji  (eAY4.S)e,W T"b\<9	$ T *o[^3~*H0 _n[b JAY
O;('*   } y]\EJ  BMl,c!KPx zJ w!/f~ =&.-.RA+=dd  d`yo%7(@ 9 ZVGUnT@NvE(   'e"jgPZ  g/.Wp|qSw g g() T 4 W 0 h  1a(Nv|S *S `q %% 9M ,l3 `+/%! { W7|cB>.  E\  fL]"Q $p1 ?    3
/U.Y mYu I _[ ] 2   E 3bNm^en  pN!AHjj W 8}CqD   u2 &) )@a`PN g |mPeJ^ R@B#2+ [  V ~v ^  " T	    o *  69 5 (~r Vi i p     6     P     J _U!wDH~ i c9JezC h 8  RQ605E]z  n Z  IQbeLJ   | rCpG5	7|A? U  ^s  b    z   p ]H I  - z}) : ( 9 6{  6 qQ$\(0o:i  q ty 8    } p ) O < 2 - " T=J  D H  ~( v   M    m q @ , Q  2 j   }a 5gpD   n	Rgbv)#K ,  &o~{3T   v   j>)>5} 1 5  g       i u ( {J+3k{ *  ~ G  n      p U Y  > ' ~ k cejv ( e 7             $ SYY0'C,~  /    L8;w<     B lo2C*$03[Q} 
   G M v     , (  x  E e -rwC  D e J }      }  d  C  #   h .W-wpuP 1  } 7  f           J M   `TnZgqo   7 + Y M t h  u  {  z g n J b $ J  -     6  Q  e & u 4  @  H q O W L 1 C  1    L I      .< 1    g    ElRVM9_,3N~  \  A           C  w "q=v50]0f  R +  f         n  9 u  > |ce[G\;kB]   - ? D Z O ` O Z D F / % wd{a{q (  ^ B  e  }      r x Z : :  xx    4 A K n _  j  l  a } N a 3 A    - 2 d Y              q L G  q^`p #  S @ | \  j  l  ^  E Z % ,   " -  3 " . + ! -  '    $   +  ) 	       #  9  J ! N % N ' E & 8 # &                  & ) - 6 3 ? 6 B 9 B 7 = 1 3 ) (  !   	   	     
    !  . ( : 4 D ; L = M 8 I / ? $ .               " & + 8 1 D 6 K 8 K 6 G 4 = 0 . ) ! !          #  / ) 9 8 @ ? = ; 4 . %        2  ? # D - C 2 : 4 / 1  )         '  -  ,  %     
                 #  +  -  -  +  ' "    
       $  -  5  9  :  :  7 $ 0 * ) . # 2  3  1  +  "                 	        #  &   ( " ( & ) ( & ) # )  '  #              %   )  '  !          	          	  	                 	  	     
                
       
                        !   # ! "            	                  
      	 	                                       
                 	  
 	 
 	 	  	                                 	 
 	  	  	  	  	  	  	 	  	  	     	  	  	            	  	          	                                                 4 160 9 3
(128,1248) to (64,1248) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(64,1248) to (64,1184) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 0 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(1024,800) to (1024,808) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -56 : FLOOR3_3 -56 : FLAT20 144 0 0
(1024,808) to (1024,832) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -56 : FLOOR3_3 16 : FLOOR4_6 144 0 0
(1088,832) to (1088,808) : 1 : 0 : 0
    0 (0 : - / - / support3 )
    -56 : FLOOR3_3 16 : FLOOR4_6 144 0 0
(1088,808) to (1088,800) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -56 : FLOOR3_3 -56 : FLAT20 144 0 0
(1024,800) to (1088,800) : 4 : 31 : 0
    0 (0 : SLADSKUL / step2 / - )
    -64 : FLOOR3_3 32 : SFLR6_4 144 0 0
    0 (0 : - / - / - )
    -56 : FLOOR3_3 -56 : FLAT20 144 0 0
(1088,808) to (1024,808) : 4 : 0 : 0
    0 (0 : SLADSKUL / - / - )
    -56 : FLOOR3_3 16 : FLOOR4_6 144 0 0
    0 (0 : - / - / - )
    -56 : FLOOR3_3 -56 : FLAT20 144 0 0
(-864,960) to (-864,1024) : 4 : 0 : 0
    0 (0 : - / BROWNHUG / - )
    -80 : CEIL5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -64 : CEIL5_2 0 : CEIL3_4 144 0 0
(-832,960) to (-832,1024) : 4 : 0 : 0
    0 (0 : - / BROWNHUG / - )
    -96 : CEIL5_2 0 : CEIL3_4 144 0 0
    0 (0 : METAL / - / - )
    -80 : CEIL5_2 0 : CEIL3_4 144 0 0
(-800,928) to (-800,1024) : 4 : 0 : 0
    0 (0 : - / BROWNHUG / - )
    -112 : CEIL5_2 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -96 : CEIL5_2 0 : CEIL3_4 144 0 0
(-896,1024) to (-896,960) : 20 : 0 : 0
    0 (64 : - / FIREBLU2 / - )
    -192 : FLAT14 0 : CEIL3_4 144 0 0
    0 (0 : metal / - / - )
    -64 : CEIL5_2 0 : CEIL3_4 144 0 0
(-32,160) to (-96,224) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
    0 (0 : - / - / - )
    -40 : FLOOR7_1 72 : CEIL3_2 128 0 0
(-64,128) to (-128,192) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -40 : FLOOR7_1 72 : CEIL3_2 128 0 0
    0 (0 : - / - / - )
    -24 : FLOOR7_1 72 : CEIL3_2 144 0 0
(-96,96) to (-160,160) : 4 : 0 : 0
    0 (0 : - / STEP5 / - )
    -24 : FLOOR7_1 72 : CEIL3_2 144 0 0
    0 (0 : - / - / - )
    -8 : FLOOR7_1 72 : CEIL3_2 160 0 0
(-128,64) to (-192,128) : 12 : 0 : 0
    0 (0 : - / STEP5 / - )
    -8 : FLOOR7_1 72 : CEIL3_2 160 0 0
    0 (0 : SP_HOT1 / - / - )
    8 : FLOOR7_1 104 : FLAT5_1 144 0 0
(48,368) to (56,360) : 17 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(104,312) to (128,288) : 17 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    -56 : FLOOR5_4 72 : CEIL3_2 112 0 0
(64,120) to (72,120) : 17 : 0 : 0
    0 (0 : - / - / bronze3 )
    -64 : FLOOR3_3 24 : SFLR6_4 144 0 0
(896,-64) to (848,-8) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(848,-8) to (888,88) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(888,88) to (1016,112) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1016,112) to (1112,88) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1112,88) to (1176,16) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1176,16) to (1176,-32) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1176,-32) to (1088,-72) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1088,-72) to (1064,-48) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1064,-48) to (1016,-64) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1016,-64) to (1000,-96) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1000,-96) to (1032,-128) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
(1032,-128) to (1080,-128) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1080,-128) to (1096,-96) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1096,-96) to (1160,-72) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1160,-72) to (1208,-112) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1208,-112) to (1248,-80) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1280,-256) to (1184,-336) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1184,-336) to (1088,-336) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1088,-336) to (1088,-264) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1088,-264) to (1008,-232) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1008,-232) to (952,-280) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 128 0 0
(952,-280) to (952,-304) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(952,-304) to (992,-328) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(992,-328) to (1048,-296) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1048,-296) to (1064,-368) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(1064,-368) to (1128,-392) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1160,-472) to (1064,-480) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1064,-480) to (1008,-424) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1008,-424) to (960,-440) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(960,-440) to (880,-408) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(880,-408) to (888,-368) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 0
(-1248,-960) to (-1248,-928) : 1 : 0 : 0
    0 (0 : - / - / WOOD6 )
    16 : FLAT5_2 144 : CEIL1_1 160 0 0
(384,-704) to (448,-768) : 196 : 3 : 16
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(448,-1088) to (384,-1152) : 196 : 3 : 16
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
    0 (0 : - / - / - )
    -152 : FLAT5_1 -64 : CEIL1_1 144 0 0
(-768,-1344) to (-768,-1088) : 1 : 0 : 0
    0 (0 : - / - / SKINSCAB )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-512,-1344) to (-680,-1344) : 1 : 0 : 0
    0 (0 : - / - / SKINMET1 )
    -32 : BLOOD3 96 : TLITE6_6 176 5 0
(-680,-1376) to (-680,-1544) : 1 : 0 : 0
    0 (0 : - / - / SKINLOW )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
(-960,-1664) to (-960,-1728) : 4 : 52 : 0
    0 (0 : - / - / - )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
    0 (0 : - / - / - )
    -24 : GATE4 80 : GATE4 144 0 0
(-896,-1664) to (-960,-1664) : 4 : 52 : 0
    0 (0 : - / - / - )
    -24 : SFLR6_4 80 : FLOOR1_6 144 0 0
    0 (0 : - / - / - )
    -24 : GATE4 80 : GATE4 144 0 0
(-360,1088) to (-448,1072) : 1 : 0 : 0
    0 (168 : - / - / SKINCUT )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
(-896,960) to (-960,960) : 4 : 0 : 0
    0 (0 : SW1LION / - / - )
    -192 : FLAT14 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
(-960,960) to (-960,1024) : 4 : 0 : 0
    0 (0 : SW1LION / - / - )
    -192 : FLAT14 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -192 : FLAT14 -64 : CEIL4_3 144 0 0
(-960,1024) to (-896,1024) : 36 : 0 : 0
    0 (0 : SW1LION / FIREBLU2 / - )
    -192 : FLAT14 0 : CEIL3_4 144 0 0
    0 (0 : - / - / - )
    -64 : FLAT14 -64 : CEIL4_3 144 0 0
(1248,-80) to (1264,-24) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1264,-24) to (1224,72) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1224,72) to (1256,168) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1328,224) to (1416,200) : 1 : 0 : 0
    0 (0 : - /#import "idfunctions.h"
#import "Wadfile.h"
#import "EditWorld.h"
#import "R_mapdef.h"
#import "DoomProject.h"
#import "BlockWorld.h"
#import "TextLog.h"

typedef struct
{
	char	identification[4];		// should be IWAD
	int		numlumps;
	int		infotableofs;
} wadinfo_t;


@implementation EditWorld (EWDoomSave)

char		*buffer, *buf_p;
int		worldsize;

id		mapwad_i;

// the writeplanenames / writepatchnames methods build these translation tables
int		lumptoflatnum[4096];
int		pointcrunch[8192];
int		linecrunch[8192];

/*
===============================================================================

						SAVE OUTPUT FILE

===============================================================================
*/

	
/*
================
=
= writeBuffer
=
================
*/

- writeBuffer: (char const *)filename
{
	int		size;
	
	size = buf_p - buffer;
	[mapwad_i addName: filename data: buffer size: size];
	printf ("%s:  %i bytes\n", filename, size);
	worldsize += size;
		
	return self;
}



/*
================
=
= writeFlatNames
=
================
*/

- writeFlatNames
{
	int	lump, count, i,j;
	worldline_t	*line;

//
// write out names of wall patches used
//
	count = 0;
	buf_p = buffer + 4;
	memset (lumptoflatnum, -1, sizeof(lumptoflatnum));
	
	for (i=0 ; i<numlines ; i++)
	{
		line = &lines[i];
		if (line->selected == -1)
			continue;
		for (j=0 ; j<=  ( (line->flags&ML_TWOSIDED) != 0 ) ; j++ )
		{
			lump = [wadfile_i lumpNamed : line->side[j].ends.floorflat];
			if (lumptoflatnum[lump] == -1)
			{
				memcpy (buf_p, line->side[j].ends.floorflat,8);
				buf_p += 8;
				lumptoflatnum[lump] = count;
				count++;
			}
			lump = [wadfile_i lumpNamed : line->side[j].ends.ceilingflat];
			if (lumptoflatnum[lump] == -1)
			{
				memcpy (buf_p, line->side[j].ends.ceilingflat,8);
				buf_p += 8;
				lumptoflatnum[lump] = count;
				count++;
			}
		}
	}
			
	*(int *)buffer = LongSwap (count);
	[self writeBuffer: "flatname"];
			
	return self;
}

/*
================
=
= writePoints
=
================
*/

- writePoints
{
	int			i;
	int			count;
	mapvertex_t	*vertex;
	
	count = 0;
	memset (pointcrunch, 0, sizeof(pointcrunch));
	buf_p = buffer + 4;	
	
	for (i= 0 ; i<numpoints ; i++)
	{
		if (points[i].selected == -1)
			continue;
		pointcrunch[i] = count;
		count++;
		vertex = (mapvertex_t *)buf_p;
		buf_p += sizeof(mapvertex_t);
		vertex->x = ShortSwap( (int)(points[i].pt.x ));
		vertex->y = ShortSwap ((int)(points[i].pt.y));
	}

	*(int *)buffer = LongSwap (count);
	[self writeBuffer: "points"];

	return self;
}


/*
================
=
= writeLines
=
================
*/

- writeLines
{
	int		i, s,  top, bottom, height;
	int		ttex, mtex, btex;
	worldline_t	*wline;
	mapline_t	*line;
	mapside_t	*side;
	worldside_t	*wside;
	int		count;
	int		length;
	float		dx, dy;
	NXPoint	*p1, *p2;
	char		string[80];
	
	count = 0;

//
// write out the lines
//
	buf_p = buffer+4;
	
	for (i= 0 ; i<numlines ; i++)
	{
		wline = &lines[i];
		if (wline->selected != -1)
		{
			linecrunch[i] = count;
			count++;

			line = (mapline_t *)buf_p;
			buf_p += sizeof(mapline_t);
							
			line->p1 = ShortSwap (pointcrunch[wline->p1]);
			line->p2 = ShortSwap (pointcrunch[wline->p2]);
			line->flags = ShortSwap (wline->flags);
			line->special = ShortSwap( wline->special);
			line->tag = ShortSwap( wline->tag);
			p1 = &points[wline->p1].pt;
			p2 = &points[wline->p2].pt;
			
			dx = p2->x - p1->x;
			dy = p2->y - p1->y;
			length = sqrt(dx*dx + dy*dy);
			line->length = ShortSwap (length);
			
			for (s=0 ; s<=  ( (wline->flags&ML_TWOSIDED) != 0) ; s++ )
			{
				wside = &wline->side[s];
				side = &line->side[s];
				
				if (wside->ends.floorheight > wside->ends.ceilingheight)
				{
					[editworld_i selectLine: i];
					sprintf( string, "LINE %d ERROR: Floor higher than ceiling!\n",i );
					[log_i	msg:string ];
				}
					
				side->flags = ShortSwap (wside->flags);
				side->firstcollumn = ShortSwap (wside->firstcollumn);
				
				ttex =  [doomproject_i textureNamed: wside->toptexture];
				if (ttex == -2)
				{
					[editworld_i selectLine: i];
					sprintf( string, "LINE %d ERROR: "
						"Can't find top texture '%s'!\n",i,wside->toptexture);
					[log_i	msg:string ];
				}
				side->toptexture = ShortSwap (ttex);
				btex =  [doomproject_i textureNamed: wside->bottomtexture];
				if (btex == -2)
				{
					[editworld_i selectLine: i];
					sprintf( string, "LINE %d ERROR: "
						"Can't find bottom texture '%s'!\n",i,wside->bottomtexture);
					[log_i	msg:string ];
				}
				side->bottomtexture = ShortSwap (btex);
				mtex =  [doomproject_i textureNamed: wside->midtexture];
				if (mtex == -2)
				{
					[editworld_i selectLine: i];
					sprintf( string, "LINE %d ERROR: "
						"Can't find middle texture '%s'!\n",i,wside->midtexture);
					[log_i	msg:string ];
				}
				side->midtexture = ShortSwap (mtex);
				
				side->sector = ShortSwap (wside->sector);

				if ( wline->flags & ML_TWOSIDED )
				{	// validate two sided wall
					top = wline->side[s].ends.ceilingheight;
					bottom = wline->side[!s].ends.ceilingheight;
					height = top - bottom;
//					if ( height > 0 &&  ( ttex < 0 || textures[ttex].height < height) )
//						[editworld_i selectLine: i];  // not enough top texture
					top = wline->side[!s].ends.floorheight;
					bottom = wline->side[s].ends.floorheight;
					height = top - bottom;
//					if (height > 0 && ( btex < 0 || textures[btex].height < height) )
//						[editworld_i selectLine: i];  // not enough bottom texture
					if (mtex != -1)
					{
						[editworld_i selectLine: i]; // FIXME: until mid textures work
						sprintf(string,"LINE %d: Two-sided line has a midtexture!\n",i);
						[log_i	msg:string];
					}
				}
				else
				{	// validate single sided wall
					top = wside->ends.ceilingheight;
					bottom = wside->ends.floorheight;
//					if (mtex < 0 || top - bottom >  textures[mtex].height)
//						[editworld_i selectLine: i];  // not enough middle texture
				}


			}
		}
	}

	*(int *)buffer = LongSwap (count);
	[self writeBuffer: "lines"];
	
	return self;
}


/*
================
=
= writeThings
=
================
*/

- writeThings
{
	int		i;
	int		line, side;
	worldthing_t	*wthing;
	mapthing_t	*thing;
	int		count;
	
	count = 0;
//
// write out the things
//
	buf_p = buffer+4;
	
	for (i= 0 ; i<numthings ; i++)
	{
		wthing = &things[i];
		if (wthing->selected == -1)
			continue;
			
		count ++;
		
		thing = (mapthing_t *)buf_p;
		buf_p += sizeof(mapthing_t);
		
		// find the line nearest the thing to get it's sector number
		
		line = LineByPoint (&wthing->origin, &side);
		if (line == -1)
			[editworld_i selectThing: i];
		else
		{
			if (side== 1 && !(lines[line].flags & ML_TWOSIDED) )
				[editworld_i selectThing: i];
			else
				thing->sector = ShortSwap (lines[line].side[side].sector);
		}
		
		thing->origin.x = ShortSwap( (int)wthing->origin.x );
		thing->origin.y = ShortSwap( (int)wthing->origin.y );

		thing->angle = ShortSwap (wthing->angle);
		thing->type = ShortSwap (wthing->type);
		thing->options = ShortSwap (wthing->options);
	}

	
	*(int *)buffer = LongSwap (count);
	[self writeBuffer: "things"];
	
	return self;
}


/*
================
=
= writeSectors
=
================
*/

- writeSectors
{
	int			i,j;
	int			*linenum;
	int			count, lcount;
	int			*list_p;
	worldsector_t	*wsector;
	mapsector_t	*msector;

	count = [sectors count];
		
	*(int *)buffer = LongSwap (count);
	list_p = (int *)(buffer + 4);
	buf_p = (byte *)(list_p+count);

	for (i=0 ; i<count ; i++)		
	{
		*list_p++ = LongSwap (buf_p-buffer);
		wsector = [sectors elementAt: i];
		lcount = [wsector->lines count];
		
		msector = (mapsector_t *)buf_p;
		buf_p += sizeof(mapsector_t) + (lcount-1)*sizeof(short);
		
		msector->floorheight = ShortSwap (wsector->s.floorheight);
		msector->ceilingheight = ShortSwap (wsector->s.ceilingheight);
		msector->lightlevel = ShortSwap (wsector->s.lightlevel);
		msector->special = ShortSwap (wsector->s.special);
		msector->tag = ShortSwap (wsector->s.tag);
		msector->floortexture = 
			ShortSwap (lumptoflatnum[[wadfile_i lumpNamed: wsector->s.floorflat]] );
		msector->ceilingtexture = 
			ShortSwap (lumptoflatnum[[wadfile_i lumpNamed: wsector->s.ceil - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1416,200) to (1456,136) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1456,136) to (1456,40) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1456,40) to (1408,32) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1408,32) to (1384,80) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1384,80) to (1320,80) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1320,80) to (1312,40) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1312,40) to (1352,-16) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1352,-16) to (1416,-32) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1416,-32) to (1488,-16) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1488,-16) to (1528,96) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1528,96) to (1568,40) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1568,40) to (1576,-128) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1576,-128) to (1544,-192) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1544,-192) to (1456,-232) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1456,-232) to (1400,-200) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1400,-200) to (1376,-136) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1376,-136) to (1320,-136) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1320,-136) to (1280,-176) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1280,-176) to (1280,-256) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1128,-392) to (1216,-384) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1216,-384) to (1368,-304) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1368,-304) to (1512,-360) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1528,-496) to (1448,-680) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1448,-680) to (1304,-704) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1304,-704) to (1136,-632) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1136,-632) to (1136,-528) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1136,-528) to (1200,-512) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1200,-512) to (1248,-544) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1248,-544) to (1280,-504) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1280,-504) to (1248,-448) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1248,-448) to (1192,-440) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(1192,-440) to (1160,-472) : 1 : 0 : 0
    0 (0 : - / - / ASHWALL )
    -72 : FLAT5_8 32 : FLOOR6_2 160 1 23
(72,1240) to (120,1240) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(72,1192) to (72,1240) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(120,1192) to (72,1192) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(120,1240) to (120,1192) : 4 : 0 : 0
    0 (0 : ASHWALL / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 -64 : FLAT14 160 9 3
(-768,416) to (-896,416) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-896,416) to (-1024,416) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-1024,416) to (-1152,416) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-1152,544) to (-1152,672) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-1152,672) to (-1024,672) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-1024,672) to (-896,672) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-352,384) to (-352,256) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-480,256) to (-608,256) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-608,256) to (-608,384) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : TLITE6_6 144 0 0
(-192,768) to (-64,768) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-64,768) to (64,768) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-320,576) to (-320,640) : 1 : 0 : 0
    0 (64 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(64,768) to (64,640) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(64,640) to (64,512) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(64,512) to (-64,512) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-64,512) to (-192,512) : 1 : 0 : 0
    0 (0 : - / - / WOOD11 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(-192,512) to (-320,512) : 1 : 0 : 0
    0 (0 : - / - / WOOD10 )
    -128 : FLAT5_2 0 : CEIL3_4 144 0 0
(128,2112) to (128,2128) : 1 : 0 : 0
    0 (0 : - / - / WOOD6 )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(176,2176) to (192,2176) : 1 : 0 : 0
    0 (48 : - / - / WOOD6 )
    -96 : FLAT5_2 32 : CEIL3_4 176 0 8
(0,-1408) to (0,-1416) : 17 : 0 : 0
    0 (0 : - / - / doortrak )
    -160 : FLAT5_2 -160 : FLAT10 144 0 25
(648,-1216) to (776,-1216) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(776,-1216) to (776,-1600) : 1 : 0 : 0
    0 (0 : - / - / WOOD3 )
    -160 : FLAT5_2 -32 : CEIL1_1 144 0 0
(-296,1104) to (-360,1088) : 4 : 1 : 0
    0 (0 : DOORHI / STEP5 / - )
    -64 : SFLR6_1 64 : FLAT5_3 192 0 0
    0 (32 : metal / - / - )
    -64 : SFLR6_1 -64 : FLAT10 192 0 0
(-320,960) to (-360,1024) : 1 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    -128 : FLAT1_1 64 : FLAT5_3 144 0 0
(-360,1024) to (-360,1088) : 17 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    -64 : SFLR6_1 -64 : FLAT10 192 0 0
(-296,1104) to (-256,1024) : 17 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    -64 : SFLR6_1 -64 : FLAT10 192 0 0
(-256,1024) to (-256,960) : 1 : 0 : 0
    0 (0 : - / - / BRONZE3 )
    -128 : FLAT1_1 64 : FLAT5_3 144 0 0
(-360,1024) to (-256,1024) : 4 : 2 : 2
    0 (0 : METAL / BRONZE3 / - )
    -128 : FLAT1_1 64 : FLAT5_3 144 0 0
    0 (32 : metal / - / - )
    -64 : SFLR6_1 -64 : FLAT10 192 0 0
(-256,960) to (-320,960) : 4 : 0 : 0
    0 (0 : BRONZE3 / STEP1 / - )
    -128 : FLAT1_1 64 : FLAT5_3 144 0 0
    0 (0 : - / - / - )
    -128 : FLAT1_1 0 : TLITE6_5 144 0 0
(80,1200) to (112,1200) : 4 : 0 : 0
    0 (0 : LITEBLU4 / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 0 : FLAT22 160 16 0
(112,1200) to (112,1232) : 4 : 0 : 0
    0 (0 : LITEBLU4 / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 0 : FLAT22 160 16 0
(112,1232) to (80,1232) : 4 : 0 : 0
    0 (0 : LITEBLU4 / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 0 : FLAT22 160 16 0
(80,1232) to (80,1200) : 4 : 0 : 0
    0 (0 : LITEBLU4 / - / - )
    -64 : FLOOR3_3 64 : FLAT5_3 160 16 0
    0 (0 : - / BROWNHUG / - )
    -64 : FLOOR3_3 0 : FLAT22 160 16 0
(640,1560) to (640,